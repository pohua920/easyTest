<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="UtiRecorder">

	<resultMap id="BaseResultMap" class="com.tlg.prpins.entity.UtiRecorder" >
	    <result column="SERIALNO" property="serialno" jdbcType="DECIMAL" />
	    <result column="BUSINESSNO" property="businessno" jdbcType="VARCHAR" />
	    <result column="BUSINESSTYPE" property="businesstype" jdbcType="VARCHAR" />
	    <result column="RECORDERFLAG" property="recorderflag" jdbcType="VARCHAR" />
	    <result column="RECORDERCODE" property="recordercode" jdbcType="VARCHAR" />
	    <result column="APPCODE" property="appcode" jdbcType="VARCHAR" />
	    <result column="UNIT" property="unit" jdbcType="VARCHAR" />
	    <result column="CALLTYPE" property="calltype" jdbcType="VARCHAR" />
	    <result column="MESSAGEID" property="messageid" jdbcType="VARCHAR" />
	    <result column="FMT" property="fmt" jdbcType="VARCHAR" />
	    <result column="USERCODE" property="usercode" jdbcType="VARCHAR" />
	    <result column="USERDATA" property="userdata" jdbcType="VARCHAR" />
	    <result column="CALC" property="calc" jdbcType="VARCHAR" />
	    <result column="ISFULL" property="isfull" jdbcType="VARCHAR" />
	    <result column="SENDTIME" property="sendtime" jdbcType="VARCHAR" />
	    <result column="RETCODE" property="retcode" jdbcType="VARCHAR" />
	    <result column="HITCOUNT" property="hitcount" jdbcType="VARCHAR" />
	    <result column="DECTYPE" property="dectype" jdbcType="VARCHAR" />
	    <result column="DECSTATE" property="decstate" jdbcType="VARCHAR" />
	    <result column="DECDATE" property="decdate" jdbcType="VARCHAR" />
	    <result column="DECBY" property="decby" jdbcType="VARCHAR" />
	    <result column="DECCOMMENTS" property="deccomments" jdbcType="VARCHAR" />
	    <result column="CALCDATE" property="calcdate" jdbcType="VARCHAR" />
	    <result column="SCORE" property="score" jdbcType="VARCHAR" />
	    <result column="CALCLEVEL" property="calclevel" jdbcType="VARCHAR" />
	    <result column="REMARKCOL1" property="remarkcol1" jdbcType="VARCHAR" />
	    <result column="REMARKCOL2" property="remarkcol2" jdbcType="VARCHAR" />
	    <result column="REMARKCOL3" property="remarkcol3" jdbcType="VARCHAR" />
	    <result column="REMARKCOL4" property="remarkcol4" jdbcType="VARCHAR" />
	    <result column="REMARKCOL5" property="remarkcol5" jdbcType="VARCHAR" />
  	</resultMap>

	<select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map">
		<include refid="Utils.sql1" />
		SELECT * FROM <include refid="Utils.prpinsSchema"/>UTIRECORDER
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="businessno">
				BUSINESSNO = #businessno#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="validdate">
				BUSINESSTYPE = #businesstype#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="wallno">
				APPCODE = #appcode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="structureno">
				MESSAGEID = #messageid#
			</isNotEmpty>
		</dynamic>
		<include refid="Utils.sql2" />
	</select>

	<select id="selectByParams" resultMap="BaseResultMap" parameterClass="java.util.Map">
		SELECT * FROM <include refid="Utils.prpinsSchema"/>UTIRECORDER
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="businessno">
				BUSINESSNO = #businessno#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="validdate">
				BUSINESSTYPE = #businesstype#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="wallno">
				APPCODE = #appcode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="structureno">
				MESSAGEID = #messageid#
			</isNotEmpty>
		</dynamic>
	</select>

 	
	<select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
		SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema"/>UTIRECORDER
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="businessno">
				BUSINESSNO = #businessno#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="validdate">
				BUSINESSTYPE = #businesstype#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="wallno">
				APPCODE = #appcode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="structureno">
				MESSAGEID = #messageid#
			</isNotEmpty>
		</dynamic>
	</select>
	
	<insert id="insert" parameterClass="com.tlg.prpins.entity.UtiRecorder" >

		INSERT INTO <include refid="Utils.prpinsSchema"/>UTIRECORDER (SERIALNO, BUSINESSNO, BUSINESSTYPE, RECORDERFLAG, RECORDERCODE,
      APPCODE, UNIT, CALLTYPE, MESSAGEID, FMT, USERCODE, USERDATA, CALC, ISFULL, SENDTIME, RETCODE,
      HITCOUNT, DECTYPE, DECSTATE, DECDATE, DECBY, DECCOMMENTS, CALCDATE, SCORE, CALCLEVEL,
      REMARKCOL1, REMARKCOL2, REMARKCOL3, REMARKCOL4, REMARKCOL5, ERRMSG, REMARK)
    values (#serialno:DECIMAL#, #businessno:VARCHAR#, #businesstype:VARCHAR#,
      #recorderflag:VARCHAR#, #recordercode:VARCHAR#, #appcode:VARCHAR#, #unit:VARCHAR#,
      #calltype:VARCHAR#, #messageid:VARCHAR#, #fmt:VARCHAR#, #usercode:VARCHAR#,
      #userdata:VARCHAR#, #calc:VARCHAR#, #isfull:VARCHAR#, #sendtime:VARCHAR#, #retcode:VARCHAR#,
      #hitcount:VARCHAR#, #dectype:VARCHAR#, #decstate:VARCHAR#, #decdate:VARCHAR#, #decby:VARCHAR#,
      #deccomments:VARCHAR#, #calcdate:VARCHAR#, #score:VARCHAR#, #calclevel:VARCHAR#,
      #remarkcol1:VARCHAR#, #remarkcol2:VARCHAR#, #remarkcol3:VARCHAR#, #remarkcol4:VARCHAR#,
      #remarkcol5:VARCHAR#, #errmsg:CLOB#, #remark:CLOB#)
      
		<selectKey resultClass="java.math.BigDecimal" keyProperty="serialno" >    
	       SELECT SERIALNO FROM <include refid="Utils.prpinsSchema"/>UTIRECORDER WHEREã€€SERIALNO = #serialno#
		</selectKey>
	</insert>

	<update id="update" parameterClass="com.tlg.prpins.entity.UtiRecorder">
		UPDATE
		<include refid="Utils.prpinsSchema" />
		UTIRECORDER
		<dynamic prepend="set">
			<isNotNull prepend="," property="businessno">
				BUSINESSNO = #businessno:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="businesstype">
				BUSINESSTYPE = #businesstype:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="recorderflag">
				RECORDERFLAG = #recorderflag:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="recordercode">
				RECORDERCODE = #recordercode:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="appcode">
				APPCODE = #appcode:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="unit">
				UNIT = #unit:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="calltype">
				CALLTYPE = #calltype:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="messageid">
				MESSAGEID = #messageid:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="fmt">
				FMT = #fmt:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="usercode">
				USERCODE = #usercode:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="userdata">
				USERDATA = #userdata:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="calc">
				CALC = #calc:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="isfull">
				ISFULL = #isfull:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="sendtime">
				SENDTIME = #sendtime:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="retcode">
				RETCODE = #retcode:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="hitcount">
				HITCOUNT = #hitcount:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="dectype">
				DECTYPE = #dectype:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="decstate">
				DECSTATE = #decstate:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="decdate">
				DECDATE = #decdate:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="decby">
				DECBY = #decby:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="deccomments">
				DECCOMMENTS = #deccomments:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="calcdate">
				CALCDATE = #calcdate:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="score">
				SCORE = #score:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="calclevel">
				CALCLEVEL = #calclevel:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="remarkcol1">
				REMARKCOL1 = #remarkcol1:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="remarkcol2">
				REMARKCOL2 = #remarkcol2:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="remarkcol3">
				REMARKCOL3 = #remarkcol3:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="remarkcol4">
				REMARKCOL4 = #remarkcol4:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="remarkcol5">
				REMARKCOL5 = #remarkcol5:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="errmsg">
				ERRMSG = #errmsg:CLOB#
			</isNotNull>
			<isNotNull prepend="," property="remark">
				REMARK = #remark:CLOB#
			</isNotNull>
		</dynamic>
		where SERIALNO = #serialno:DECIMAL#
	</update>

</sqlMap>