<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="FirDoubleQuakeQlist">

	<resultMap id="BaseResultMap" class="com.tlg.prpins.entity.FirDoubleQuakeQlist" >
	    <result column="OID" property="oid" jdbcType="DECIMAL" />
	    <result column="SOURCE_TYPE" property="sourceType" jdbcType="VARCHAR" />
	    <result column="SOURCE_CUSTNO" property="sourceCustno" jdbcType="VARCHAR" />
	    <result column="SOURCE_USERID" property="sourceUserid" jdbcType="VARCHAR" />
	    <result column="START_DATE" property="startDate" jdbcType="TIMESTAMP" />
	    <result column="END_DATE" property="endDate" jdbcType="TIMESTAMP" />
	    <result column="POSTCODE" property="postcode" jdbcType="VARCHAR" />
	    <result column="ADDRESS" property="address" jdbcType="VARCHAR" />
	    <result column="REPEAT_POLICYNO" property="repeatPolicyno" jdbcType="VARCHAR" />
	    <result column="REPEAT_CODE" property="repeatCode" jdbcType="VARCHAR" />
	    <result column="REPEAT_MSG" property="repeatMsg" jdbcType="VARCHAR" />
	    <result column="DCREATE" property="dcreate" jdbcType="TIMESTAMP" />
	</resultMap>

	<select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map">
		<include refid="Utils.sql1" />
		SELECT * FROM <include refid="Utils.prpinsSchema"/>FIR_DOUBLE_QUAKE_QLIST
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="oid">
				OID = #oid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="sourceType">
				SOURCE_TYPE = #sourceType#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="sourceCustno">
				SOURCE_CUSTNO = #sourceCustno#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="sourceUserid">
				SOURCE_USERID = #sourceUserid#
			</isNotEmpty>
		</dynamic>
		<include refid="Utils.sql2" />
	</select>

	<select id="selectByParams" resultMap="BaseResultMap" parameterClass="java.util.Map">
		SELECT * FROM <include refid="Utils.prpinsSchema"/>FIR_DOUBLE_QUAKE_QLIST
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="oid">
				OID = #oid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="sourceType">
				SOURCE_TYPE = #sourceType#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="sourceCustno">
				SOURCE_CUSTNO = #sourceCustno#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="sourceUserid">
				SOURCE_USERID = #sourceUserid#
			</isNotEmpty>
		</dynamic>
	</select>

	<!-- 未使用
	<select id="selectForBlklt" resultMap="BaseResultMap" parameterClass="java.util.Map">
		SELECT * <include refid="Utils.prpinsSchema"/>FROM FIR_DOUBLE_QUAKE_QLIST
		WHERE CONVERT(DATE, GETDATE(), 111) <![CDATA[>=]]> CONVERT(DATE, DEFFDATE,111) AND (CONVERT(DATE, GETDATE(), 111) <![CDATA[<=]]> CONVERT(DATE, DEXPDATE,111) OR DEXPDATE IS NULL)
		AND (NISSU = #nissu# OR IISSU = #iissu# OR ITAG = #itag# OR IENGINE = #iengine#)
	</select>
 	-->
 	
	<select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
		SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema"/>FIR_DOUBLE_QUAKE_QLIST
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="oid">
				OID = #oid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="sourceType">
				SOURCE_TYPE = #sourceType#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="sourceCustno">
				SOURCE_CUSTNO = #sourceCustno#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="sourceUserid">
				SOURCE_USERID = #sourceUserid#
			</isNotEmpty>
		</dynamic>
	</select>
	<!-- 未使用
	<select id="countByUK" resultClass="java.lang.Integer" parameterClass="com.tlg.car.entity.CarpBlklist" >
		SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema"/>FIR_DOUBLE_QUAKE_QLIST
		<dynamic prepend="WHERE">
		</dynamic>
	</select>
	-->
	
	
	<insert id="insert" parameterClass="com.tlg.prpins.entity.FirDoubleQuakeQlist" >
		<selectKey resultClass="java.math.BigDecimal" keyProperty="oid" >    
	       SELECT FIR_DOUBLE_QUAKE_QLIST_SEQ.NEXTVAL AS OID FROM DUAL    
	    </selectKey>
      	
    	INSERT INTO <include refid="Utils.prpinsSchema"/>FIR_DOUBLE_QUAKE_QLIST (OID, SOURCE_TYPE, SOURCE_CUSTNO, SOURCE_USERID, START_DATE,
      	END_DATE, POSTCODE, ADDRESS, REPEAT_POLICYNO, REPEAT_CODE, REPEAT_MSG, DCREATE)
    	values (#oid:DECIMAL#, #sourceType:VARCHAR#, #sourceCustno:VARCHAR#, #sourceUserid:VARCHAR#,
      	#startDate:TIMESTAMP#, #endDate:TIMESTAMP#, #postcode:VARCHAR#, #address:VARCHAR#,
      	#repeatPolicyno:VARCHAR#, #repeatCode:VARCHAR#, #repeatMsg:VARCHAR#, #dcreate:TIMESTAMP#)
	</insert>

	<delete id="delete" parameterClass="java.math.BigDecimal" >
		DELETE FROM <include refid="Utils.prpinsSchema"/>FIR_DOUBLE_QUAKE_QLIST WHERE OID = #oid:DECIMAL#
	</delete>

	<update id="update" parameterClass="com.tlg.prpins.entity.FirDoubleQuakeQlist">
		UPDATE
		<include refid="Utils.prpinsSchema" />
		FIR_DOUBLE_QUAKE_QLIST
		<dynamic prepend="set">
			<isNotNull prepend="," property="sourceType">
				SOURCE_TYPE = #sourceType:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="sourceCustno">
				SOURCE_CUSTNO = #sourceCustno:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="sourceUserid">
				SOURCE_USERID = #sourceUserid:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="startDate">
				START_DATE = #startDate:TIMESTAMP#
			</isNotNull>
			<isNotNull prepend="," property="endDate">
				END_DATE = #endDate:TIMESTAMP#
			</isNotNull>
			<isNotNull prepend="," property="postcode">
				POSTCODE = #postcode:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="address">
				ADDRESS = #address:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="repeatPolicyno">
				REPEAT_POLICYNO = #repeatPolicyno:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="repeatCode">
				REPEAT_CODE = #repeatCode:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="repeatMsg">
				REPEAT_MSG = #repeatMsg:VARCHAR#
			</isNotNull>
		</dynamic>
		WHERE OID = #oid:DECIMAL#
	</update>

</sqlMap>