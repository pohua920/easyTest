<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<!-- mantis：CAR0504，處理人員：CC009，需求單編號：CAR0504 微型電動二輪車【已領牌&未領牌】資料交換作業 --> 
<sqlMap namespace="TiiTvmetp">
  <resultMap class="com.tlg.prpins.entity.TiiTvmetp" id="BaseResultMap">
    <result column="OID" jdbcType="DECIMAL" property="oid" />
    <result column="CARNO" jdbcType="VARCHAR" property="carno" />
    <result column="BODYNO" jdbcType="VARCHAR" property="bodyno" />
    <result column="CARNODATE" jdbcType="VARCHAR" property="carnodate" />
    <result column="INSUREDCARDNO" jdbcType="VARCHAR" property="insuredcardno" />
    <result column="CITIZENID" jdbcType="VARCHAR" property="citizenid" />
    <result column="ISEXISTFLAG" jdbcType="VARCHAR" property="isexistflag" />
    <result column="INSBEGINDATE" jdbcType="VARCHAR" property="insbegindate" />
    <result column="OPERATEDATE" jdbcType="TIMESTAMP" property="operatedate" />
    <result column="FILENAME" jdbcType="VARCHAR" property="filename" />
  </resultMap>
  <select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select *
    from TII_TVMETP
    <dynamic prepend="WHERE">
      <isNotNull prepend="AND" property="oid">
        OID = #oid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="carno">
        CARNO = #carno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="bodyno">
        BODYNO = #bodyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="carnodate">
        CARNODATE = #carnodate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="insuredcardno">
        INSUREDCARDNO = #insuredcardno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="citizenid">
        CITIZENID = #citizenid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="isexistflag">
        ISEXISTFLAG = #isexistflag:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="insbegindate">
        INSBEGINDATE = #insbegindate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="operatedate">
        OPERATEDATE = #operatedate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="AND" property="filename">
        FILENAME = #filename:VARCHAR#
      </isNotNull>
    </dynamic>
    <isNotEmpty property="sortBy">
		ORDER BY $sortBy$ $sortType$ 
	</isNotEmpty>
  </select>
  <select id="select" parameterClass="java.util.Map" resultMap="BaseResultMap">
  	<include refid="Utils.sql1" />
    select *
    from TII_TVMETP
    <dynamic prepend="WHERE">
      <isNotNull prepend="AND" property="oid">
        OID = #oid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="carno">
        CARNO = #carno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="bodyno">
        BODYNO = #bodyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="carnodate">
        CARNODATE = #carnodate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="insuredcardno">
        INSUREDCARDNO = #insuredcardno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="citizenid">
        CITIZENID = #citizenid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="isexistflag">
        ISEXISTFLAG = #isexistflag:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="insbegindate">
        INSBEGINDATE = #insbegindate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="operatedate">
        OPERATEDATE = #operatedate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="AND" property="filename">
        FILENAME = #filename:VARCHAR#
      </isNotNull>
    </dynamic>
    <include refid="Utils.sql2" />
  </select>
  <delete id="delete" parameterClass="java.math.BigDecimal">
    delete from TII_30NOMETP
    where OID = #oid:DECIMAL#
  </delete>
  <delete id="deleteByEntity" parameterClass="com.tlg.prpins.entity.TiiTvmetp">
    delete from TII_TVMETP
    <dynamic prepend="WHERE">
      <isNotNull prepend="AND" property="oid">
        OID = #oid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="carno">
        CARNO = #carno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="bodyno">
        BODYNO = #bodyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="carnodate">
        CARNODATE = #carnodate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="insuredcardno">
        INSUREDCARDNO = #insuredcardno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="citizenid">
        CITIZENID = #citizenid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="isexistflag">
        ISEXISTFLAG = #isexistflag:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="insbegindate">
        INSBEGINDATE = #insbegindate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="operatedate">
        OPERATEDATE = #operatedate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="AND" property="filename">
        FILENAME = #filename:VARCHAR#
      </isNotNull>
    </dynamic>
  </delete>
  <insert id="insert" parameterClass="com.tlg.prpins.entity.TiiTvmetp">
  	<selectKey resultClass="java.math.BigDecimal" keyProperty="oid" >
		SELECT CAR_ADDR_IMPORTDETAILS_SEQ.NEXTVAL AS OID FROM DUAL    
	</selectKey>
    insert into TII_TVMETP (OID, CARNO, BODYNO, CARNODATE, INSUREDCARDNO, 
      CITIZENID, ISEXISTFLAG, INSBEGINDATE, OPERATEDATE, 
      FILENAME)
    values (#oid:DECIMAL#, #carno:VARCHAR#, #bodyno:VARCHAR#, #carnodate:VARCHAR#, #insuredcardno:VARCHAR#, 
      #citizenid:VARCHAR#, #isexistflag:VARCHAR#, #insbegindate:VARCHAR#, #operatedate:TIMESTAMP#, 
      #filename:VARCHAR#)
  </insert>
  <select id="countByUK" resultClass="java.lang.Integer" parameterClass="com.tlg.prpins.entity.TiiTvmetp" >
		SELECT COUNT(*) FROM TII_TVMETP
		where OID = #oid:DECIMAL#
  </select>
  <select id="count" parameterClass="java.util.Map" resultClass="java.lang.Integer">
    select count(*) from TII_TVMETP
    <dynamic prepend="WHERE">
      <isNotNull prepend="AND" property="oid">
        OID = #oid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="carno">
        CARNO = #carno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="bodyno">
        BODYNO = #bodyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="carnodate">
        CARNODATE = #carnodate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="insuredcardno">
        INSUREDCARDNO = #insuredcardno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="citizenid">
        CITIZENID = #citizenid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="isexistflag">
        ISEXISTFLAG = #isexistflag:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="insbegindate">
        INSBEGINDATE = #insbegindate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="operatedate">
        OPERATEDATE = #operatedate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="AND" property="filename">
        FILENAME = #filename:VARCHAR#
      </isNotNull>
    </dynamic>
  </select>
  <update id="update" parameterClass="com.tlg.prpins.entity.TiiTvmetp">
    update TII_TVMETP
    <dynamic prepend="set">
      <isNotNull prepend="," property="oid">
        OID = #oid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="carno">
        CARNO = #carno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="bodyno">
        BODYNO = #bodyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="carnodate">
        CARNODATE = #carnodate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="insuredcardno">
        INSUREDCARDNO = #insuredcardno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="citizenid">
        CITIZENID = #citizenid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isexistflag">
        ISEXISTFLAG = #isexistflag:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="insbegindate">
        INSBEGINDATE = #insbegindate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="operatedate">
        OPERATEDATE = #operatedate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="filename">
        FILENAME = #filename:VARCHAR#
      </isNotNull>
    </dynamic>
  </update>
</sqlMap>