<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="FirAgtBotFd" >
	<!--mantis：FIR0623，處理人員：CD094，需求單編號：FIR0623_住火_臺銀續保作業_臺銀RD簽屬檔接收排程  -->
  <resultMap id="BaseResultMap" class="com.tlg.prpins.entity.FirAgtBotFd" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 26 09:53:47 CST 2024.
    -->
    <result column="OID" property="oid" jdbcType="DECIMAL" />
    <result column="BATCH_NO" property="batchNo" jdbcType="VARCHAR" />
    <result column="FD_TYPE" property="fdType" jdbcType="VARCHAR" />
    <result column="ORDERSEQ" property="orderseq" jdbcType="VARCHAR" />
    <result column="FD_DATE" property="fdDate" jdbcType="TIMESTAMP" />
    <result column="STARTDATE_F" property="startdateF" jdbcType="TIMESTAMP" />
    <result column="STARTDATE_Q" property="startdateQ" jdbcType="TIMESTAMP" />
    <result column="ACCOUNT_NO" property="accountNo" jdbcType="VARCHAR" />
    <result column="BRANCH_NO" property="branchNo" jdbcType="VARCHAR" />
    <result column="BANK_SALES" property="bankSales" jdbcType="VARCHAR" />
    <result column="IS_APPROVAL" property="isApproval" jdbcType="VARCHAR" />
    <result column="IS_AUTO_RENEW" property="isAutoRenew" jdbcType="VARCHAR" />
    <result column="STARTDATE_A" property="startdateA" jdbcType="TIMESTAMP" />
    <result column="AMOUNT_F" property="amountF" jdbcType="DECIMAL" />
    <result column="AMOUNT_Q" property="amountQ" jdbcType="DECIMAL" />
    <result column="AMOUNT_A" property="amountA" jdbcType="DECIMAL" />
    <result column="COMPARE_RESULT" property="compareResult" jdbcType="VARCHAR" />
    <result column="REPLACE_FLAG" property="replaceFlag" jdbcType="VARCHAR" />
    <result column="REPLACE_LOG1" property="replaceLog1" jdbcType="VARCHAR" />
    <result column="REPLACE_LOG2" property="replaceLog2" jdbcType="VARCHAR" />
    <result column="REPLACE_USER" property="replaceUser" jdbcType="VARCHAR" />
    <result column="REPLACE_TIME" property="replaceTime" jdbcType="TIMESTAMP" />
    <result column="ICREATE" property="icreate" jdbcType="VARCHAR" />
    <result column="DCREATE" property="dcreate" jdbcType="TIMESTAMP" />
    <result column="LOANACCOUNT" property="loanaccount" jdbcType="VARCHAR" />
    <result column="COMPARE_FLAG" property="compareFlag" jdbcType="VARCHAR" />
    <result column="COMPARE_BATCH_NO" property="compareBatchNo" jdbcType="VARCHAR" />
    <result column="COMPARE_TIME" property="compareTime" jdbcType="TIMESTAMP" />
    <result column="COMPARE_USER" property="compareUser" jdbcType="VARCHAR" />
  </resultMap>
  
  <select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map" >
    SELECT * FROM <include refid="Utils.prpinsSchema"/>FIR_AGT_BOT_FD
    <dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="batchNo">
				BATCH_NO = #batchNo#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="oid">
				OID = #oid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="fdType">
				FD_TYPE = #fdType#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="orderseq">
				ORDERSEQ = #orderseq#
			</isNotEmpty>
			
		</dynamic>
  </select>
    <select id="selectByParams" resultMap="BaseResultMap" parameterClass="java.util.Map" >
    SELECT * FROM <include refid="Utils.prpinsSchema"/>FIR_AGT_BOT_FD
    <dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="batchNo">
				BATCH_NO = #batchNo#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="compareBatchNo">
				COMPARE_BATCH_NO = #compareBatchNo#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="oid">
				OID = #oid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="fdType">
				FD_TYPE = #fdType#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="orderseq">
				ORDERSEQ = #orderseq#
			</isNotEmpty>
			<isNotEmpty property="sortBy">
				ORDER BY $sortBy$ DESC
			</isNotEmpty>
			
		</dynamic>
  </select>
  <select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
		SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema"/>FIR_AGT_BOT_FD
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="batchNo">
				BATCH_NO = #batchNo#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="oid">
				OID = #oid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="fdType">
				FD_TYPE = #fdType#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="orderseq">
				ORDERSEQ = #orderseq#
			</isNotEmpty>
		</dynamic>
	</select>
	
	 <delete id="delete" parameterClass="com.tlg.prpins.entity.FirAgtBotFd" >
    delete from FIR_AGT_BOT_FD
    where OID = #oid:DECIMAL#
  </delete>
  <insert id="insert" parameterClass="com.tlg.prpins.entity.FirAgtBotFd" >
   	<selectKey resultClass="java.math.BigDecimal" keyProperty="oid" >    
	    SELECT FIR_AGT_TOCORE_MAIN_SEQ.NEXTVAL AS OID FROM DUAL
	</selectKey>
    insert into <include refid="Utils.prpinsSchema"/>FIR_AGT_BOT_FD (OID, BATCH_NO, FD_TYPE, ORDERSEQ, FD_DATE, STARTDATE_F, STARTDATE_Q,
      ACCOUNT_NO, BRANCH_NO, BANK_SALES, IS_APPROVAL, IS_AUTO_RENEW, STARTDATE_A, AMOUNT_F,
      AMOUNT_Q, AMOUNT_A, COMPARE_RESULT, REPLACE_FLAG, REPLACE_LOG1, REPLACE_LOG2, REPLACE_USER,
      REPLACE_TIME, ICREATE, DCREATE, LOANACCOUNT, COMPARE_FLAG, COMPARE_BATCH_NO, COMPARE_TIME,
      COMPARE_USER)
    values (#oid:DECIMAL#, #batchNo:VARCHAR#, #fdType:VARCHAR#, #orderseq:VARCHAR#,
      #fdDate:TIMESTAMP#, #startdateF:TIMESTAMP#, #startdateQ:TIMESTAMP#, #accountNo:VARCHAR#,
      #branchNo:VARCHAR#, #bankSales:VARCHAR#, #isApproval:VARCHAR#, #isAutoRenew:VARCHAR#,
      #startdateA:TIMESTAMP#, #amountF:DECIMAL#, #amountQ:DECIMAL#, #amountA:DECIMAL#,
      #compareResult:VARCHAR#, #replaceFlag:VARCHAR#, #replaceLog1:VARCHAR#, #replaceLog2:VARCHAR#,
      #replaceUser:VARCHAR#, #replaceTime:TIMESTAMP#, #icreate:VARCHAR#, #dcreate:TIMESTAMP#,
      #loanaccount:VARCHAR#, #compareFlag:VARCHAR#, #compareBatchNo:VARCHAR#,
      #compareTime:TIMESTAMP#, #compareUser:VARCHAR#)
  </insert>
  
  <update id="update" parameterClass="com.tlg.prpins.entity.FirAgtBotFd" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Jul 26 09:53:47 CST 2024.
    -->
    update FIR_AGT_BOT_FD
    <dynamic prepend="set" >
      <isNotNull prepend="," property="batchNo" >
        BATCH_NO = #batchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fdType" >
        FD_TYPE = #fdType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderseq" >
        ORDERSEQ = #orderseq:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fdDate" >
        FD_DATE = #fdDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="startdateF" >
        STARTDATE_F = #startdateF:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="startdateQ" >
        STARTDATE_Q = #startdateQ:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="accountNo" >
        ACCOUNT_NO = #accountNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="branchNo" >
        BRANCH_NO = #branchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="bankSales" >
        BANK_SALES = #bankSales:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isApproval" >
        IS_APPROVAL = #isApproval:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isAutoRenew" >
        IS_AUTO_RENEW = #isAutoRenew:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="startdateA" >
        STARTDATE_A = #startdateA:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="amountF" >
        AMOUNT_F = #amountF:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="amountQ" >
        AMOUNT_Q = #amountQ:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="amountA" >
        AMOUNT_A = #amountA:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="compareResult" >
        COMPARE_RESULT = #compareResult:VARCHAR #
      </isNotNull>
      <isNotNull prepend="," property="replaceFlag" >
        REPLACE_FLAG = #replaceFlag:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="replaceLog1" >
        REPLACE_LOG1 = #replaceLog1:VARCHAR #
      </isNotNull>
      <isNotNull prepend="," property="replaceLog2" >
        REPLACE_LOG2 = #replaceLog2:VARCHAR #
      </isNotNull>
      <isNotNull prepend="," property="replaceUser" >
        REPLACE_USER = #replaceUser:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="replaceTime" >
        REPLACE_TIME = #replaceTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="icreate" >
        ICREATE = #icreate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dcreate" >
        DCREATE = #dcreate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="loanaccount" >
        LOANACCOUNT = #loanaccount:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="compareFlag" >
        COMPARE_FLAG = #compareFlag:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="compareBatchNo" >
        COMPARE_BATCH_NO = #compareBatchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="compareTime" >
        COMPARE_TIME = #compareTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="compareUser" >
        COMPARE_USER = #compareUser:VARCHAR#
      </isNotNull>
    </dynamic>
    where OID = #oid:DECIMAL#
  </update>

  <!-- mantis：FIR0624，處理人員：BJ085，需求單編號：FIR0624 住火_臺銀續保作業_臺銀FD檔查詢作業 start -->  
  <resultMap id="aps057ResultMap" class="com.tlg.aps.vo.Aps057ResultVo" >
    <result column="OID" property="oid" jdbcType="DECIMAL" />
    <result column="BATCH_NO" property="batchNo" jdbcType="VARCHAR" />
    <result column="FD_TYPE" property="fdType" jdbcType="VARCHAR" />
    <result column="ORDERSEQ" property="orderseq" jdbcType="VARCHAR" />
    <result column="FD_DATE" property="fdDate" jdbcType="TIMESTAMP" />
    <result column="STARTDATE_F" property="startdateF" jdbcType="TIMESTAMP" />
    <result column="STARTDATE_Q" property="startdateQ" jdbcType="TIMESTAMP" />
    <result column="ACCOUNT_NO" property="accountNo" jdbcType="VARCHAR" />
    <result column="BRANCH_NO" property="branchNo" jdbcType="VARCHAR" />
    <result column="BANK_SALES" property="bankSales" jdbcType="VARCHAR" />
    <result column="IS_APPROVAL" property="isApproval" jdbcType="VARCHAR" />
    <result column="IS_AUTO_RENEW" property="isAutoRenew" jdbcType="VARCHAR" />
    <result column="STARTDATE_A" property="startdateA" jdbcType="TIMESTAMP" />
    <result column="AMOUNT_F" property="amountF" jdbcType="DECIMAL" />
    <result column="AMOUNT_Q" property="amountQ" jdbcType="DECIMAL" />
    <result column="AMOUNT_A" property="amountA" jdbcType="DECIMAL" />
    <result column="COMPARE_RESULT" property="compareResult" jdbcType="VARCHAR " />
    <result column="REPLACE_FLAG" property="replaceFlag" jdbcType="VARCHAR" />
    <result column="REPLACE_LOG1" property="replaceLog1" jdbcType="VARCHAR " />
    <result column="REPLACE_LOG2" property="replaceLog2" jdbcType="VARCHAR " />
    <result column="REPLACE_USER" property="replaceUser" jdbcType="VARCHAR" />
    <result column="REPLACE_TIME" property="replaceTime" jdbcType="TIMESTAMP" />
    <result column="ICREATE" property="icreate" jdbcType="VARCHAR" />
    <result column="DCREATE" property="dcreate" jdbcType="TIMESTAMP" />
    <result column="LOANACCOUNT" property="loanaccount" jdbcType="VARCHAR" />
    <result column="COMPARE_FLAG" property="compareFlag" jdbcType="VARCHAR" />
    <result column="COMPARE_BATCH_NO" property="compareBatchNo" jdbcType="VARCHAR" />
    <result column="COMPARE_TIME" property="compareTime" jdbcType="TIMESTAMP" />
    <result column="COMPARE_USER" property="compareUser" jdbcType="VARCHAR" />
    <result column="POLICYNO" property="policyno" jdbcType="VARCHAR" />
  </resultMap>
  

	<select id="selectForAps057" resultMap="aps057ResultMap" parameterClass="java.util.Map">
		<include refid="Utils.sql1" />
		SELECT FD.*, PM.POLICYNO FROM FIR_AGT_BOT_FD FD
		LEFT JOIN PRPCMAIN PM ON FD.ORDERSEQ = PM.ORDERSEQ
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="startDate">
				FD.DCREATE <![CDATA[>=]]> to_date(#startDate# , 'yyyy/mm/dd hh24:mi:ss')
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="endDate">
				FD.DCREATE <![CDATA[<=]]> to_date(#endDate# , 'yyyy/mm/dd hh24:mi:ss')
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="batchNo">
				FD.BATCH_NO = #batchNo#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="orderseq">
				FD.ORDERSEQ = #orderseq#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="fdType">
				FD.FD_TYPE = #fdType#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="compareFlag">
				FD.COMPARE_FLAG = #compareFlag#
			</isNotEmpty>
		</dynamic>
		<include refid="Utils.sql2" />
	</select>
	
	<select id="countForAps057" resultClass="java.lang.Integer" parameterClass="java.util.Map">
		SELECT COUNT(*) FROM FIR_AGT_BOT_FD FD
		LEFT JOIN PRPCMAIN PM ON FD.ORDERSEQ = PM.ORDERSEQ
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="startDate">
				FD.DCREATE <![CDATA[>=]]> to_date(#startDate# , 'yyyy/mm/dd hh24:mi:ss')
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="endDate">
				FD.DCREATE <![CDATA[<=]]> to_date(#endDate# , 'yyyy/mm/dd hh24:mi:ss')
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="batchNo">
				FD.BATCH_NO = #batchNo#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="orderseq">
				FD.ORDERSEQ = #orderseq#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="fdType">
				FD.FD_TYPE = #fdType#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="compareFlag">
				FD.COMPARE_FLAG = #compareFlag#
			</isNotEmpty>
		</dynamic>
	</select>
	<!-- mantis：FIR0624，處理人員：BJ085，需求單編號：FIR0624 住火_臺銀續保作業_臺銀FD檔查詢作業 end -->
  
</sqlMap>