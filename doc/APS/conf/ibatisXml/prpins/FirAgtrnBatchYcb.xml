<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<!-- mantis：FIR0668，處理人員：DP0706，需求單編號：FIR0668_住火_元大續保作業_續件資料處理作業 -->
<!-- FIR0690、FIR0693	 CF048住火	住火_APS_元大續保作業Ph2_N+1_產生保單副本&N+1產生出單明細檔-->
<sqlMap namespace="FirAgtrnBatchYcb" >
  <resultMap id="BaseResultMap" class="com.tlg.prpins.entity.FirAgtrnBatchYcb" >
    <result column="BATCH_NO" property="batchNo" jdbcType="VARCHAR" />
    <result column="RN_USER" property="rnUser" jdbcType="VARCHAR" />
    <result column="RN_TIME" property="rnTime" jdbcType="TIMESTAMP" />
    <result column="RN_MEMO" property="rnMemo" jdbcType="OTHER" />
    <result column="RN_BNO" property="rnBno" jdbcType="VARCHAR" />
    <result column="EN_USER" property="enUser" jdbcType="VARCHAR" />
    <result column="EN_TIME" property="enTime" jdbcType="TIMESTAMP" />
    <result column="EN_MEMO" property="enMemo" jdbcType="OTHER" />
    <result column="EN_BNO" property="enBno" jdbcType="VARCHAR" />
    <result column="ICREATE" property="icreate" jdbcType="VARCHAR" />
    <result column="DCREATE" property="dcreate" jdbcType="TIMESTAMP" />
    <result column="IUPDATE" property="iupdate" jdbcType="VARCHAR" />
    <result column="DUPDATE" property="dupdate" jdbcType="TIMESTAMP" />
    <result column="PO_USER" property="poUser" jdbcType="VARCHAR" />
    <result column="PO_TIME" property="poTime" jdbcType="TIMESTAMP" />
    <result column="PO_MEMO" property="poMemo" jdbcType="OTHER" />
    <result column="PO_BNO" property="poBno" jdbcType="VARCHAR" />
    <result column="CO_USER" property="coUser" jdbcType="VARCHAR" />
    <result column="CO_TIME" property="coTime" jdbcType="TIMESTAMP" />
    <result column="CO_MEMO" property="coMemo" jdbcType="OTHER" />
    <result column="CO_BNO" property="coBno" jdbcType="VARCHAR" />
  </resultMap>
  
  <select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map">
	<include refid="Utils.sql1" />
		SELECT * FROM <include refid="Utils.prpinsSchema"/>FIR_AGTRN_BATCH_YCB
	<dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="batchNo">
			BATCH_NO = #batchNo#
		</isNotEmpty>
	</dynamic>
	<include refid="Utils.sql2" />
  </select>
	
  <select id="selectByParams" resultMap="BaseResultMap" parameterClass="java.util.Map">
	SELECT * FROM <include refid="Utils.prpinsSchema"/>FIR_AGTRN_BATCH_YCB
	<dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="batchNo">
			BATCH_NO = #batchNo#
		</isNotEmpty>
	</dynamic>
  </select>
  
  <select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
	SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema"/>FIR_AGTRN_BATCH_YCB
	<dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="batchNo">
			BATCH_NO = #batchNo#
		</isNotEmpty>
	</dynamic>
  </select>
  
  <select id="countByUK" resultClass="java.lang.Integer" parameterClass="com.tlg.prpins.entity.FirAgtrnBatchFb" >
	SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema"/>FIR_AGTRN_BATCH_YCB
	where BATCH_NO = #batchNo:VARCHAR#
  </select>
  
  <delete id="delete" parameterClass="com.tlg.prpins.entity.FirAgtrnBatchYcb" >
    delete from FIR_AGTRN_BATCH_YCB
    where BATCH_NO = #batchNo:VARCHAR#
  </delete>
  
  <insert id="insert" parameterClass="com.tlg.prpins.entity.FirAgtrnBatchYcb" >
    insert into FIR_AGTRN_BATCH_YCB (BATCH_NO, RN_USER, RN_TIME, RN_MEMO, RN_BNO, EN_USER, EN_TIME,
      EN_MEMO, EN_BNO, ICREATE, DCREATE, IUPDATE, DUPDATE, PO_USER, PO_TIME, PO_MEMO, PO_BNO, CO_USER, CO_TIME, CO_MEMO, CO_BNO)
    values (#batchNo:VARCHAR#, #rnUser:VARCHAR#, #rnTime:TIMESTAMP#, #rnMemo:OTHER#,
      #rnBno:VARCHAR#, #enUser:VARCHAR#, #enTime:TIMESTAMP#, #enMemo:OTHER#, #enBno:VARCHAR#,
      #icreate:VARCHAR#, #dcreate:TIMESTAMP#, #iupdate:VARCHAR#, #dupdate:TIMESTAMP# 
      , #poUser:VARCHAR#, #poTime:TIMESTAMP#, #poMemo:OTHER#, #poBno:VARCHAR#
      , #coUser:VARCHAR#, #coTime:TIMESTAMP#, #coMemo:OTHER#, #coBno:VARCHAR# )
  </insert>
  
  <update id="update" parameterClass="com.tlg.prpins.entity.FirAgtrnBatchYcb" >
    update FIR_AGTRN_BATCH_YCB
    <dynamic prepend="set" >
      <isNotNull prepend="," property="rnUser" >
        RN_USER = #rnUser:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="rnTime" >
        RN_TIME = #rnTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="rnMemo" >
        RN_MEMO = #rnMemo:OTHER#
      </isNotNull>
      <isNotNull prepend="," property="rnBno" >
        RN_BNO = #rnBno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="enUser" >
        EN_USER = #enUser:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="enTime" >
        EN_TIME = #enTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="enMemo" >
        EN_MEMO = #enMemo:OTHER#
      </isNotNull>
      <isNotNull prepend="," property="enBno" >
        EN_BNO = #enBno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="icreate" >
        ICREATE = #icreate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dcreate" >
        DCREATE = #dcreate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="iupdate" >
        IUPDATE = #iupdate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dupdate" >
        DUPDATE = #dupdate:TIMESTAMP#
      </isNotNull>     
      <isNotNull prepend="," property="poUser" >
        PO_USER = #poUser:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="poTime" >
        PO_TIME = #poTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="poMemo" >
        PO_MEMO = #poMemo:OTHER#
      </isNotNull>
      <isNotNull prepend="," property="poBno" >
        PO_BNO = #poBno:VARCHAR#
      </isNotNull>      
      <isNotNull prepend="," property="coUser" >
        CO_USER = #coUser:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="coTime" >
        CO_TIME = #coTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="coMemo" >
        CO_MEMO = #coMemo:OTHER#
      </isNotNull>
      <isNotNull prepend="," property="coBno" >
        CO_BNO = #coBno:VARCHAR#
      </isNotNull>
      </dynamic>
    where BATCH_NO = #batchNo:VARCHAR#
  </update>
</sqlMap>