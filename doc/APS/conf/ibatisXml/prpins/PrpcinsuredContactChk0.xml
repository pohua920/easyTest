<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="PrpcinsuredContactChk0" >
  <resultMap id="BaseResultMap" class="com.tlg.prpins.entity.PrpcinsuredContactChk0" >
    <result column="NO" property="no" jdbcType="DECIMAL" />
    <result column="INPUTDATE" property="inputdate" jdbcType="TIMESTAMP" />
    <result column="COM" property="com" jdbcType="VARCHAR" />
    <result column="APPCODE" property="appcode" jdbcType="VARCHAR" />
    <result column="BUSINESSNO" property="businessno" jdbcType="VARCHAR" />
    <result column="INSUREDFLAG" property="insuredflag" jdbcType="VARCHAR" />
    <result column="INSUREDNAME" property="insuredname" jdbcType="VARCHAR" />
    <result column="IDENTIFYNUMBER" property="identifynumber" jdbcType="VARCHAR" />
    <result column="A_TYPE" property="aType" jdbcType="VARCHAR" />
    <result column="A1" property="a1" jdbcType="VARCHAR" />
    <result column="M1" property="m1" jdbcType="VARCHAR" />
    <result column="P1" property="p1" jdbcType="VARCHAR" />
    <result column="E1" property="e1" jdbcType="VARCHAR" />
    <result column="CONTACTTYPE" property="contacttype" jdbcType="VARCHAR" />
    <result column="CONTACTCODE" property="contactcode" jdbcType="VARCHAR" />
    <result column="CONTACTNAME" property="contactname" jdbcType="VARCHAR" />
    <result column="A2" property="a2" jdbcType="VARCHAR" />
    <result column="M2" property="m2" jdbcType="VARCHAR" />
    <result column="P2" property="p2" jdbcType="VARCHAR" />
    <result column="E2" property="e2" jdbcType="VARCHAR" />
    <result column="C1" property="c1" jdbcType="CHAR" />
    <result column="C2" property="c2" jdbcType="CHAR" />
    <result column="C3" property="c3" jdbcType="CHAR" />
    <result column="C4" property="c4" jdbcType="CHAR" />
    <result column="IS_PASS" property="isPass" jdbcType="CHAR" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="ICREATE" property="icreate" jdbcType="VARCHAR" />
    <result column="DCREATE" property="dcreate" jdbcType="TIMESTAMP" />
    <result column="IUPDATE" property="iupdate" jdbcType="VARCHAR" />
    <result column="DUPDATE" property="dupdate" jdbcType="TIMESTAMP" />
  </resultMap>
  
  <!--mantis：OTH0184，處理人員：DP0706，需求單編號：APS要被保人通訊地址比對作業增加資料來源(XCHG) START-->
  <resultMap id="PrpdCompany_ResultMap" class="com.tlg.sales.entity.PrpdCompany" >
    <result column="COMCODE" jdbcType="VARCHAR" property="comcode" />
    <result column="COMCNAME" jdbcType="VARCHAR" property="comcname" />
    <result column="COMENAME" jdbcType="VARCHAR" property="comename" />
    <result column="ADDRESSCNAME" jdbcType="VARCHAR" property="addresscname" />
    <result column="ADDRESSENAME" jdbcType="VARCHAR" property="addressename" />
    <result column="POSTCODE" jdbcType="VARCHAR" property="postcode" />
    <result column="PHONENUMBER" jdbcType="VARCHAR" property="phonenumber" />
    <result column="TAXNUMBER" jdbcType="VARCHAR" property="taxnumber" />
    <result column="FAXNUMBER" jdbcType="VARCHAR" property="faxnumber" />
    <result column="UPPERCOMCODE" jdbcType="VARCHAR" property="uppercomcode" />
    <result column="INSURERNAME" jdbcType="VARCHAR" property="insurername" />
    <result column="COMATTRIBUTE" jdbcType="VARCHAR" property="comattribute" />
    <result column="COMTYPE" jdbcType="VARCHAR" property="comtype" />
    <result column="COMLEVEL" jdbcType="VARCHAR" property="comlevel" />
    <result column="MANAGER" jdbcType="VARCHAR" property="manager" />
    <result column="ACCOUNTLEADER" jdbcType="VARCHAR" property="accountleader" />
    <result column="CASHIER" jdbcType="VARCHAR" property="cashier" />
    <result column="ACCOUNTANT" jdbcType="VARCHAR" property="accountant" />
    <result column="REMARK" jdbcType="VARCHAR" property="remark" />
    <result column="NEWCOMCODE" jdbcType="VARCHAR" property="newcomcode" />
    <result column="VALIDSTATUS" jdbcType="VARCHAR" property="validstatus" />
    <result column="ACNTUNIT" jdbcType="VARCHAR" property="acntunit" />
    <result column="ARTICLECODE" jdbcType="VARCHAR" property="articlecode" />
    <result column="ACCCODE" jdbcType="VARCHAR" property="acccode" />
    <result column="CENTERFLAG" jdbcType="VARCHAR" property="centerflag" />
    <result column="OUTERPAYCODE" jdbcType="VARCHAR" property="outerpaycode" />
    <result column="INNERPAYCODE" jdbcType="VARCHAR" property="innerpaycode" />
    <result column="FLAG" jdbcType="VARCHAR" property="flag" />
    <result column="WEBADDRESS" jdbcType="VARCHAR" property="webaddress" />
    <result column="SERVICEPHONE" jdbcType="VARCHAR" property="servicephone" />
    <result column="REPORTPHONE" jdbcType="VARCHAR" property="reportphone" />
    <result column="AGENTCODE" jdbcType="VARCHAR" property="agentcode" />
    <result column="AGREEMENTNO" jdbcType="VARCHAR" property="agreementno" />
    <result column="SYSAREACODE" jdbcType="VARCHAR" property="sysareacode" />
    <result column="COMBVISITRATE" jdbcType="DECIMAL" property="combvisitrate" />
    <result column="PRINTCOMNAME" jdbcType="VARCHAR" property="printcomname" />
    <result column="PRINTADDRESS" jdbcType="VARCHAR" property="printaddress" />
    <result column="PRINGPOSTCODE" jdbcType="VARCHAR" property="pringpostcode" />
    <result column="UPPERCLAIMCOMCODE" jdbcType="VARCHAR" property="upperclaimcomcode" />
    <result column="SAPCOMCODE" jdbcType="VARCHAR" property="sapcomcode" />
    <result column="COSTCENTERCODE" jdbcType="VARCHAR" property="costcentercode" />
    <result column="GROUPNATURE" jdbcType="VARCHAR" property="groupnature" />
    <result column="GROUPLEVEL" jdbcType="VARCHAR" property="grouplevel" />
    <result column="SALESCHANNELCODE" jdbcType="VARCHAR" property="saleschannelcode" />
    <result column="GROUPNATUREDETAIL" jdbcType="VARCHAR" property="groupnaturedetail" />
    <result column="TAXIDENNO" jdbcType="VARCHAR" property="taxidenno" />
  </resultMap>
  <!--mantis：OTH0184，處理人員：DP0706，需求單編號：APS要被保人通訊地址比對作業增加資料來源(XCHG)END-->
  <sql id="Base_Column_List">
   NO, INPUTDATE, COM, APPCODE, BUSINESSNO, INSUREDFLAG, INSUREDNAME, IDENTIFYNUMBER,
   A_TYPE, A1, M1, P1, E1, CONTACTTYPE, CONTACTCODE, CONTACTNAME, A2, M2, P2, E2, C1, C2, C3, C4,
   IS_PASS, REMARK, ICREATE, DCREATE, IUPDATE, DUPDATE
  </sql>

  <select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map">
		<include refid="Utils.sql1" />
			SELECT NO, INPUTDATE, BUSINESSNO, INSUREDFLAG, INSUREDNAME, IDENTIFYNUMBER,
   			A_TYPE, A1, M1, P1, E1, CONTACTTYPE, CONTACTCODE, CONTACTNAME, A2, M2, P2, E2, C1, C2, C3, C4,
   			IS_PASS, REMARK, ICREATE, DCREATE, IUPDATE, DUPDATE,
    		(SELECT COMCODE||COMCNAME FROM SALES.PRPDCOMPANY WHERE COMCODE=COM AND VALIDSTATUS='1') as COM,
    		(SELECT CODECNAME FROM CCICDMS.PRPDNEWCODE WHERE CODETYPE='AppCode' AND CODECODE=APPCODE) AS APPCODE
 			FROM <include refid="Utils.prpinsSchema"/>PRPCINSURED_CONTACT_CHK0
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="com">
				COM = #com#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="isPass">
				IS_PASS = #isPass#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="businessno">
				BUSINESSNO = #businessno#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="appcode">
				APPCODE = #appcode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="identifynumber">
				IDENTIFYNUMBER = #identifynumber#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="insuredname">
				INSUREDNAME = #insuredname#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="startCreateDate">
				INPUTDATE <![CDATA[>=]]> to_date(#startCreateDate# , 'yyyy/mm/dd hh24:mi:ss')
		  	</isNotEmpty>
		  	<isNotEmpty prepend="AND" property="endCreateDate">
				INPUTDATE <![CDATA[<=]]> to_date(#endCreateDate# , 'yyyy/mm/dd hh24:mi:ss')
		  	</isNotEmpty>
		</dynamic>
		<include refid="Utils.sql2" />
  </select>
  
  <select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
		SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema"/>PRPCINSURED_CONTACT_CHK0
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="com">
				COM = #com#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="isPass">
				IS_PASS = #isPass#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="businessno">
				BUSINESSNO = #businessno#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="appcode">
				APPCODE = #appcode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="identifynumber">
				IDENTIFYNUMBER = #identifynumber#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="insuredname">
				INSUREDNAME = #insuredname#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="startCreateDate">
				INPUTDATE <![CDATA[>=]]> to_date(#startCreateDate# , 'yyyy/mm/dd hh24:mi:ss')
		  	</isNotEmpty>
		  	<isNotEmpty prepend="AND" property="endCreateDate">
				INPUTDATE <![CDATA[<=]]> to_date(#endCreateDate# , 'yyyy/mm/dd hh24:mi:ss')
		  	</isNotEmpty>
		</dynamic>
  </select>
  
  <select id="selectByUK" resultClass="com.tlg.prpins.entity.PrpcinsuredContactChk0" parameterClass="java.util.Map" >
		SELECT NO, INPUTDATE, BUSINESSNO, INSUREDFLAG, INSUREDNAME, IDENTIFYNUMBER,
   		A_TYPE as aType, A1, M1, P1, E1, CONTACTTYPE, CONTACTCODE, CONTACTNAME, A2, M2, P2, E2, C1, C2, C3, C4,
   		IS_PASS as isPass, REMARK, ICREATE, DCREATE, IUPDATE, DUPDATE,
    	(SELECT COMCODE||COMCNAME FROM SALES.PRPDCOMPANY WHERE COMCODE=COM AND VALIDSTATUS='1') as COM,
    	(SELECT CODECNAME FROM CCICDMS.PRPDNEWCODE WHERE CODETYPE='AppCode' AND CODECODE=APPCODE) AS APPCODE 
    	FROM <include refid="Utils.prpinsSchema"/>PRPCINSURED_CONTACT_CHK0
		where NO = #no:DECIMAL#
  </select>
  
  <select id="countByUK" resultClass="java.lang.Integer" parameterClass="com.tlg.prpins.entity.PrpcinsuredContactChk0" >
		SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema"/>PRPCINSURED_CONTACT_CHK0
		where NO = #no:DECIMAL#
  </select>
  
  <select id="selectByParams" resultMap="BaseResultMap" parameterClass="java.util.Map">
		SELECT * FROM <include refid="Utils.prpinsSchema"/>PRPCINSURED_CONTACT_CHK0
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="com">
				COM = #com#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="isPass">
				IS_PASS = #isPass#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="businessno">
				BUSINESSNO = #businessno#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="appcode">
				APPCODE = #appcode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="identifynumber">
				IDENTIFYNUMBER = #identifynumber#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="insuredname">
				INSUREDNAME = #insuredname#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="inputdate">
				INPUTDATE = #inputdate#
			</isNotEmpty>
		</dynamic>
  </select>
  
  <delete id="delete" parameterClass="com.tlg.prpins.entity.PrpcinsuredContactChk0" >
    delete from <include refid="Utils.prpinsSchema"/>PRPCINSURED_CONTACT_CHK0
    where NO = #no:DECIMAL#
  </delete>
  
  <insert id="insert" parameterClass="com.tlg.prpins.entity.PrpcinsuredContactChk0" >
    insert into <include refid="Utils.prpinsSchema"/>PRPCINSURED_CONTACT_CHK0 
      (NO, INPUTDATE, COM, APPCODE, BUSINESSNO, INSUREDFLAG,
      INSUREDNAME, IDENTIFYNUMBER, A_TYPE, A1, M1, P1, E1, CONTACTTYPE, CONTACTCODE, CONTACTNAME,
      A2, M2, P2, E2, C1, C2, C3, C4, IS_PASS, REMARK, ICREATE, DCREATE, IUPDATE, DUPDATE)
    values (#no:DECIMAL#, #inputdate:TIMESTAMP#, #com:VARCHAR#, #appcode:VARCHAR#,
      #businessno:VARCHAR#, #insuredflag:VARCHAR#, #insuredname:VARCHAR#, #identifynumber:VARCHAR#,
      #aType:VARCHAR#, #a1:VARCHAR#, #m1:VARCHAR#, #p1:VARCHAR#, #e1:VARCHAR#,
      #contacttype:VARCHAR#, #contactcode:VARCHAR#, #contactname:VARCHAR#, #a2:VARCHAR#,
      #m2:VARCHAR#, #p2:VARCHAR#, #e2:VARCHAR#, #c1:CHAR#, #c2:CHAR#, #c3:CHAR#, #c4:CHAR#,
      #isPass:CHAR#, #remark:VARCHAR#, #icreate:VARCHAR#, #dcreate:TIMESTAMP#, #iupdate:VARCHAR#,
      #dupdate:TIMESTAMP#)
  </insert>
  
  <update id="update" parameterClass="com.tlg.prpins.entity.PrpcinsuredContactChk0" >
    update <include refid="Utils.prpinsSchema"/>PRPCINSURED_CONTACT_CHK0
    <dynamic prepend="set" >
      <isNotNull prepend="," property="inputdate" >
        INPUTDATE = #inputdate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="com" >
        COM = #com:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="appcode" >
        APPCODE = #appcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="businessno" >
        BUSINESSNO = #businessno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="insuredflag" >
        INSUREDFLAG = #insuredflag:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="insuredname" >
        INSUREDNAME = #insuredname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="identifynumber" >
        IDENTIFYNUMBER = #identifynumber:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="aType" >
        A_TYPE = #aType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="a1" >
        A1 = #a1:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="m1" >
        M1 = #m1:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="p1" >
        P1 = #p1:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="e1" >
        E1 = #e1:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="contacttype" >
        CONTACTTYPE = #contacttype:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="contactcode" >
        CONTACTCODE = #contactcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="contactname" >
        CONTACTNAME = #contactname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="a2" >
        A2 = #a2:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="m2" >
        M2 = #m2:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="p2" >
        P2 = #p2:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="e2" >
        E2 = #e2:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="c1" >
        C1 = #c1:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="c2" >
        C2 = #c2:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="c3" >
        C3 = #c3:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="c4" >
        C4 = #c4:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="isPass" >
        IS_PASS = #isPass:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="icreate" >
        ICREATE = #icreate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dcreate" >
        DCREATE = #dcreate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="iupdate" >
        IUPDATE = #iupdate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dupdate" >
        DUPDATE = #dupdate:TIMESTAMP#
      </isNotNull>
    </dynamic>
    where NO = #no:DECIMAL#
  </update>
  <!--mantis：OTH0184，處理人員：DP0706，需求單編號：APS要被保人通訊地址比對作業增加資料來源(XCHG)START-->
  <select id="queryCompanyInfo" resultMap="PrpdCompany_ResultMap" parameterClass="java.util.Map">
		
		select COMCODE, COMCNAME, COMENAME, ADDRESSCNAME, ADDRESSENAME, POSTCODE, PHONENUMBER,
	      TAXNUMBER, FAXNUMBER, UPPERCOMCODE, INSURERNAME, COMATTRIBUTE, COMTYPE, COMLEVEL, MANAGER,
	      ACCOUNTLEADER, CASHIER, ACCOUNTANT, REMARK, NEWCOMCODE, VALIDSTATUS, ACNTUNIT, ARTICLECODE,
	      ACCCODE, CENTERFLAG, OUTERPAYCODE, INNERPAYCODE, FLAG, WEBADDRESS, SERVICEPHONE, REPORTPHONE,
	      AGENTCODE, AGREEMENTNO, SYSAREACODE, COMBVISITRATE, PRINTCOMNAME, PRINTADDRESS, PRINGPOSTCODE,
	      UPPERCLAIMCOMCODE, SAPCOMCODE, COSTCENTERCODE, GROUPNATURE, GROUPLEVEL, SALESCHANNELCODE,
	      GROUPNATUREDETAIL, TAXIDENNO
	    from SALES.PRPDCOMPANY
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="comcode">
		        COMCODE = #comcode#
		    </isNotEmpty>
		    <isNotEmpty prepend="AND" property="validstatus">
		        VALIDSTATUS = #validstatus#
		    </isNotEmpty>
		</dynamic>
  </select>
  <!--mantis：OTH0184，處理人員：DP0706，需求單編號：APS要被保人通訊地址比對作業增加資料來源(XCHG)END-->
</sqlMap>