<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<!--  mantis：HAS0215，處理人員：CD094，需求單編號：HAS0215 TA雄獅回饋檔 -->
<sqlMap namespace="HasAgtLionCM" >
  <resultMap id="BaseResultMap" class="com.tlg.prpins.entity.HasAgtLionCM" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jan 02 11:21:22 CST 2024.
    -->
    <result column="OID" property="oid" jdbcType="DECIMAL" />
    <result column="BATCH_NO" property="batchNo" jdbcType="VARCHAR" />
    <result column="COMPANYNO" property="companyno" jdbcType="VARCHAR" />
    <result column="PECTYPE" property="pectype" jdbcType="VARCHAR" />
    <result column="RISKCODE" property="riskcode" jdbcType="VARCHAR" />
    <result column="AGENTORDERSEQ" property="agentorderseq" jdbcType="VARCHAR" />
    <result column="POLICYNO" property="policyno" jdbcType="VARCHAR" />
    <result column="ENDORSENO" property="endorseno" jdbcType="VARCHAR" />
    <result column="OPERATEDATE" property="operatedate" jdbcType="VARCHAR" />
    <result column="STARTDATE" property="startdate" jdbcType="VARCHAR" />
    <result column="ENDDATE" property="enddate" jdbcType="VARCHAR" />
    <result column="APPLINAME" property="appliname" jdbcType="VARCHAR" />
    <result column="APPLICODE" property="applicode" jdbcType="VARCHAR" />
    <result column="INSUREDNAME" property="insuredname" jdbcType="VARCHAR" />
    <result column="INSUREDCODE" property="insuredcode" jdbcType="VARCHAR" />
    <result column="SUBBUSINESSNATURE" property="subbusinessnature" jdbcType="VARCHAR" />
    <result column="SUBBUSINESSNATURENAME" property="subbusinessnaturename" jdbcType="VARCHAR" />
    <result column="HANDLER1CODE" property="handler1code" jdbcType="VARCHAR" />
    <result column="HANDLER1NAME" property="handler1name" jdbcType="VARCHAR" />
    <result column="SUMPREMIUM" property="sumpremium" jdbcType="DECIMAL" />
    <result column="RATE" property="rate" jdbcType="DECIMAL" />
    <result column="SUMDISCOUNT" property="sumdiscount" jdbcType="DECIMAL" />
    <result column="FYCFEE" property="fycfee" jdbcType="DECIMAL" />
    <result column="SERVICEFEE" property="servicefee" jdbcType="DECIMAL" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="INFC15" property="infc15" jdbcType="VARCHAR" />
    <result column="FYCMONTH" property="fycmonth" jdbcType="VARCHAR" />
    <result column="CREDITCARDNO" property="creditcardno" jdbcType="VARCHAR" />
  </resultMap>
  
  <select id="selectForGenFile" parameterClass="java.util.Map" resultMap="BaseResultMap">
  
  	select CM.* from HAS_AGT_LION_CM CM
	inner join HAS_AGT_BATCH_DTL DTL 
	on CM.BATCH_NO = DTL.BATCH_NO AND CM.REMARK = DTL.ORDERSEQ AND CM.POLICYNO=DTL.CORE_NO
	where CM.BATCH_NO = #batchNo# AND DTL.ORDERSEQ_STATUS IN ('01','02')
	order by CM.AGENTORDERSEQ, CM.RISKCODE
	
  </select>
  <select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select *
    from <include refid="Utils.prpinsSchema"/>HAS_AGT_LION_CM
    <dynamic prepend="WHERE">
    	<isNotEmpty prepend="AND" property="oid">
		OID = #oid:DECIMAL#
		</isNotEmpty>
      <isNotNull prepend="AND" property="batchNo">
        BATCH_NO = #batchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="riskcode">
        RISKCODE = #riskcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="policyno">
        POLICYNO = #policyno:VARCHAR#
      </isNotNull>
    </dynamic>
  </select>
  
   <select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map" >
  
    <include refid="Utils.sql1" />
    select * from <include refid="Utils.prpinsSchema"/>HAS_AGT_LION_CM
    <dynamic prepend="WHERE" >
      <isNotEmpty prepend="AND" property="oid">
		OID = #oid:DECIMAL#
		</isNotEmpty>
      <isNotEmpty prepend="AND" property="batchNo">
        BATCH_NO = #batchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="riskcode">
        RISKCODE = #riskcode:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="policyno">
        POLICYNO = #policyno:VARCHAR#
      </isNotEmpty>
      <include refid="Utils.sql2" />
    </dynamic>
  </select>
  
   <select id="selectByUK" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select *
    from <include refid="Utils.prpinsSchema"/>HAS_AGT_LION_CM
    where OID = #oid:DECIMAL#
  </select>
  
    <select id="count" parameterClass="java.util.Map" resultClass="java.lang.Integer">
    select count(*) from <include refid="Utils.prpinsSchema"/>HAS_AGT_LION_CM
    <dynamic prepend="WHERE">
      <isNotEmpty prepend="AND" property="batchNo">
        BATCH_NO = #batchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="riskcode">
        RISKCODE = #riskcode:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="policyno">
        POLICYNO = #policyno:VARCHAR#
      </isNotEmpty>
    
      <isNotEmpty prepend="AND" property="endorseno">
        ENDORSENO = #endorseno:VARCHAR#
      </isNotEmpty>
      
    </dynamic>
  </select>
  
  
  <insert id="insert" parameterClass="com.tlg.prpins.entity.HasAgtLionCM" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jan 02 11:21:22 CST 2024.
    -->
    insert into HAS_AGT_LION_CM (OID, BATCH_NO, COMPANYNO, PECTYPE, RISKCODE, AGENTORDERSEQ,
      POLICYNO, ENDORSENO, OPERATEDATE, STARTDATE, ENDDATE, APPLINAME, APPLICODE, INSUREDNAME,
      INSUREDCODE, SUBBUSINESSNATURE, SUBBUSINESSNATURENAME, HANDLER1CODE, HANDLER1NAME, SUMPREMIUM,
      RATE, SUMDISCOUNT, FYCFEE, SERVICEFEE, REMARK, INFC15, FYCMONTH, CREDITCARDNO)
    values (#oid:DECIMAL#, #batchNo:VARCHAR#, #companyno:VARCHAR#, #pectype:VARCHAR#,
      #riskcode:VARCHAR#, #agentorderseq:VARCHAR#, #policyno:VARCHAR#, #endorseno:VARCHAR#,
      #operatedate:VARCHAR#, #startdate:VARCHAR#, #enddate:VARCHAR#, #appliname:VARCHAR#,
      #applicode:VARCHAR#, #insuredname:VARCHAR#, #insuredcode:VARCHAR#,
      #subbusinessnature:VARCHAR#, #subbusinessnaturename:VARCHAR#, #handler1code:VARCHAR#,
      #handler1name:VARCHAR#, #sumpremium:DECIMAL#, #rate:DECIMAL#, #sumdiscount:DECIMAL#,
      #fycfee:DECIMAL#, #servicefee:DECIMAL#, #remark:VARCHAR#, #infc15:VARCHAR#,
      #fycmonth:VARCHAR#, #creditcardno:VARCHAR#)
  </insert>
  
  <update id="update" parameterClass="com.tlg.prpins.entity.HasAgtLionCM" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jan 02 11:21:22 CST 2024.
    -->
    update HAS_AGT_LION_CM
    <dynamic prepend="set" >
      <isNotNull prepend="," property="batchNo" >
        BATCH_NO = #batchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="companyno" >
        COMPANYNO = #companyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="pectype" >
        PECTYPE = #pectype:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="riskcode" >
        RISKCODE = #riskcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="agentorderseq" >
        AGENTORDERSEQ = #agentorderseq:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="policyno" >
        POLICYNO = #policyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="endorseno" >
        ENDORSENO = #endorseno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="operatedate" >
        OPERATEDATE = #operatedate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="startdate" >
        STARTDATE = #startdate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="enddate" >
        ENDDATE = #enddate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="appliname" >
        APPLINAME = #appliname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="applicode" >
        APPLICODE = #applicode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="insuredname" >
        INSUREDNAME = #insuredname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="insuredcode" >
        INSUREDCODE = #insuredcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="subbusinessnature" >
        SUBBUSINESSNATURE = #subbusinessnature:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="subbusinessnaturename" >
        SUBBUSINESSNATURENAME = #subbusinessnaturename:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="handler1code" >
        HANDLER1CODE = #handler1code:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="handler1name" >
        HANDLER1NAME = #handler1name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sumpremium" >
        SUMPREMIUM = #sumpremium:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="rate" >
        RATE = #rate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="sumdiscount" >
        SUMDISCOUNT = #sumdiscount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="fycfee" >
        FYCFEE = #fycfee:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="servicefee" >
        SERVICEFEE = #servicefee:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="infc15" >
        INFC15 = #infc15:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fycmonth" >
        FYCMONTH = #fycmonth:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="creditcardno" >
        CREDITCARDNO = #creditcardno:VARCHAR#
      </isNotNull>
    </dynamic>
    where OID = #oid:DECIMAL#
  </update>
  
</sqlMap>