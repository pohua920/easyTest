<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<!-- mantis：FIR0680，處理人員：DP0714，住火_元大回饋檔產生排程規格 -->
<sqlMap namespace="FirAgtYcb02">
  <resultMap class="com.tlg.prpins.entity.FirAgtYcb02" id="BaseResultMap">
    <result column="OID" jdbcType="DECIMAL" property="oid" />
    <result column="BATCH_NO" jdbcType="VARCHAR" property="batchNo" />
    <result column="RISKCODE" jdbcType="VARCHAR" property="riskCode" />
    <result column="POLICYNO" jdbcType="VARCHAR" property="policyNo" />
    <result column="ORDERSEQ" jdbcType="VARCHAR" property="orderSeq" />
    <result column="ENDORSENO" jdbcType="VARCHAR" property="endorseNo" />
    <result column="RISKCODE_YCB" jdbcType="VARCHAR" property="riskCodeYcb" />
    <result column="KINDCODE_YCB" jdbcType="VARCHAR" property="kindCodeYcb" />
    <result column="DATA_DATE" jdbcType="TIMESTAMP" property="dataDate" />
    <result column="STARTDATE" jdbcType="TIMESTAMP" property="startDate" />
    <result column="ENDDATE" jdbcType="TIMESTAMP" property="endDate" />
    <result column="UNDERWRITEENDDATE" jdbcType="TIMESTAMP" property="underWriteEndDate" />
    <result column="ORDER_TYPE" jdbcType="VARCHAR" property="orderType" />
    <result column="POLICY_STATUS" jdbcType="VARCHAR" property="policyStatus" />
    <result column="ENDORSETEXT" jdbcType="VARCHAR" property="endorseText" />
    <result column="IS_RENEW" jdbcType="VARCHAR" property="isRenew" />
    <result column="APPLY_NAME" jdbcType="VARCHAR" property="applyName" />
    <result column="APPLY_ID" jdbcType="VARCHAR" property="applyId" />
    <result column="APPLY_POSTCODE" jdbcType="VARCHAR" property="applyPostcode" />
    <result column="APPLY_ADDR" jdbcType="VARCHAR" property="applyAddr" />
    <result column="INSURED_NAME" jdbcType="VARCHAR" property="insuredName" />
    <result column="INSURED_ID" jdbcType="VARCHAR" property="insuredId" />
    <result column="INSURED_BIRTHDAY" jdbcType="TIMESTAMP" property="insuredBirthday" />
    <result column="INSURED_AGE" jdbcType="VARCHAR" property="insuredAge" />
    <result column="PAY_TYPE" jdbcType="VARCHAR" property="payType" />
    <result column="PREMIUM" jdbcType="DECIMAL" property="premium" />
    <result column="AMOUNT" jdbcType="DECIMAL" property="amount" />
    <result column="COMM_RATE" jdbcType="DECIMAL" property="commRate" />
    <result column="COMMISSION" jdbcType="DECIMAL" property="commission" />
    <result column="SERVICE_CHARGE" jdbcType="DECIMAL" property="serviceCharge" />
    <result column="SALES_SOURCE" jdbcType="VARCHAR" property="salesSource" />
    <result column="SALES_BRANCH" jdbcType="VARCHAR" property="salesBranch" />
    <result column="SALES_ID" jdbcType="VARCHAR" property="salesId" />
    <result column="SALES_NO" jdbcType="VARCHAR" property="salesNo" />
    <result column="IS_AUTO_RENEW" jdbcType="VARCHAR" property="isAutoRenew" />
    <result column="AMOUNT_CHECK" jdbcType="VARCHAR" property="amountCheck" />
    <result column="LICENSE_PLATE" jdbcType="VARCHAR" property="licensePlate" />
    <result column="OLD_POLICYNO" jdbcType="VARCHAR" property="oldPolicyNo" />
    <result column="OLD_ENDDATE" jdbcType="TIMESTAMP" property="oldEndDate" />
    <result column="PROJ_NO" jdbcType="VARCHAR" property="projNo" />
    <result column="PROJ_NAME" jdbcType="VARCHAR" property="projName" />
    <result column="ACCEPT_WAY" jdbcType="VARCHAR" property="acceptWay" />
    <result column="STARTTIME" jdbcType="VARCHAR" property="startTime" />
    <result column="ENDTIME" jdbcType="VARCHAR" property="endTime" />
    <result column="ADDRESS" jdbcType="VARCHAR" property="address" />
    <result column="PHONENUMBER" jdbcType="VARCHAR" property="phoneNumber" />
    <result column="DELETE_FLAG" jdbcType="VARCHAR" property="deleteFlag" />
    <result column="ICREATE" jdbcType="VARCHAR" property="icreate" />
    <result column="DCREATE" jdbcType="TIMESTAMP" property="dcreate" />
    <result column="IUPDATE" jdbcType="VARCHAR" property="iupdate" />
    <result column="DUPDATE" jdbcType="TIMESTAMP" property="dupdate" />
  </resultMap>

  <select id="selectForGenFile" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select ycb.* from FIR_AGT_YCB_02 ycb
    inner join FIR_AGT_BATCH_DTL dtl on ycb.BATCH_NO = dtl.BATCH_NO and ycb.policyno = dtl.core_no
    where ycb.BATCH_NO = #batchNo#
    and dtl.ORDERSEQ_STATUS in ('01','02') 
    order by ycb.ORDERSEQ,ycb.RISKCODE_YCB,ycb.KINDCODE_YCB
  </select>
</sqlMap>
