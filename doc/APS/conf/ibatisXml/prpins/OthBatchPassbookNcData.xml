<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<!-- mantis：OTH0131，處理人員：BJ085，需求單編號：OTH0131 保發中心-保單存摺各險寫入中介Table作業 -->
<sqlMap namespace="OthBatchPassbookNcData" >
  <resultMap id="BaseResultMap" class="com.tlg.prpins.entity.OthBatchPassbookNcData" >
    <result column="BATCH_SERIAL" property="batchSerial" jdbcType="VARCHAR" />
    <result column="BATCH_NO" property="batchNo" jdbcType="VARCHAR" />
    <result column="RISKCODE" property="riskcode" jdbcType="VARCHAR" />
    <result column="PROC_TYPE" property="procType" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="VARCHAR" />
    <result column="QTY" property="qty" jdbcType="DECIMAL" />
    <result column="FILENAME" property="filename" jdbcType="VARCHAR" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="ICREATE" property="icreate" jdbcType="VARCHAR" />
    <result column="DCREATE" property="dcreate" jdbcType="TIMESTAMP" />
    <result column="DUPDATE" property="dupdate" jdbcType="TIMESTAMP" />
  </resultMap>
  
  <select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map">
	<include refid="Utils.sql1" />
	SELECT * FROM <include refid="Utils.prpinsSchema" />OTH_BATCH_PASSBOOK_NC_DATA
	<dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="batchNo">
			BATCH_NO = #batchNo#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="riskcode">
			RISKCODE = #riskcode#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="procType">
			PROC_TYPE = #procType#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="batchSerial">
			BATCH_SERIAL = #batchSerial#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="status">
			STATUS = #status#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="filename">
			FILENAME = #filename#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="startCreateDate">
			DCREATE <![CDATA[>=]]> to_date(#startCreateDate# , 'yyyy/mm/dd hh24:mi:ss')
	  	</isNotEmpty>
	  	<isNotEmpty prepend="AND" property="endCreateDate">
			DCREATE <![CDATA[<=]]> to_date(#endCreateDate# , 'yyyy/mm/dd hh24:mi:ss')
	  	</isNotEmpty>
	</dynamic>
	<include refid="Utils.sql2" />
  </select>

  <select id="selectByParams" resultMap="BaseResultMap" parameterClass="java.util.Map">
	SELECT * FROM <include refid="Utils.prpinsSchema" />OTH_BATCH_PASSBOOK_NC_DATA
	<dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="batchNo">
			BATCH_NO = #batchNo#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="riskcode">
			RISKCODE = #riskcode#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="procType">
			PROC_TYPE = #procType#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="batchSerial">
			BATCH_SERIAL = #batchSerial#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="status">
			STATUS = #status#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="filename">
			FILENAME = #filename#
		</isNotEmpty>
	</dynamic>
  </select>

  <select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
	SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema" />OTH_BATCH_PASSBOOK_NC_DATA
	<dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="batchNo">
			BATCH_NO = #batchNo#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="riskcode">
			RISKCODE = #riskcode#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="procType">
			PROC_TYPE = #procType#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="batchSerial">
			BATCH_SERIAL = #batchSerial#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="status">
			STATUS = #status#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="filename">
			FILENAME = #filename#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="startCreateDate">
			DCREATE <![CDATA[>=]]> to_date(#startCreateDate# , 'yyyy/mm/dd hh24:mi:ss')
	  	</isNotEmpty>
	  	<isNotEmpty prepend="AND" property="endCreateDate">
			DCREATE <![CDATA[<=]]> to_date(#endCreateDate# , 'yyyy/mm/dd hh24:mi:ss')
	  	</isNotEmpty>
	</dynamic>
  </select>

  <delete id="delete" parameterClass="com.tlg.prpins.entity.OthBatchPassbookNcData" >
    delete <include refid="Utils.prpinsSchema"/>from OTH_BATCH_PASSBOOK_NC_DATA
    where BATCH_SERIAL = #batchSerial:VARCHAR#
  </delete>

  <insert id="insert" parameterClass="com.tlg.prpins.entity.OthBatchPassbookNcData" >
    insert <include refid="Utils.prpinsSchema"/>into OTH_BATCH_PASSBOOK_NC_DATA 
    (BATCH_SERIAL, BATCH_NO, RISKCODE, PROC_TYPE, STATUS, QTY, FILENAME, REMARK, ICREATE, DCREATE, DUPDATE)
    values (#batchSerial:VARCHAR#, #batchNo:VARCHAR#, #riskcode:VARCHAR#, #procType:VARCHAR#,
      #status:VARCHAR#, #qty:DECIMAL#, #filename:VARCHAR#, #remark:VARCHAR#, #icreate:VARCHAR#,
      #dcreate:TIMESTAMP#, #dupdate:TIMESTAMP#)
  </insert>

  <update id="update" parameterClass="com.tlg.prpins.entity.OthBatchPassbookNcData" >
    update <include refid="Utils.prpinsSchema"/>OTH_BATCH_PASSBOOK_NC_DATA
    <dynamic prepend="set" >
      <isNotNull prepend="," property="batchNo" >
        BATCH_NO = #batchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="riskcode" >
        RISKCODE = #riskcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="procType" >
        PROC_TYPE = #procType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="qty" >
        QTY = #qty:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="filename" >
        FILENAME = #filename:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="icreate" >
        ICREATE = #icreate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dcreate" >
        DCREATE = #dcreate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="dupdate" >
        DUPDATE = #dupdate:TIMESTAMP#
      </isNotNull>
    </dynamic>
    where BATCH_SERIAL = #batchSerial:VARCHAR#
  </update>
</sqlMap>