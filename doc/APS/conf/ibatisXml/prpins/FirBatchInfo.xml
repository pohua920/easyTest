<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="FirBatchInfo">
  <resultMap class="com.tlg.prpins.entity.FirBatchInfo" id="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 19 16:42:36 CST 2020.
    -->
    <result column="PRG_ID" jdbcType="VARCHAR" property="prgId" />
    <result column="MAIL_SUBJECT" jdbcType="VARCHAR" property="mailSubject" />
    <result column="MAIL_TO" jdbcType="VARCHAR" property="mailTo" />
    <result column="MAIL_CC" jdbcType="VARCHAR" property="mailCc" />
    <result column="ICREATE" jdbcType="VARCHAR" property="icreate" />
    <result column="DCREATE" jdbcType="TIMESTAMP" property="dcreate" />
    <result column="IUPDATE" jdbcType="VARCHAR" property="iupdate" />
    <result column="DUPDATE" jdbcType="TIMESTAMP" property="dupdate" />
  </resultMap>
  
  <!-- mantis：FIR0454，處理人員：BJ085，需求單編號：FIR0454 住火-APS富邦續件資料接收排程 -->
  <resultMap class="com.tlg.aps.vo.FirHandler1codeVo" id="Handler1codeResultMap">
    <result column="HANDLER1CODE" jdbcType="VARCHAR" property="handler1code" />
    <result column="COMCODE" jdbcType="VARCHAR" property="comcode" />
  </resultMap>
  
	<select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">

    select * from <include refid="Utils.prpinsSchema"/>FIR_BATCH_INFO
    	<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="prgId">
				PRG_ID = #prgId#
			</isNotEmpty>
			<!-- mantis：OTH0131，處理人員：BJ085，需求單編號：OTH0131 保發中心-保單存摺各險寫入中介Table作業 start-->
			<isNotEmpty prepend="AND" property="prgIdLike">
				PRG_ID like '%'||#prgIdLike#||'%'
			</isNotEmpty>
			<!-- mantis：OTH0131，處理人員：BJ085，需求單編號：OTH0131 保發中心-保單存摺各險寫入中介Table作業 end-->
		</dynamic>
  </select>

  <select id="selectByUK" parameterClass="java.util.Map" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 19 16:42:36 CST 2020.
    -->
    select * from FIR_BATCH_INFO
    where PRG_ID = #prgId#
  </select>
  
  <!-- mantis：FIR0454，處理人員：BJ085，需求單編號：FIR0454 住火-APS富邦續件資料接收排程 -->
  <select id="selectHandler1code" parameterClass="java.util.Map" resultMap="Handler1codeResultMap">
    select FBI.MAIL_TO as HANDLER1CODE, PU.COMCODE from FIR_BATCH_INFO FBI 
    left join PRPDUSER PU on FBI.MAIL_TO = PU.USERCODE 
    where FBI.PRG_ID = 'FIR_AGT_FBRN_HANDLER1CODE'
  </select>
  
  <delete id="delete" parameterClass="com.tlg.prpins.entity.FirBatchInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 19 16:42:36 CST 2020.
    -->
    delete from <include refid="Utils.prpinsSchema" />FIR_BATCH_INFO
    where PRG_ID = #prgId:VARCHAR#
  </delete>
  
  <insert id="insert" parameterClass="com.tlg.prpins.entity.FirBatchInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 19 16:42:36 CST 2020.
    -->
    insert into <include refid="Utils.prpinsSchema" />FIR_BATCH_INFO (PRG_ID, MAIL_SUBJECT, MAIL_TO, MAIL_CC, 
      ICREATE, DCREATE, IUPDATE, DUPDATE)
    values (#prgId:VARCHAR#, #mailSubject:VARCHAR#, #mailTo:VARCHAR#, #mailCc:VARCHAR#, 
      #icreate:VARCHAR#, #dcreate:TIMESTAMP#, #iupdate:VARCHAR#, #dupdate:TIMESTAMP#)
  </insert>
  
  <update id="update" parameterClass="com.tlg.prpins.entity.FirBatchInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 19 16:42:36 CST 2020.
    -->
    update <include refid="Utils.prpinsSchema" />FIR_BATCH_INFO
    <dynamic prepend="set">
      <isNotNull prepend="," property="mailSubject">
        MAIL_SUBJECT = #mailSubject:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="mailTo">
        MAIL_TO = #mailTo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="mailCc">
        MAIL_CC = #mailCc:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="icreate">
        ICREATE = #icreate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dcreate">
        DCREATE = #dcreate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="iupdate">
        IUPDATE = #iupdate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dupdate">
        DUPDATE = #dupdate:TIMESTAMP#
      </isNotNull>
    </dynamic>
    where PRG_ID = #prgId:VARCHAR#
  </update>

</sqlMap>