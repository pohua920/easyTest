<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="CtbcClmsmsRm">
	<resultMap class="com.tlg.msSqlAs400.entity.CtbcClmsmsRm" id="BaseResultMap">
		<result column="GOID" property="goid" jdbcType="VARCHAR" />
		<result column="POLICYNO" property="policyno" jdbcType="VARCHAR" />
		<result column="CLAIMNO" property="claimno" jdbcType="VARCHAR" />
		<result column="CLMTIMES" property="clmtimes" jdbcType="VARCHAR" />
		<result column="INSUREDNAME" property="insuredname" jdbcType="VARCHAR" />
		<result column="DAMAGEDATE" property="damagedate" jdbcType="DATE" />
		<result column="CLMPAY" property="clmpay" jdbcType="NUMERIC" />
		<result column="CLMFEE" property="clmfee" jdbcType="NUMERIC" />
		<result column="HANDLERNAME" property="handlername" jdbcType="VARCHAR" />
		<result column="SUBMITDATE" property="submitdate" jdbcType="DATE" />
		<result column="IMSCHECKDATE" property="imscheckdate" jdbcType="DATE" />
		<result column="MAKEDATE" property="makedate" jdbcType="DATE" />
		<result column="PAYMETHOD" property="paymethod" jdbcType="VARCHAR" />
		<result column="PAYACOUNTNAME" property="payacountname" jdbcType="VARCHAR" />
		<result column="PAYACOUNTID" property="payacountid" jdbcType="VARCHAR" />
		<result column="PAYPHONE" property="payphone" jdbcType="VARCHAR" />
		<result column="PAYACOUNT" property="payacount" jdbcType="VARCHAR" />
		<result column="PAYBANKNAME" property="paybankname" jdbcType="VARCHAR" />
		<result column="CLMPAYDATE" property="clmpaydate" jdbcType="DATE" />
		<result column="NEWIMS" property="newims" jdbcType="VARCHAR" />
		<result column="CREATDATE" property="creatdate" jdbcType="DATE" />
		<result column="PDFMAKEDATE" property="pdfmakedate" jdbcType="DATE" />
		<result column="MSGURL" property="msgurl" jdbcType="VARCHAR" />
		<result column="OUTMSG" property="outmsg" jdbcType="VARCHAR" />
		<result column="MSGSENDMARK" property="msgsendmark" jdbcType="VARCHAR" />
		<result column="MSGSENDDATE" property="msgsenddate" jdbcType="DATE" />
	</resultMap>

	<select id="select" parameterClass="java.util.Map" resultMap="BaseResultMap">
		<include refid="Utils.msSql1" />
		select * from CTBC_CLMSMS_RM
		<dynamic prepend="WHERE">
			<isNotNull prepend="AND" property="goid">
				GOID = #goid:VARCHAR#
			</isNotNull>
			<isNotNull prepend="AND" property="policyno">
				POLICYNO = #policyno:VARCHAR#
			</isNotNull>
			<isNotNull prepend="AND" property="claimno">
				CLAIMNO = #claimno:VARCHAR#
			</isNotNull>
			<isEqual prepend="AND" property="pdfmakedateNull"
				compareValue="Y">
				PDFMAKEDATE IS NULL
			</isEqual>
		</dynamic>
		<include refid="Utils.msSql2" />
	</select>

	<select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">
		select * from CTBC_CLMSMS_RM
		<dynamic prepend="WHERE">
			<isNotNull prepend="AND" property="goid">
				GOID = #goid:VARCHAR#
			</isNotNull>
			<isNotNull prepend="AND" property="policyno">
				POLICYNO = #policyno:VARCHAR#
			</isNotNull>
			<isNotNull prepend="AND" property="claimno">
				CLAIMNO = #claimno:VARCHAR#
			</isNotNull>
			<isEqual prepend="AND" property="pdfmakedateNull" compareValue="Y">
				PDFMAKEDATE IS NULL
			</isEqual>
		</dynamic>
	</select>

	<select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
		select COUNT(*) from CTBC_CLMSMS_RM
		<dynamic prepend="WHERE">
			<isNotNull prepend="AND" property="goid">
				GOID = #goid:VARCHAR#
			</isNotNull>
			<isNotNull prepend="AND" property="policyno">
				POLICYNO =
				#policyno:VARCHAR#
			</isNotNull>
			<isNotNull prepend="AND" property="claimno">
				CLAIMNO =
				#claimno:VARCHAR#
			</isNotNull>
			<isEqual prepend="AND" property="pdfmakedateNull"
				compareValue="Y">
				PDFMAKEDATE IS NULL
			</isEqual>
		</dynamic>
	</select>
  
  <select id="countByUK" resultClass="java.lang.Integer" parameterClass="com.tlg.msSqlAs400.entity.CtbcClmsmsRm" >
		SELECT COUNT(*) FROM CTBC_CLMSMS_RM
		where GOID = #goid:VARCHAR#
  </select>
  
  <delete id="deleteByEntity" parameterClass="com.tlg.msSqlAs400.entity.CtbcClmsmsRm">
    delete from CTBC_CLMSMS_RM where GOID = #goid:VARCHAR#
  </delete>

  <!-- mantis： CLM0232 ，處理人員： DP0713 ，需求單編號：修正createPDF與CLMSMS日期錯誤  -->
  <insert id="insert" parameterClass="com.tlg.msSqlAs400.entity.CtbcClmsmsRm">
	insert into CTBC_CLMSMS_RM (POLICYNO, CLAIMNO, CLMTIMES, INSUREDNAME, DAMAGEDATE, CLMPAY,
      CLMFEE, HANDLERNAME, SUBMITDATE, IMSCHECKDATE, MAKEDATE, PAYMETHOD, PAYACOUNTNAME,
      PAYACOUNTID, PAYPHONE, PAYACOUNT, PAYBANKNAME, CLMPAYDATE, NEWIMS, PDFMAKEDATE,
      MSGURL, OUTMSG, MSGSENDMARK, MSGSENDDATE)
    values (#policyno:VARCHAR#, #claimno:VARCHAR#, #clmtimes:VARCHAR#, #insuredname:VARCHAR#,
      #damagedate:DATE#, #clmpay:NUMERIC#, #clmfee:NUMERIC#, #handlername:VARCHAR#, #submitdate:DATE#,
      #imscheckdate:DATE#, #makedate:DATE#, #paymethod:VARCHAR#, #payacountname:VARCHAR#,
      #payacountid:VARCHAR#, #payphone:VARCHAR#, #payacount:VARCHAR#, #paybankname:VARCHAR#, #clmpaydate:DATE#,
      #newims:VARCHAR#, #pdfmakedate:DATE#, #msgurl:VARCHAR#, #outmsg:VARCHAR#,
      #msgsendmark:VARCHAR#, #msgsenddate:DATE#)
  </insert>

  <update id="update" parameterClass="com.tlg.msSqlAs400.entity.CtbcClmsmsRm">
    update CTBC_CLMSMS_RM
    <dynamic prepend="set" >
      <isNotNull prepend="," property="policyno" >
        POLICYNO = #policyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="claimno" >
        CLAIMNO = #claimno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="clmtimes" >
        CLMTIMES = #clmtimes:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="insuredname" >
        INSUREDNAME = #insuredname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="damagedate" >
        DAMAGEDATE = #damagedate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="clmpay" >
        CLMPAY = #clmpay:NUMERIC#
      </isNotNull>
      <isNotNull prepend="," property="clmfee" >
        CLMFEE = #clmfee:NUMERIC#
      </isNotNull>
      <isNotNull prepend="," property="handlername" >
        HANDLERNAME = #handlername:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="submitdate" >
        SUBMITDATE = #submitdate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="imscheckdate" >
        IMSCHECKDATE = #imscheckdate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="makedate" >
        MAKEDATE = #makedate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="paymethod" >
        PAYMETHOD = #paymethod:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="payacountname" >
        PAYACOUNTNAME = #payacountname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="payacountid" >
        PAYACOUNTID = #payacountid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="payphone" >
        PAYPHONE = #payphone:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="payacount" >
        PAYACOUNT = #payacount:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="paybankname" >
        PAYBANKNAME = #paybankname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="clmpaydate" >
        CLMPAYDATE = #clmpaydate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="newims" >
        NEWIMS = #newims:VARCHAR#
      </isNotNull>
      <!-- mantis： CLM0232 ，處理人員： DP0713 ，需求單編號：修正createPDF與CLMSMS日期錯誤  START >
      <isNotNull prepend="," property="creatdate" >
        CREATDATE = #creatdate:DATE#
      </isNotNull>
      < mantis： CLM0232 ，處理人員： DP0713 ，需求單編號：修正createPDF與CLMSMS日期錯誤  END-->
      <isNotNull prepend="," property="pdfmakedate" >
        PDFMAKEDATE = #pdfmakedate:DATE#
      </isNotNull>
      <isNull prepend="," property="pdfmakedate" >
        PDFMAKEDATE = null
      </isNull>
      <isNotNull prepend="," property="msgurl" >
        MSGURL = #msgurl:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="outmsg" >
        OUTMSG = #outmsg:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="msgsendmark" >
        MSGSENDMARK = #msgsendmark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="msgsenddate" >
        MSGSENDDATE = #msgsenddate:DATE#
      </isNotNull>
    </dynamic>
    where GOID = #goid:VARCHAR#
  </update>
</sqlMap>