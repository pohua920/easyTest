<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<!-- mantis：SALES0033 ，處理人員： DP0713 ，需求單編號：銷管系統-業務員換證日期更新排程及通知 -->
<sqlMap namespace="PrpdagentIdv">
  <resultMap class="com.tlg.sales.entity.PrpdagentIdv" id="BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Sep 30 10:31:08 CST 2021.
    -->
    <result column="AGENTCODE" jdbcType="VARCHAR" property="agentCode" />
    <result column="CERTINO" jdbcType="VARCHAR" property="certiNo" />
    <result column="LOGINDATE" jdbcType="TIMESTAMP" property="loginDate" />
    <result column="LOGINENDDATE" jdbcType="TIMESTAMP" property="loginEndDate" />
  </resultMap>
  

  <sql id="Base_Column_List">
  	  AGENTCODE, CERTINO, LOGINDATE, LOGINENDDATE
  </sql>

  <select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map">
	<include refid="Utils.sql1" />
		SELECT * FROM <include refid="Utils.salesSchema"/>PRPDAGENTIDV
	<dynamic prepend="WHERE">
		AGENTCODE = #agentCode#
		<isNotEmpty prepend="AND" property="certiNo">
			CERTINO = #certiNo#
		</isNotEmpty>
	</dynamic>
	<include refid="Utils.sql2" />
  </select>
  
  <select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
	SELECT COUNT(*) FROM <include refid="Utils.salesSchema"/>PRPDAGENTIDV
	<dynamic prepend="WHERE">
		AGENTCODE = #agentCode#
		<isNotEmpty prepend="AND" property="certiNo">
			CERTINO = #certiNo#
		</isNotEmpty>
	</dynamic>
  </select>

  <select id="selectByParams" resultMap="BaseResultMap" parameterClass="java.util.Map">
	SELECT * FROM <include refid="Utils.salesSchema"/>PRPDAGENTIDV
	<dynamic prepend="WHERE">
		AGENTCODE = #agentCode#
		<isNotEmpty prepend="AND" property="certiNo">
			CERTINO = #certiNo#
		</isNotEmpty>
	</dynamic>
  </select>
  
  <select id="selectByUK" resultClass="com.tlg.sales.entity.PrpdagentIdv" parameterClass="java.util.Map" >
	SELECT * FROM <include refid="Utils.salesSchema"/>PRPDAGENTIDV
	where AGENTCODE = #agentCode:VARCHAR#
  </select>
	
  <delete id="delete" parameterClass="com.tlg.sales.entity.PrpdagentIdv">
    delete from <include refid="Utils.salesSchema"/>PRPDAGENTIDV
    where AGENTCODE = #agentCode:VARCHAR#
  </delete>
  
  <insert id="insert" parameterClass="com.tlg.sales.entity.PrpdagentIdv">
    insert into <include refid="Utils.salesSchema"/>PRPDAGENTIDV (AGENTCODE)
    values (#agentCode:VARCHAR#)
  </insert>

  <update id="update" parameterClass="com.tlg.sales.entity.PrpdagentIdv">
    update <include refid="Utils.salesSchema"/>PRPDAGENTIDV
    <dynamic prepend="set">
      <isNotNull prepend="," property="loginDate">
        LOGINDATE = #loginDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="loginEndDate">
        LOGINENDDATE = #loginEndDate:TIMESTAMP#
      </isNotNull>
    </dynamic>
    where AGENTCODE = #agentCode:VARCHAR#
  </update>
  
</sqlMap>