<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<!-- mantis：MOB0003，處理人員：CC009，需求單編號：MOB0003 從遠傳抓取要保書檔作業 -->
<sqlMap namespace="ProposalFile">
  <resultMap class="com.tlg.msSqlMob.entity.ProposalFile" id="BaseResultMap">
    <result column="transaction_id" jdbcType="VARCHAR" property="transactionId" />
    <result column="zip_file_name" jdbcType="VARCHAR" property="zipFileName" />
    <result column="rpt_batch_no" jdbcType="VARCHAR" property="rptBatchNo" />
    <result column="application_id" jdbcType="VARCHAR" property="applicationId" />
    <result column="file_name" jdbcType="VARCHAR" property="fileName" />
    <result column="download_date" jdbcType="VARCHAR" property="downloadDate" />
    <result column="created_by" jdbcType="VARCHAR" property="createdBy" />
    <result column="created_time" jdbcType="TIMESTAMP" property="createdTime" />
    <result column="modified_by" jdbcType="VARCHAR" property="modifiedBy" />
    <result column="modified_time" jdbcType="TIMESTAMP" property="modifiedTime" />
  </resultMap>
  
  <select id="select" parameterClass="java.util.Map" resultMap="BaseResultMap">
  	<include refid="Utils.msSql1" />
    select * from PROPOSAL_FILE
    <dynamic prepend="WHERE">
      <isNotEmpty prepend="AND" property="zipFileName">
        zip_file_name = #zipFileName:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="rptBatchNo">
        rpt_batch_no = #rptBatchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="applicationId">
        application_id = #applicationId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="fileName">
        file_name = #fileName:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="downloadDate">
        download_date = #downloadDate:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="createdBy">
        created_by = #createdBy:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="createdTime">
        created_time = #createdTime:TIMESTAMP#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="modifiedBy">
        modified_by = #modifiedBy:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="modifiedTime">
        modified_time = #modifiedTime:TIMESTAMP#
      </isNotEmpty>
    </dynamic>
    <include refid="Utils.msSql2" />
  </select>
  
  <select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select * from PROPOSAL_FILE
    <dynamic prepend="WHERE">
      <isNotEmpty prepend="AND" property="zipFileName">
        zip_file_name = #zipFileName:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="rptBatchNo">
        rpt_batch_no = #rptBatchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="applicationId">
        application_id = #applicationId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="fileName">
        file_name = #fileName:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="downloadDate">
        download_date = #downloadDate:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="createdBy">
        created_by = #createdBy:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="createdTime">
        created_time = #createdTime:TIMESTAMP#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="modifiedBy">
        modified_by = #modifiedBy:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="modifiedTime">
        modified_time = #modifiedTime:TIMESTAMP#
      </isNotEmpty>
    </dynamic>
  </select>
  
  <select id="count" parameterClass="java.util.Map" resultClass="java.lang.Integer">
    select COUNT(*) from PROPOSAL_FILE
    <dynamic prepend="WHERE">
      <isNotEmpty prepend="AND" property="zipFileName">
        zip_file_name = #zipFileName:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="rptBatchNo">
        rpt_batch_no = #rptBatchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="applicationId">
        application_id = #applicationId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="fileName">
        file_name = #fileName:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="downloadDate">
        download_date = #downloadDate:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="createdBy">
        created_by = #createdBy:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="createdTime">
        created_time = #createdTime:TIMESTAMP#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="modifiedBy">
        modified_by = #modifiedBy:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="modifiedTime">
        modified_time = #modifiedTime:TIMESTAMP#
      </isNotEmpty>
    </dynamic>
  </select>
  
  <delete id="deleteByEntity" parameterClass="com.tlg.msSqlMob.entity.ProposalFile">
    delete from PROPOSAL_FILE
    where transaction_id = #transactionId:VARCHAR#
  </delete>
  
  <select id="selectByUK" resultMap="BaseResultMap" parameterClass="java.util.Map" >
	SELECT * FROM PROPOSAL_FILE
	where transaction_id = #transactionId:VARCHAR#
  </select>
	
  <select id="countByUK" resultClass="java.lang.Integer" parameterClass="com.tlg.msSqlMob.entity.ProposalFile" >
	SELECT COUNT(*) FROM PROPOSAL_FILE
	where transaction_id = #transactionId:VARCHAR#
  </select>
  
  <insert id="insert" parameterClass="com.tlg.msSqlMob.entity.ProposalFile">
    insert into PROPOSAL_FILE (transaction_id, zip_file_name, rpt_batch_no, application_id, 
      file_name, download_date, created_by, created_time, 
      modified_by, modified_time)
    values (#transactionId:VARCHAR#, #zipFileName:VARCHAR#, #rptBatchNo:VARCHAR#, #applicationId:VARCHAR#, 
      #fileName:VARCHAR#, #downloadDate:VARCHAR#, #createdBy:VARCHAR#, #createdTime:TIMESTAMP#, 
      #modifiedBy:VARCHAR#, #modifiedTime:TIMESTAMP#)
  </insert>
  
  <update id="update" parameterClass="com.tlg.msSqlMob.entity.ProposalFile">
    update PROPOSAL_FILE
    <dynamic prepend="set">
      <isNotNull prepend="," property="zipFileName">
        zip_file_name = #zipFileName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="rptBatchNo">
        rpt_batch_no = #rptBatchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="applicationId">
        application_id = #applicationId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fileName">
        file_name = #fileName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="downloadDate">
        download_date = #downloadDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createdBy">
        created_by = #createdBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createdTime">
        created_time = #createdTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="modifiedBy">
        modified_by = #modifiedBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifiedTime">
        modified_time = #modifiedTime:TIMESTAMP#
      </isNotNull>
    </dynamic>
    where transaction_id = #transactionId:VARCHAR#
  </update>
</sqlMap>