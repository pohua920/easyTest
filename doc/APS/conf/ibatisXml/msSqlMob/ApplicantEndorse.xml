<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ApplicantEndorse">
	<resultMap class="com.tlg.msSqlMob.entity.ApplicantEndorse" id="BaseResultMap">
	    <result column="transaction_id" property="transactionId" jdbcType="VARCHAR" />
	    <result column="customer_id" property="customerId" jdbcType="VARCHAR" />
	    <result column="name" property="name" jdbcType="VARCHAR" />
	    <result column="responsible_person" property="responsiblePerson" jdbcType="VARCHAR" />
	    <result column="birthday" property="birthday" jdbcType="VARCHAR" />
	    <result column="tel_no" property="telNo" jdbcType="VARCHAR" />
	    <result column="zip_code" property="zipCode" jdbcType="VARCHAR" />
	    <result column="address" property="address" jdbcType="VARCHAR" />
	    <result column="releation" property="releation" jdbcType="VARCHAR" />
	    <result column="country" property="country" jdbcType="VARCHAR" />
	    <result column="email_address" property="emailAddress" jdbcType="VARCHAR" />
	    <result column="created_by" property="createdBy" jdbcType="VARCHAR" />
	    <result column="created_time" property="createdTime" jdbcType="TIMESTAMP" />
	    <result column="modified_by" property="modifiedBy" jdbcType="VARCHAR" />
	    <result column="modified_time" property="modifiedTime" jdbcType="TIMESTAMP" />
	    <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
	    <result column="data_src" property="dataSrc" jdbcType="VARCHAR" />
	    <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
	</resultMap>

	<resultMap class="com.tlg.aps.vo.ApplicantForEndorseCheckVo" id="endorseCheckMap">
		<result column="policy_no" property="policyNo" jdbcType="VARCHAR" />
		<result column="endorse_no" property="endorseNo" jdbcType="VARCHAR" />
		<result column="transaction_id" property="transactionId" jdbcType="VARCHAR" />
	    <result column="customer_id" property="customerId" jdbcType="VARCHAR" />
	    <result column="name" property="name" jdbcType="VARCHAR" />
	    <result column="responsible_person" property="responsiblePerson" jdbcType="VARCHAR" />
	    <result column="birthday" property="birthday" jdbcType="VARCHAR" />
	    <result column="tel_no" property="telNo" jdbcType="VARCHAR" />
	    <result column="zip_code" property="zipCode" jdbcType="VARCHAR" />
	    <result column="address" property="address" jdbcType="VARCHAR" />
	    <result column="releation" property="releation" jdbcType="VARCHAR" />
	    <result column="country" property="country" jdbcType="VARCHAR" />
	    <result column="email_address" property="emailAddress" jdbcType="VARCHAR" />
	    <result column="created_by" property="createdBy" jdbcType="VARCHAR" />
	    <result column="created_time" property="createdTime" jdbcType="TIMESTAMP" />
	    <result column="modified_by" property="modifiedBy" jdbcType="VARCHAR" />
	    <result column="modified_time" property="modifiedTime" jdbcType="TIMESTAMP" />
	    <result column="contract_id" property="contractId" jdbcType="VARCHAR" />
	    <!-- mantis：MOB0022，處理人員：CE035，需求單編號：MOB0022 僅日常文批資料須進洗錢系統，後續期繳不需再進洗錢系統審查    -->
	    <result column="project_code_premium" property="projectCodePremium" jdbcType="VARCHAR" />
	</resultMap>

	<select id="selectForCheck" parameterClass="java.util.Map" resultMap="endorseCheckMap">
	<!-- mantis：MOB0022，處理人員：CE035，需求單編號：MOB0022 僅日常文批資料須進洗錢系統，後續期繳不需再進洗錢系統審查    -->
		SELECT TOP 3000 B.POLICY_NO,B.ENDORSE_NO, B.CONTRACT_ID,B.PROJECT_CODE_PREMIUM, B.TX_ID, B.DATA_SRC, A.* FROM APPLICANT_ENDORSE A
	    <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
		INNER JOIN CUSTOMER_ENDORSE B ON A.TRANSACTION_ID = B.TRANSACTION_ID
		WHERE B.DATA_STATUS = '00'
		ORDER BY B.POLICY_NO
	</select>

	<select id="select" parameterClass="java.util.Map" resultMap="BaseResultMap">
		<include refid="Utils.msSql1" />
		select * from APPLICANT_ENDORSE
		<dynamic prepend="WHERE">
			<!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
	  		<isNotEmpty prepend="AND" property="dataSrc">
			  data_src = #dataSrc:VARCHAR#
	  		</isNotEmpty>
	  	 	<!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
			<isNotEmpty prepend="AND" property="transactionId">
				transaction_id = #transactionId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="customerId">
				customer_id = #customerId:VARCHAR#
			</isNotEmpty>

		</dynamic>
		<include refid="Utils.msSql2" />
	</select>

	<select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">
		select * from APPLICANT_ENDORSE
		<dynamic prepend="WHERE">
		    <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
	  		<isNotEmpty prepend="AND" property="dataSrc">
			  data_src = #dataSrc:VARCHAR#
	  		</isNotEmpty>
	  	 	<!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
			<isNotEmpty prepend="AND" property="transactionId">
				transaction_id = #transactionId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="customerId">
				customer_id = #customerId:VARCHAR#
			</isNotEmpty>
		</dynamic>
	</select>

	<select id="count" parameterClass="java.util.Map" resultClass="java.lang.Integer">
		select COUNT(*) from APPLICANT_ENDORSE
		<dynamic prepend="WHERE">
			<!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
	  		<isNotEmpty prepend="AND" property="dataSrc">
			  data_src = #dataSrc:VARCHAR#
	  		</isNotEmpty>
	  	 	<!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
			<isNotEmpty prepend="AND" property="transactionId">
				transaction_id = #transactionId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="customerId">
				customer_id = #customerId:VARCHAR#
			</isNotEmpty>
		</dynamic>
	</select>

	<delete id="deleteByEntity" parameterClass="com.tlg.msSqlMob.entity.ApplicantEndorse">
		delete from APPLICANT_ENDORSE
		where transaction_id = #transactionId:VARCHAR#
	</delete>

	<select id="selectByUK" resultMap="BaseResultMap"
		parameterClass="java.util.Map">
		SELECT * FROM APPLICANT_ENDORSE
		where transaction_id = #transactionId:VARCHAR#
	</select>

	<select id="countByUK" resultClass="java.lang.Integer"
		parameterClass="com.tlg.msSqlMob.entity.ApplicantEndorse">
		SELECT COUNT(*) FROM APPLICANT_ENDORSE
		where transaction_id = #transactionId:VARCHAR#
	</select>

	<insert id="insert" parameterClass="com.tlg.msSqlMob.entity.ApplicantEndorse">
	    insert into APPLICANT_ENDORSE (transaction_id, customer_id, name, responsible_person, birthday,
	      <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
	      tel_no, zip_code, address, releation, country, email_address, created_by, created_time, data_src)
	    values (#transactionId:VARCHAR#, #customerId:VARCHAR#, #name:VARCHAR#, #responsiblePerson:VARCHAR#,
	      #birthday:VARCHAR#, #telNo:VARCHAR#, #zipCode:VARCHAR#, #address:VARCHAR#, #releation:VARCHAR#,
	      #country:VARCHAR#, #emailAddress:VARCHAR#, #createdBy:VARCHAR#, #createdTime:TIMESTAMP#, #dataSrc:VARCHAR#)
	      <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
	</insert>

	<update id="update" parameterClass="com.tlg.msSqlMob.entity.ApplicantEndorse">
		update APPLICANT_ENDORSE
		<dynamic prepend="set">
			<isNotNull prepend="," property="customerId">
				customer_id = #customerId:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="name">
				name = #name:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="responsiblePerson">
				responsible_person = #responsiblePerson:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="birthday">
				birthday = #birthday:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="telNo">
				tel_no = #telNo:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="zipCode">
				zip_code = #zipCode:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="address">
				address = #address:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="releation">
				releation = #releation:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="country">
				country = #country:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="emailAddress">
				email_address = #emailAddress:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="modifiedBy">
				modified_by = #modifiedBy:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="modifiedTime">
				modified_time = #modifiedTime:TIMESTAMP#
			</isNotNull>
			<!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
			<isNotNull prepend="," property="dataSrc">
				data_src = #dataSrc:VARCHAR#
			</isNotNull>
			<!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
		</dynamic>
		where transaction_id = #transactionId:VARCHAR#
	</update>
</sqlMap>