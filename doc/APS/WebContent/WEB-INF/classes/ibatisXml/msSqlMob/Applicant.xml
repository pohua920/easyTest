<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<!--  mantis：MOB0001，處理人員：CC009，需求單編號：MOB0001 遠傳手機保險投保&批改作業 -->
<sqlMap namespace="Applicant">
  <resultMap class="com.tlg.msSqlMob.entity.Applicant" id="BaseResultMap">
    <result column="transaction_id" jdbcType="VARCHAR" property="transactionId" />
    <result column="rpt_batch_no" jdbcType="VARCHAR" property="rptBatchNo" />
    <result column="contract_id" jdbcType="VARCHAR" property="contractId" />
    <result column="application_id" jdbcType="VARCHAR" property="applicationId" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="occupation" jdbcType="VARCHAR" property="occupation" />
    <result column="responsible_person" jdbcType="VARCHAR" property="responsiblePerson" />
    <result column="customer_id" jdbcType="VARCHAR" property="customerId" />
    <result column="birthday" jdbcType="VARCHAR" property="birthday" />
    <result column="tel_no" jdbcType="VARCHAR" property="telNo" />
    <result column="address" jdbcType="VARCHAR" property="address" />
    <result column="email_address" jdbcType="VARCHAR" property="emailAddress" />
    <result column="country" jdbcType="VARCHAR" property="country" />
    <result column="zip_code" jdbcType="VARCHAR" property="zipCode" />
    <result column="releation" jdbcType="VARCHAR" property="releation" />
    <result column="releation_desc" jdbcType="VARCHAR" property="releationDesc" />
    <result column="id_type" jdbcType="VARCHAR" property="idType" />
    <result column="created_by" jdbcType="VARCHAR" property="createdBy" />
    <result column="created_time" jdbcType="TIMESTAMP" property="createdTime" />
    <result column="modified_by" jdbcType="VARCHAR" property="modifiedBy" />
    <result column="modified_time" jdbcType="TIMESTAMP" property="modifiedTime" />
    <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
    <result column="data_src" jdbcType="VARCHAR" property="dataSrc" />
    <result column="tx_id" jdbcType="VARCHAR" property="txId" />
    <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
  </resultMap>
  
  <select id="select" parameterClass="java.util.Map" resultMap="BaseResultMap">
  	<include refid="Utils.msSql1" />
    select * from APPLICANT
    <dynamic prepend="WHERE">
      <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
	  <isNotEmpty prepend="AND" property="dataSrc">
		data_src = #dataSrc:VARCHAR#
	  </isNotEmpty>
	  <isNotEmpty prepend="AND" property="txId">
		tx_id = #txId:VARCHAR#
	  </isNotEmpty>
	  <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
      <isNotEmpty prepend="AND" property="transactionId">
        transaction_id = #transactionId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="rptBatchNo">
        rpt_batch_no = #rptBatchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="contractId">
        contract_id = #contractId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="applicationId">
        application_id = #applicationId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="name">
        name = #name:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="occupation">
        occupation = #occupation:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="responsiblePerson">
        responsible_person = #responsiblePerson:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="customerId">
        customer_id = #customerId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="birthday">
        birthday = #birthday:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="telNo">
        tel_no = #telNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="address">
        address = #address:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="emailAddress">
        email_address = #emailAddress:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="country">
        country = #country:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="zipCode">
        zip_code = #zipCode:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="releation">
        releation = #releation:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="releationDesc">
        releation_desc = #releationDesc:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="idType">
        id_type = #idType:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="createdBy">
        created_by = #createdBy:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="createdTime">
        created_time = #createdTime:TIMESTAMP#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="modifiedBy">
        modified_by = #modifiedBy:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="modifiedTime">
        modified_time = #modifiedTime:TIMESTAMP#
      </isNotEmpty>
    </dynamic>
    <include refid="Utils.msSql2" />
  </select>
  
  <select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select * from APPLICANT
    <dynamic prepend="WHERE">
      <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
	  <isNotEmpty prepend="AND" property="dataSrc">
		data_src = #dataSrc:VARCHAR#
	  </isNotEmpty>
	  <isNotEmpty prepend="AND" property="txId">
		tx_id = #txId:VARCHAR#
	  </isNotEmpty>
	  <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
      <isNotEmpty prepend="AND" property="transactionId">
        transaction_id = #transactionId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="rptBatchNo">
        rpt_batch_no = #rptBatchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="contractId">
        contract_id = #contractId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="applicationId">
        application_id = #applicationId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="name">
        name = #name:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="occupation">
        occupation = #occupation:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="responsiblePerson">
        responsible_person = #responsiblePerson:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="customerId">
        customer_id = #customerId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="birthday">
        birthday = #birthday:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="telNo">
        tel_no = #telNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="address">
        address = #address:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="emailAddress">
        email_address = #emailAddress:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="country">
        country = #country:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="zipCode">
        zip_code = #zipCode:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="releation">
        releation = #releation:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="releationDesc">
        releation_desc = #releationDesc:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="idType">
        id_type = #idType:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="createdBy">
        created_by = #createdBy:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="createdTime">
        created_time = #createdTime:TIMESTAMP#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="modifiedBy">
        modified_by = #modifiedBy:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="modifiedTime">
        modified_time = #modifiedTime:TIMESTAMP#
      </isNotEmpty>
    </dynamic>
  </select>
  
  <select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
    select COUNT(*) from APPLICANT
    <dynamic prepend="WHERE">
      <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
	  <isNotEmpty prepend="AND" property="dataSrc">
		data_src = #dataSrc:VARCHAR#
	  </isNotEmpty>
	  <isNotEmpty prepend="AND" property="txId">
		tx_id = #txId:VARCHAR#
	  </isNotEmpty>
	  <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
      <isNotEmpty prepend="AND" property="transactionId">
        transaction_id = #transactionId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="rptBatchNo">
        rpt_batch_no = #rptBatchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="contractId">
        contract_id = #contractId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="applicationId">
        application_id = #applicationId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="name">
        name = #name:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="occupation">
        occupation = #occupation:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="responsiblePerson">
        responsible_person = #responsiblePerson:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="customerId">
        customer_id = #customerId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="birthday">
        birthday = #birthday:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="telNo">
        tel_no = #telNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="address">
        address = #address:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="emailAddress">
        email_address = #emailAddress:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="country">
        country = #country:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="zipCode">
        zip_code = #zipCode:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="releation">
        releation = #releation:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="releationDesc">
        releation_desc = #releationDesc:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="idType">
        id_type = #idType:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="createdBy">
        created_by = #createdBy:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="createdTime">
        created_time = #createdTime:TIMESTAMP#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="modifiedBy">
        modified_by = #modifiedBy:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="modifiedTime">
        modified_time = #modifiedTime:TIMESTAMP#
      </isNotEmpty>
    </dynamic>
  </select>
  
  <delete id="deleteByEntity" parameterClass="com.tlg.msSqlMob.entity.Applicant">
    delete from APPLICANT
    where transaction_id = #transactionId:VARCHAR#
  </delete>
  
  <select id="selectByUK" resultMap="BaseResultMap" parameterClass="java.util.Map" >
		SELECT * FROM APPLICANT
		where transaction_id = #transactionId:VARCHAR#
	</select>
	
	<select id="countByUK" resultClass="java.lang.Integer" parameterClass="com.tlg.msSqlMob.entity.Applicant" >
		SELECT COUNT(*) FROM APPLICANT
		where transaction_id = #transactionId:VARCHAR#
	</select>
  
  <insert id="insert" parameterClass="com.tlg.msSqlMob.entity.Applicant">
    insert into APPLICANT (transaction_id, rpt_batch_no, contract_id, application_id, 
      name, occupation, responsible_person, customer_id, 
      birthday, tel_no, address, email_address, 
      country, zip_code, releation, releation_desc, 
      id_type, created_by, created_time, modified_by, 
      <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
      modified_time, data_src, tx_id)
    values (#transactionId:VARCHAR#, #rptBatchNo:VARCHAR#, #contractId:VARCHAR#, #applicationId:VARCHAR#, 
      #name:VARCHAR#, #occupation:VARCHAR#, #responsiblePerson:VARCHAR#, #customerId:VARCHAR#, 
      #birthday:VARCHAR#, #telNo:VARCHAR#, #address:VARCHAR#, #emailAddress:VARCHAR#, 
      #country:VARCHAR#, #zipCode:VARCHAR#, #releation:VARCHAR#, #releationDesc:VARCHAR#, 
      #idType:VARCHAR#, #createdBy:VARCHAR#, #createdTime:TIMESTAMP#, #modifiedBy:VARCHAR#, 
      #modifiedTime:TIMESTAMP#, #dataSrc:VARCHAR#, #txId:VARCHAR#)
      <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
  </insert>
  
  <update id="update" parameterClass="com.tlg.msSqlMob.entity.Applicant">
    update APPLICANT
    <dynamic prepend="set">
      <isNotNull prepend="," property="rptBatchNo">
        rpt_batch_no = #rptBatchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="contractId">
        contract_id = #contractId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="applicationId">
        application_id = #applicationId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="name">
        name = #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="occupation">
        occupation = #occupation:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="responsiblePerson">
        responsible_person = #responsiblePerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerId">
        customer_id = #customerId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="birthday">
        birthday = #birthday:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="telNo">
        tel_no = #telNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="address">
        address = #address:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="emailAddress">
        email_address = #emailAddress:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="country">
        country = #country:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zipCode">
        zip_code = #zipCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="releation">
        releation = #releation:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="releationDesc">
        releation_desc = #releationDesc:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="idType">
        id_type = #idType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createdBy">
        created_by = #createdBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createdTime">
        created_time = #createdTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="modifiedBy">
        modified_by = #modifiedBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifiedTime">
        modified_time = #modifiedTime:TIMESTAMP#
      </isNotNull>
      <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
      <isNotNull prepend="," property="dataSrc">
        data_src = #dataSrc:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="txId">
        tx_id = #txId:VARCHAR#
      </isNotNull>
      <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
    </dynamic>
    where transaction_id = #transactionId:VARCHAR#
  </update>
  
  <!-- mantis：MOB0002，處理人員：CC009，需求單編號：MOB0002 遠傳要保及批單資料作洗錢、利關人、黑名單檢核 start -->
  <select id="selectForFetPolicyCheck" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select * from APPLICANT a
    Inner join CUSTOMER b on a.RPT_BATCH_NO = b.RPT_BATCH_NO
    and a.transaction_id  = b.transaction_id 
    <dynamic prepend="WHERE">
      <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 START -->
      <isNotEmpty prepend="AND" property="dataSrc">
        b.data_src = #dataSrc:VARCHAR#
      </isNotEmpty>
      <!-- mantis：MOB0031，處理人員：CE035，需求單編號：MOB0031 行動裝置險estore網投案開發 出單流程 END -->
      <isNotEmpty prepend="AND" property="rptBatchNo">
        b.rpt_batch_no = #rptBatchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="batchStatus">
        b.batch_status = #batchStatus:VARCHAR#
      </isNotEmpty>
    </dynamic>
  </select>
  <!-- mantis：MOB0002，處理人員：CC009，需求單編號：MOB0002 遠傳要保及批單資料作洗錢、利關人、黑名單檢核 end -->
</sqlMap>