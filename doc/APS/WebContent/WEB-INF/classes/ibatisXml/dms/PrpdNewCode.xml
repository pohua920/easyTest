<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="PrpdNewCode">
	<!-- mantis： HAS0254，處理人員：DP0706，需求單編號：HAS0254_傷害險中信銀行投調整信用卡加密及檔案上下傳 START -->
	<resultMap id="BaseResultMap" class="com.tlg.dms.entity.PrpdNewCode" >
	    <result column="CODECODE" property="codecode" jdbcType="VARCHAR" />
	    <result column="CODETYPE" property="codetype" jdbcType="VARCHAR" />
	    <result column="CODECNAME" property="codecname" jdbcType="VARCHAR" />
	    <result column="CODEENAME" property="codeename" jdbcType="VARCHAR" />
	    <result column="UPPERCODE" property="uppercode" jdbcType="VARCHAR" />
	    <result column="OLDCODECODE" property="oldcodecode" jdbcType="VARCHAR" />
	    <result column="NEWCODECODE" property="newcodecode" jdbcType="VARCHAR" />
	    <result column="COMMONFLAG" property="commonflag" jdbcType="VARCHAR" />
	    <result column="VALIDDATE" property="validdate" jdbcType="TIMESTAMP" />
	    <result column="INVALIDDATE" property="invaliddate" jdbcType="TIMESTAMP" />
	    <result column="VALIDSTATUS" property="validstatus" jdbcType="VARCHAR" />
	    <result column="FLAG" property="flag" jdbcType="VARCHAR" />
	    <result column="OLDCODETYPE" property="oldcodetype" jdbcType="VARCHAR" />
	    <result column="CODELEVEL" property="codelevel" jdbcType="VARCHAR" />
	    <result column="CODECDESC" property="codecdesc" jdbcType="VARCHAR" />
	    <result column="CODEEDESC" property="codeedesc" jdbcType="VARCHAR" />
	    <result column="AUDITFLAG" property="auditflag" jdbcType="VARCHAR" />
	    <result column="CODEBIGCODE" property="codebigcode" jdbcType="VARCHAR" />
	    <result column="CODEMIDDLECODE" property="codemiddlecode" jdbcType="VARCHAR" />
	    <result column="CODEBIGNAME" property="codebigname" jdbcType="VARCHAR" />
	    <result column="CODEMIDDLENAME" property="codemiddlename" jdbcType="VARCHAR" />
	    <result column="UPDATEUSER" property="updateuser" jdbcType="VARCHAR" />
	    <result column="UPDATEDATE" property="updatedate" jdbcType="TIMESTAMP" />
	    <result column="CREATEUSER" property="createuser" jdbcType="VARCHAR" />
	    <result column="CREATEDATE" property="createdate" jdbcType="TIMESTAMP" />
  	</resultMap>

	<select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map">
		<include refid="Utils.sql1" />
		SELECT * FROM <include refid="Utils.prpinsSchema"/>PRPDNEWCODE
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="codecode">
				CODECODE = #codecode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="codetype">
				CODETYPE = #codetype#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="uppercode">
				UPPERCODE = #uppercode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="validstatus">
				VALIDSTATUS = #validstatus#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="codelevel">
				CODELEVEL = #codelevel#
			</isNotEmpty>
            <!-- mantis：FIR0651，處理人員：DP0714，商住火65歲業務員高齡教育訓練檢核及APS例外設定 start -->
			<isNotEmpty prepend="AND" property="codeename">
				CODEENAME = #codeename#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="oldcodecode">
				OLDCODECODE = #oldcodecode#
			</isNotEmpty>
            <!-- mantis：FIR0651，處理人員：DP0714，商住火65歲業務員高齡教育訓練檢核及APS例外設定 end -->
		</dynamic>
		<include refid="Utils.sql2" />
	</select>

	<select id="selectByParams" resultMap="BaseResultMap" parameterClass="java.util.Map">
		SELECT * FROM <include refid="Utils.prpinsSchema"/>PRPDNEWCODE
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="codecode">
				CODECODE = #codecode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="codetype">
				CODETYPE = #codetype#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="uppercode">
				UPPERCODE = #uppercode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="validstatus">
				VALIDSTATUS = #validstatus#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="codelevel">
				CODELEVEL = #codelevel#
			</isNotEmpty>
            <!-- mantis：FIR0651，處理人員：DP0714，商住火65歲業務員高齡教育訓練檢核及APS例外設定 start -->
			<isNotEmpty prepend="AND" property="codeename">
				CODEENAME = #codeename#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="oldcodecode">
				OLDCODECODE = #oldcodecode#
			</isNotEmpty>
			<!-- mantis： HAS0254，處理人員：DP0706，需求單編號：HAS0254_傷害險中信銀行投調整信用卡加密及檔案上下傳START -->
			<isNotEmpty prepend="AND" property="codecname">
				CODECNAME = #codecname#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="validdate">
				VALIDDATE <![CDATA[>=]]> to_date(#validdate# , 'yyyy/mm/dd')
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="invaliddate">
				INVALIDDATE <![CDATA[<=]]> to_date(#invaliddate# , 'yyyy/mm/dd')
			</isNotEmpty>
			<!-- mantis： HAS0254，處理人員：DP0706，需求單編號：HAS0254_傷害險中信銀行投調整信用卡加密及檔案上下傳END -->
			ORDER BY CODECODE DESC
            <!-- mantis：FIR0651，處理人員：DP0714，商住火65歲業務員高齡教育訓練檢核及APS例外設定 end -->
		</dynamic>
	</select>

 	
	<select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
		SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema"/>PRPDNEWCODE
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="codecode">
				CODECODE = #codecode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="codetype">
				CODETYPE = #codetype#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="uppercode">
				UPPERCODE = #uppercode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="validstatus">
				VALIDSTATUS = #validstatus#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="codelevel">
				CODELEVEL = #codelevel#
			</isNotEmpty>
            <!-- mantis：FIR0651，處理人員：DP0714，商住火65歲業務員高齡教育訓練檢核及APS例外設定 start -->
			<isNotEmpty prepend="AND" property="codeename">
				CODEENAME = #codeename#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="oldcodecode">
				OLDCODECODE = #oldcodecode#
			</isNotEmpty>
			<!-- mantis： HAS0254，處理人員：DP0706，需求單編號：HAS0254_傷害險中信銀行投調整信用卡加密及檔案上下傳START -->
			<isNotEmpty prepend="AND" property="codecname">
				CODECNAME = #codecname#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="validdate">
				VALIDDATE <![CDATA[>=]]> to_date(#validdate# , 'yyyy/mm/dd')
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="invaliddate">
				INVALIDDATE <![CDATA[<=]]> to_date(#invaliddate# , 'yyyy/mm/dd')
			</isNotEmpty>
			<!-- mantis： HAS0254，處理人員：DP0706，需求單編號：HAS0254_傷害險中信銀行投調整信用卡加密及檔案上下傳END -->
            <!-- mantis：FIR0651，處理人員：DP0714，商住火65歲業務員高齡教育訓練檢核及APS例外設定 end -->
		</dynamic>
	</select>
	
	<!-- mantis：Sales0024，處理人員：CC009，需求單編號：Sales0024 銷管系統-業務員登錄證到期提醒Mail與簡訊通知排程 start -->
	<update id="update" parameterClass="com.tlg.dms.entity.PrpdNewCode">
		update PRPDNEWCODE
		<dynamic prepend="set">
			<!-- mantis：FIR0651，處理人員：DP0714，商住火65歲業務員高齡教育訓練檢核及APS例外設定 (整段覆蓋) start -->
			<isNotEmpty prepend="," property="codecname">
				CODECNAME = #codecname#
			</isNotEmpty>
			<isNotEmpty prepend="," property="codeename">
				CODEENAME = #codeename#
			</isNotEmpty>
			<isNotEmpty prepend="," property="uppercode">
				UPPERCODE = #uppercode#
			</isNotEmpty>
			<isNotEmpty prepend="," property="oldcodecode">
				OLDCODECODE = #oldcodecode#
			</isNotEmpty>
			<isNotEmpty prepend="," property="validstatus">
				VALIDSTATUS = #validstatus#
			</isNotEmpty>
			<isNotEmpty prepend="," property="updateuser">
				UPDATEUSER = #updateuser#
			</isNotEmpty>
			<isNotEmpty prepend="," property="updatedate">
				UPDATEDATE = #updatedate#
			</isNotEmpty>
			<!-- mantis： HAS0254，處理人員：DP0706，需求單編號：HAS0254_傷害險中信銀行投調整信用卡加密及檔案上下傳START -->
			<isNotEmpty prepend="," property="validdate">
				VALIDDATE = #validdate#
			</isNotEmpty>
			<isNotEmpty prepend="," property="invaliddate">
				INVALIDDATE = #invaliddate#
			</isNotEmpty>
			<!-- mantis： HAS0254，處理人員：DP0706，需求單編號：HAS0254_傷害險中信銀行投調整信用卡加密及檔案上下傳END -->
			<!-- mantis：FIR0651，處理人員：DP0714，商住火65歲業務員高齡教育訓練檢核及APS例外設定 end -->
		</dynamic>
		where CODECODE = #codecode:VARCHAR# and CODETYPE = #codetype:VARCHAR#
	</update>
	<!-- mantis：Sales0024，處理人員：CC009，需求單編號：Sales0024 銷管系統-業務員登錄證到期提醒Mail與簡訊通知排程 end -->

    <!-- mantis：FIR0651，處理人員：DP0714，商住火65歲業務員高齡教育訓練檢核及APS例外設定 start -->
    <insert id="insert" parameterClass="com.tlg.dms.entity.PrpdNewCode">
        insert into PRPDNEWCODE (
          CODECODE, CODETYPE, CODECNAME, CODEENAME,
          UPPERCODE, OLDCODECODE, NEWCODECODE, COMMONFLAG,
          VALIDDATE, INVALIDDATE, VALIDSTATUS, FLAG,
          OLDCODETYPE, CODELEVEL, CODECDESC, CODEEDESC,
          AUDITFLAG, CODEBIGCODE, CODEMIDDLECODE, CODEBIGNAME,
          CODEMIDDLENAME, UPDATEUSER, UPDATEDATE, CREATEUSER,
          CREATEDATE
        ) values (
          #codecode:VARCHAR#, #codetype:VARCHAR#, #codecname:VARCHAR#, #codeename:VARCHAR#,
	      #uppercode:VARCHAR#, #oldcodecode:VARCHAR#, #newcodecode:VARCHAR#, #commonflag:VARCHAR#,
	      #validdate:TIMESTAMP#, #invaliddate:TIMESTAMP#, #validstatus:VARCHAR#, #flag:VARCHAR#,
	      #oldcodetype:VARCHAR#, #codelevel:VARCHAR#, #codecdesc:VARCHAR#, #codeedesc:VARCHAR#,
	      #auditflag:VARCHAR#, #codebigcode:VARCHAR#, #codemiddlecode:VARCHAR#, #codebigname:VARCHAR#,
	      #codemiddlename:VARCHAR#, #updateuser:VARCHAR#, #updatedate:TIMESTAMP#, #createuser:VARCHAR#,
	      #createdate:TIMESTAMP#
	    )
    </insert>
    <!-- mantis：FIR0651，處理人員：DP0714，商住火65歲業務員高齡教育訓練檢核及APS例外設定 end -->
<!-- mantis： HAS0254，處理人員：DP0706，需求單編號：HAS0254_傷害險中信銀行投調整信用卡加密及檔案上下傳 END -->
</sqlMap>