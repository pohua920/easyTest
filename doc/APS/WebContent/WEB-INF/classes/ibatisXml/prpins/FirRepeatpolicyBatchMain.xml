<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<!-- mantis：FIR0565，處理人員：CC009，需求單編號：FIR0565 住火_複保險通知轉檔作業 -->
<sqlMap namespace="FirRepeatpolicyBatchMain">
  <resultMap class="com.tlg.prpins.entity.FirRepeatpolicyBatchMain" id="BaseResultMap">
    <result column="BATCH_NO" jdbcType="VARCHAR" property="batchNo" />
    <result column="RP_YYYYMM" jdbcType="VARCHAR" property="rpYyyymm" />
    <result column="FILENAME" jdbcType="VARCHAR" property="filename" />
    <result column="DATA_QTY" jdbcType="DECIMAL" property="dataQty" />
    <result column="FILE_STATUS" jdbcType="VARCHAR" property="fileStatus" />
    <result column="REMARK" jdbcType="VARCHAR" property="remark" />
    <result column="ICREATE" jdbcType="VARCHAR" property="icreate" />
    <result column="DCREATE" jdbcType="TIMESTAMP" property="dcreate" />
    <result column="IUPDATE" jdbcType="VARCHAR" property="iupdate" />
    <result column="DUPDATE" jdbcType="TIMESTAMP" property="dupdate" />
  </resultMap>
  
  <select id="selectByParams" resultMap="BaseResultMap" parameterClass="java.util.Map">
		SELECT * FROM FIR_REPEATPOLICY_BATCH_MAIN
		<dynamic prepend="WHERE">
		<isNotNull prepend="AND" property="batchNo">
			BATCH_NO = #batchNo:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="rpYyyymm">
			RP_YYYYMM = #rpYyyymm:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="filename">
			FILENAME = #filename:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="dataQty">
			DATA_QTY = #dataQty:DECIMAL#
		</isNotNull>
		<isNotNull prepend="AND" property="fileStatus">
			FILE_STATUS = #fileStatus:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="remark">
			REMARK = #remark:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="icreate">
			ICREATE = #icreate:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="dcreate">
			DCREATE = #dcreate:TIMESTAMP#
		</isNotNull>
		<isNotNull prepend="AND" property="iupdate">
			IUPDATE = #iupdate:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="dupdate">
			DUPDATE = #dupdate:TIMESTAMP#
		</isNotNull>
		</dynamic>
	</select>
  
  <select id="select" parameterClass="java.util.Map" resultMap="BaseResultMap">
  	<include refid="Utils.sql1" />
    select *
    from FIR_REPEATPOLICY_BATCH_MAIN
    <dynamic prepend="WHERE">
      <isNotNull prepend="AND" property="batchNo">
		BATCH_NO = #batchNo:VARCHAR#
	  </isNotNull>
      <isNotNull prepend="AND" property="rpYyyymm">
        RP_YYYYMM = #rpYyyymm:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="filename">
        FILENAME = #filename:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="dataQty">
        DATA_QTY = #dataQty:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="fileStatus">
        FILE_STATUS = #fileStatus:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="remark">
        REMARK = #remark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="icreate">
        ICREATE = #icreate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="dcreate">
        DCREATE = #dcreate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="AND" property="iupdate">
        IUPDATE = #iupdate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="dupdate">
        DUPDATE = #dupdate:TIMESTAMP#
      </isNotNull>
    </dynamic>
    <include refid="Utils.sql2" />
  </select>
  
  <select id="selectByUK" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select *
    from FIR_REPEATPOLICY_BATCH_MAIN
    where BATCH_NO = #batchNo:VARCHAR#
  </select>
  
  <delete id="deleteByEntity" parameterClass="com.tlg.prpins.entity.FirRepeatpolicyBatchMain">
    delete from FIR_REPEATPOLICY_BATCH_MAIN
    where BATCH_NO = #batchNo:VARCHAR#
  </delete>
  
  <insert id="insert" parameterClass="com.tlg.prpins.entity.FirRepeatpolicyBatchMain">
    insert into FIR_REPEATPOLICY_BATCH_MAIN (BATCH_NO, RP_YYYYMM, FILENAME, DATA_QTY, 
      FILE_STATUS, REMARK, ICREATE, DCREATE, IUPDATE, 
      DUPDATE)
    values (#batchNo:VARCHAR#, #rpYyyymm:VARCHAR#, #filename:VARCHAR#, #dataQty:DECIMAL#, 
      #fileStatus:VARCHAR#, #remark:VARCHAR#, #icreate:VARCHAR#, #dcreate:TIMESTAMP#, #iupdate:VARCHAR#, 
      #dupdate:TIMESTAMP#)
  </insert>
  
  <select id="count" parameterClass="java.util.Map" resultClass="java.lang.Integer">
    select count(*) from FIR_REPEATPOLICY_BATCH_MAIN
    <dynamic prepend="WHERE">
      <isNotNull prepend="AND" property="batchNo">
		BATCH_NO = #batchNo:VARCHAR#
	  </isNotNull>
      <isNotNull prepend="AND" property="rpYyyymm">
        RP_YYYYMM = #rpYyyymm:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="filename">
        FILENAME = #filename:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="dataQty">
        DATA_QTY = #dataQty:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="fileStatus">
        FILE_STATUS = #fileStatus:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="remark">
        REMARK = #remark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="icreate">
        ICREATE = #icreate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="dcreate">
        DCREATE = #dcreate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="AND" property="iupdate">
        IUPDATE = #iupdate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="dupdate">
        DUPDATE = #dupdate:TIMESTAMP#
      </isNotNull>
    </dynamic>
  </select>
  
  <update id="update" parameterClass="com.tlg.prpins.entity.FirRepeatpolicyBatchMain">
    update FIR_REPEATPOLICY_BATCH_MAIN
    <dynamic prepend="set">
      <isNotNull prepend="AND" property="batchNo">
		BATCH_NO = #batchNo:VARCHAR#
	  </isNotNull>
      <isNotNull prepend="," property="rpYyyymm">
        RP_YYYYMM = #rpYyyymm:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="filename">
        FILENAME = #filename:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dataQty">
        DATA_QTY = #dataQty:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="fileStatus">
        FILE_STATUS = #fileStatus:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="remark">
        REMARK = #remark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="icreate">
        ICREATE = #icreate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dcreate">
        DCREATE = #dcreate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="iupdate">
        IUPDATE = #iupdate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dupdate">
        DUPDATE = #dupdate:TIMESTAMP#
      </isNotNull>
    </dynamic>
    where BATCH_NO = #batchNo:VARCHAR#
  </update>
</sqlMap>