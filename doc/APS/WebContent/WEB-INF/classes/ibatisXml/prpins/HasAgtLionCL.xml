<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<!--  mantis：HAS0215，處理人員：CD094，需求單編號：HAS0215 TA雄獅回饋檔 -->
<sqlMap namespace="HasAgtLionCL" >
  <resultMap id="BaseResultMap" class="com.tlg.prpins.entity.HasAgtLionCL" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jan 02 17:43:31 CST 2024.
    -->
    <result column="OID" property="oid" jdbcType="DECIMAL" />
    <result column="BATCH_NO" property="batchNo" jdbcType="VARCHAR" />
    <result column="POLICYNO" property="policyno" jdbcType="VARCHAR" />
    <result column="CLAIMNO" property="claimno" jdbcType="VARCHAR" />
    <result column="INSUREDCODE" property="insuredcode" jdbcType="VARCHAR" />
    <result column="APPLICODE" property="applicode" jdbcType="VARCHAR" />
    <result column="INSUREDIDENTITY" property="insuredidentity" jdbcType="VARCHAR" />
    <result column="KINDCODE" property="kindcode" jdbcType="VARCHAR" />
    <result column="DAMAGENAME" property="damagename" jdbcType="VARCHAR" />
    <result column="SUMTHISPAID" property="sumthispaid" jdbcType="DECIMAL" />
    <result column="CURRENCY" property="currency" jdbcType="VARCHAR" />
    <result column="OWNERSHIP" property="ownership" jdbcType="VARCHAR" />
    <result column="RECEIPTDATE" property="receiptdate" jdbcType="VARCHAR" />
    <result column="DAMAGESTARTDATE" property="damagestartdate" jdbcType="VARCHAR" />
    <result column="CLAIMDATE" property="claimdate" jdbcType="VARCHAR" />
    <result column="UNDERWRITEENDDATE" property="underwriteenddate" jdbcType="VARCHAR" />
    <result column="PAYDONE" property="paydone" jdbcType="VARCHAR" />
    <result column="PAYCOMMENT" property="paycomment" jdbcType="VARCHAR" />
    <result column="AGENTCODE" property="agentcode" jdbcType="VARCHAR" />
    <result column="COMPANYNO" property="companyno" jdbcType="VARCHAR" />
    <result column="AGENTORDERSEQ" property="agentorderseq" jdbcType="VARCHAR" />
    <result column="CLAIMTIMES" property="claimtimes" jdbcType="VARCHAR" />
  </resultMap>
    <select id="selectForGenFile" parameterClass="java.util.Map" resultMap="BaseResultMap">
  
  	select CL.* from HAS_AGT_LION_CL CL
	inner join HAS_AGT_BATCH_DTL DTL 
	on CL.BATCH_NO = DTL.BATCH_NO AND CL.POLICYNO=DTL.CORE_NO
	where CL.BATCH_NO = #batchNo# AND DTL.ORDERSEQ_STATUS IN ('01','02')
	order by CL.AGENTORDERSEQ
	
  </select>
  <select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select *
    from <include refid="Utils.prpinsSchema"/>HAS_AGT_LION_CL
    <dynamic prepend="WHERE">
    	<isNotEmpty prepend="AND" property="oid">
		OID = #oid:DECIMAL#
		</isNotEmpty>
      <isNotEmpty prepend="AND" property="batchNo">
        BATCH_NO = #batchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="riskcode">
        RISKCODE = #riskcode:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="policyno">
        POLICYNO = #policyno:VARCHAR#
      </isNotEmpty>
    </dynamic>
    <isNotEmpty property="sortBy">
		ORDER BY $sortBy$ $sortType$ 
	</isNotEmpty>
  </select>
  
  <select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map" >
  
    <include refid="Utils.sql1" />
    select * from <include refid="Utils.prpinsSchema"/>HAS_AGT_LION_CL
    <dynamic prepend="WHERE" >
      <isNotEmpty prepend="AND" property="oid">
		OID = #oid:DECIMAL#
		</isNotEmpty>
      <isNotEmpty prepend="AND" property="batchNo">
        BATCH_NO = #batchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="riskcode">
        RISKCODE = #riskcode:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="policyno">
        POLICYNO = #policyno:VARCHAR#
      </isNotEmpty>
      <include refid="Utils.sql2" />
    </dynamic>
  </select>
  <select id="selectByUK" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select *
    from <include refid="Utils.prpinsSchema"/>HAS_AGT_LION_CL
    where OID = #oid:DECIMAL#
  </select>
  
  <select id="count" parameterClass="java.util.Map" resultClass="java.lang.Integer">
    select count(*) from <include refid="Utils.prpinsSchema"/>HAS_AGT_LION_CL
    <dynamic prepend="WHERE">
      <isNotEmpty prepend="AND" property="batchNo">
        BATCH_NO = #batchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="riskcode">
        RISKCODE = #riskcode:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="policyno">
        POLICYNO = #policyno:VARCHAR#
      </isNotEmpty>
    
      <isNotEmpty prepend="AND" property="endorseno">
        ENDORSENO = #endorseno:VARCHAR#
      </isNotEmpty>
      
    </dynamic>
  </select>
  <insert id="insert" parameterClass="com.tlg.prpins.entity.HasAgtLionCL" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jan 02 17:43:31 CST 2024.
    -->
    insert into HAS_AGT_LION_CL (OID, BATCH_NO, POLICYNO, CLAIMNO, INSUREDCODE, APPLICODE,
      INSUREDIDENTITY, KINDCODE, DAMAGENAME, SUMTHISPAID, CURRENCY, OWNERSHIP, RECEIPTDATE,
      DAMAGESTARTDATE, CLAIMDATE, UNDERWRITEENDDATE, PAYDONE, PAYCOMMENT, AGENTCODE, COMPANYNO,
      AGENTORDERSEQ, CLAIMTIMES)
    values (#oid:DECIMAL#, #batchNo:VARCHAR#, #policyno:VARCHAR#, #claimno:VARCHAR#,
      #insuredcode:VARCHAR#, #applicode:VARCHAR#, #insuredidentity:VARCHAR#, #kindcode:VARCHAR#,
      #damagename:VARCHAR#, #sumthispaid:DECIMAL#, #currency:VARCHAR#, #ownership:VARCHAR#,
      #receiptdate:VARCHAR#, #damagestartdate:VARCHAR#, #claimdate:VARCHAR#,
      #underwriteenddate:VARCHAR#, #paydone:VARCHAR#, #paycomment:VARCHAR#, #agentcode:VARCHAR#,
      #companyno:VARCHAR#, #agentorderseq:VARCHAR#, #claimtimes:VARCHAR#)
  </insert>
  
  <update id="update" parameterClass="com.tlg.prpins.entity.HasAgtLionCL" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jan 02 17:43:31 CST 2024.
    -->
    update HAS_AGT_LION_CL
    <dynamic prepend="set" >
      <isNotNull prepend="," property="batchNo" >
        BATCH_NO = #batchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="policyno" >
        POLICYNO = #policyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="claimno" >
        CLAIMNO = #claimno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="insuredcode" >
        INSUREDCODE = #insuredcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="applicode" >
        APPLICODE = #applicode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="insuredidentity" >
        INSUREDIDENTITY = #insuredidentity:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="kindcode" >
        KINDCODE = #kindcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="damagename" >
        DAMAGENAME = #damagename:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sumthispaid" >
        SUMTHISPAID = #sumthispaid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="currency" >
        CURRENCY = #currency:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ownership" >
        OWNERSHIP = #ownership:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="receiptdate" >
        RECEIPTDATE = #receiptdate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="damagestartdate" >
        DAMAGESTARTDATE = #damagestartdate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="claimdate" >
        CLAIMDATE = #claimdate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="underwriteenddate" >
        UNDERWRITEENDDATE = #underwriteenddate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="paydone" >
        PAYDONE = #paydone:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="paycomment" >
        PAYCOMMENT = #paycomment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="agentcode" >
        AGENTCODE = #agentcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="companyno" >
        COMPANYNO = #companyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="agentorderseq" >
        AGENTORDERSEQ = #agentorderseq:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="claimtimes" >
        CLAIMTIMES = #claimtimes:VARCHAR#
      </isNotNull>
    </dynamic>
    where OID = #oid:DECIMAL#
  </update>
  
</sqlMap>