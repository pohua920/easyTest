<?xml version="1.0" encoding="UTF-8" ?>
<!-- mantis：FIR0579，處理人員：BJ085，需求單編號：FIR0579 保發中心-住火保批資料產生排程規格 -->
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="FirBatchTiiAddr" >
  <resultMap id="BaseResultMap" class="com.tlg.prpins.entity.FirBatchTiiAddr" >
    <result column="OID" property="oid" jdbcType="DECIMAL" />
    <result column="LIST_OID" property="listOid" jdbcType="DECIMAL" />
    <result column="POLICYNO" property="policyno" jdbcType="VARCHAR" />
    <result column="ENDORSENO" property="endorseno" jdbcType="VARCHAR" />
    <result column="ADDRESSNO" property="addressno" jdbcType="DECIMAL" />
    <result column="BUILDINGNO" property="buildingno" jdbcType="VARCHAR" />
    <result column="ADDR_DETAIL" property="addrDetail" jdbcType="VARCHAR" />
    <result column="WALL_NO" property="wallNo" jdbcType="VARCHAR" />
    <result column="BUILDYEARS" property="buildyears" jdbcType="VARCHAR" />
    <result column="BUILDAREA" property="buildarea" jdbcType="DECIMAL" />
    <result column="SUMFLOORS" property="sumfloors" jdbcType="DECIMAL" />
    <result column="STRUCTURE" property="structure" jdbcType="VARCHAR" />
    <result column="USINGNATURE" property="usingnature" jdbcType="VARCHAR" />
    <result column="AMOUNT_F1" property="amountF1" jdbcType="DECIMAL" />
    <result column="AMOUNT_F2" property="amountF2" jdbcType="DECIMAL" />
    <result column="AMOUNT_OTH" property="amountOth" jdbcType="DECIMAL" />
    <result column="AMOUNT_Q" property="amountQ" jdbcType="DECIMAL" />
    <result column="PREM_F1" property="premF1" jdbcType="DECIMAL" />
    <result column="PREM_OTH" property="premOth" jdbcType="DECIMAL" />
    <result column="PREM_Q" property="premQ" jdbcType="DECIMAL" />
    <result column="ICREATE" property="icreate" jdbcType="VARCHAR" />
    <result column="DCREATE" property="dcreate" jdbcType="TIMESTAMP" />
    <result column="AS400_OID" property="as400Oid" jdbcType="DECIMAL" />
  </resultMap>
  
  <select id="select" parameterClass="java.util.Map" resultMap="BaseResultMap">
  	<include refid="Utils.sql1" />
    select * from <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII_ADDR
    <dynamic prepend="WHERE">
	  <isNotNull prepend="AND" property="oid">
        OID = #oid:DECIMAL#
      </isNotNull> 
      <isNotNull prepend="AND" property="listOid">
        LIST_OID = #listOid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="as400Oid">
        AS400_OID = #as400Oid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="policyno">
        POLICYNO = #policyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="endorseno">
        ENDORSENO = #endorseno:VARCHAR#
      </isNotNull>
    </dynamic>
    <include refid="Utils.sql2" />
  </select>  
  
  <select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select * from <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII_ADDR
    <dynamic prepend="WHERE">
	  <isNotNull prepend="AND" property="oid">
        OID = #oid:DECIMAL#
      </isNotNull> 
      <isNotNull prepend="AND" property="listOid">
        LIST_OID = #listOid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="as400Oid">
        AS400_OID = #as400Oid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="policyno">
        POLICYNO = #policyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="endorseno">
        ENDORSENO = #endorseno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="ORDER BY" property="sortBy">
        #sortBy:VARCHAR#
      </isNotNull>
    </dynamic>
  </select>
  
  <select id="count" parameterClass="java.util.Map" resultClass="java.lang.Integer">
    select COUNT(*) from <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII_ADDR
    <dynamic prepend="WHERE">
	  <isNotNull prepend="AND" property="oid">
        OID = #oid:DECIMAL#
      </isNotNull> 
      <isNotNull prepend="AND" property="listOid">
        LIST_OID = #listOid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="as400Oid">
        AS400_OID = #as400Oid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="policyno">
        POLICYNO = #policyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="endorseno">
        ENDORSENO = #endorseno:VARCHAR#
      </isNotNull>
    </dynamic>
  </select>

  <delete id="delete" parameterClass="com.tlg.prpins.entity.FirBatchTiiAddr" >
    delete from <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII_ADDR
    where OID = #oid:DECIMAL#
  </delete>
  
  <insert id="insert" parameterClass="com.tlg.prpins.entity.FirBatchTiiAddr" >
    <selectKey resultClass="java.math.BigDecimal" keyProperty="oid" >    
	  SELECT FIR_BATCH_TII_ADDR_SEQ.NEXTVAL AS OID FROM DUAL    
	</selectKey>
    insert into <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII_ADDR 
      (OID, LIST_OID, POLICYNO, ENDORSENO, ADDRESSNO, BUILDINGNO,
      ADDR_DETAIL, WALL_NO, BUILDYEARS, BUILDAREA, SUMFLOORS, STRUCTURE, USINGNATURE, AMOUNT_F1,
      AMOUNT_F2, AMOUNT_OTH, AMOUNT_Q, PREM_F1, PREM_OTH, PREM_Q, ICREATE, DCREATE, AS400_OID)
    values (#oid:DECIMAL#, #listOid:DECIMAL#, #policyno:VARCHAR#, #endorseno:VARCHAR#,
      #addressno:DECIMAL#, #buildingno:VARCHAR#, #addrDetail:VARCHAR#, #wallNo:VARCHAR#,
      #buildyears:VARCHAR#, #buildarea:DECIMAL#, #sumfloors:DECIMAL#, #structure:VARCHAR#,
      #usingnature:VARCHAR#, #amountF1:DECIMAL#, #amountF2:DECIMAL#, #amountOth:DECIMAL#,
      #amountQ:DECIMAL#, #premF1:DECIMAL#, #premOth:DECIMAL#, #premQ:DECIMAL#, #icreate:VARCHAR#,
      #dcreate:TIMESTAMP#, #as400Oid:DECIMAL#)
  </insert>

  <update id="update" parameterClass="com.tlg.prpins.entity.FirBatchTiiAddr" >
    update <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII_ADDR
    <dynamic prepend="set" >
      <isNotNull prepend="," property="listOid" >
        LIST_OID = #listOid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="policyno" >
        POLICYNO = #policyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="endorseno" >
        ENDORSENO = #endorseno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="addressno" >
        ADDRESSNO = #addressno:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="buildingno" >
        BUILDINGNO = #buildingno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="addrDetail" >
        ADDR_DETAIL = #addrDetail:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="wallNo" >
        WALL_NO = #wallNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="buildyears" >
        BUILDYEARS = #buildyears:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="buildarea" >
        BUILDAREA = #buildarea:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="sumfloors" >
        SUMFLOORS = #sumfloors:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="structure" >
        STRUCTURE = #structure:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="usingnature" >
        USINGNATURE = #usingnature:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="amountF1" >
        AMOUNT_F1 = #amountF1:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="amountF2" >
        AMOUNT_F2 = #amountF2:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="amountOth" >
        AMOUNT_OTH = #amountOth:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="amountQ" >
        AMOUNT_Q = #amountQ:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="premF1" >
        PREM_F1 = #premF1:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="premOth" >
        PREM_OTH = #premOth:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="premQ" >
        PREM_Q = #premQ:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="icreate" >
        ICREATE = #icreate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dcreate" >
        DCREATE = #dcreate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="as400Oid" >
        AS400_OID = #as400Oid:DECIMAL#
      </isNotNull>
    </dynamic>
    where OID = #oid:DECIMAL#
  </update>
</sqlMap>