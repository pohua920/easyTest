<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<!-- mantis：CAR0417，處理人員：BJ085，需求單編號：CAR0417 機車強制車險重新投保發對接功能 -->
<sqlMap namespace="Renewalnotice" >
  <resultMap id="BaseResultMap" class="com.tlg.prpins.entity.Renewalnotice" >
    <result column="POLICYNO" property="policyno" jdbcType="VARCHAR" />
    <result column="USENATURECODE" property="usenaturecode" jdbcType="VARCHAR" />
    <result column="ENDDATE" property="enddate" jdbcType="TIMESTAMP" />
    <result column="NOTICETIMES" property="noticetimes" jdbcType="VARCHAR" />
    <result column="TCOL" property="tcol" jdbcType="VARCHAR" />
    <result column="TCOL2" property="tcol2" jdbcType="VARCHAR" />
    <result column="OPERATEDATE" property="operatedate" jdbcType="TIMESTAMP" />
    <result column="FILENAME" property="filename" jdbcType="VARCHAR" />
    <result column="BUSINESSNATURE" property="businessnature" jdbcType="VARCHAR" />
    <result column="HANDLERCODE" property="handlercode" jdbcType="VARCHAR" />
    <result column="PRINTNO" property="printno" jdbcType="VARCHAR" />
    <result column="BATCHNO" property="batchno" jdbcType="VARCHAR" />
  </resultMap>
  
  <select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map">
  	<include refid="Utils.sql1" />
  	SELECT * FROM <include refid="Utils.prpinsSchema"/>RENEWALNOTICE
  	<dynamic prepend="WHERE">
  		<isNotEmpty prepend="AND" property="policyno">
  			POLICYNO = #policyno#
		</isNotEmpty>
  		<isNotEmpty prepend="AND" property="filename">
  			FILENAME = #filename#
		</isNotEmpty>
  		<isNotEmpty prepend="AND" property="printno">
  			PRINTNO = #printno#
		</isNotEmpty>
	</dynamic>
	<include refid="Utils.sql2" />
  </select>

  <select id="selectByParams" resultMap="BaseResultMap" parameterClass="java.util.Map">
	SELECT * FROM <include refid="Utils.prpinsSchema"/>RENEWALNOTICE
	<dynamic prepend="WHERE">
  		<isNotEmpty prepend="AND" property="policyno">
  			POLICYNO = #policyno#
		</isNotEmpty>
  		<isNotEmpty prepend="AND" property="filename">
  			FILENAME = #filename#
		</isNotEmpty>
  		<isNotEmpty prepend="AND" property="printno">
  			PRINTNO = #printno#
		</isNotEmpty>
	</dynamic>
  </select>
	
  <select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
	SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema"/>RENEWALNOTICE
	<dynamic prepend="WHERE">
  		<isNotEmpty prepend="AND" property="policyno">
  			POLICYNO = #policyno#
		</isNotEmpty>
  		<isNotEmpty prepend="AND" property="filename">
  			FILENAME = #filename#
		</isNotEmpty>
  		<isNotEmpty prepend="AND" property="printno">
  			PRINTNO = #printno#
		</isNotEmpty>
	</dynamic>
  </select>
  
  <delete id="delete" parameterClass="com.tlg.prpins.entity.Renewalnotice" >
    delete from <include refid="Utils.prpinsSchema"/>RENEWALNOTICE
    where FILENAME = #filename:VARCHAR#
    and PRINTNO = #printno:VARCHAR#
  </delete>
  
  <insert id="insert" parameterClass="com.tlg.prpins.entity.Renewalnotice" >
    insert into <include refid="Utils.prpinsSchema"/>RENEWALNOTICE 
    (POLICYNO, USENATURECODE, ENDDATE, NOTICETIMES, TCOL, TCOL2,
      OPERATEDATE, FILENAME, BUSINESSNATURE, HANDLERCODE, PRINTNO, BATCHNO)
    values (#policyno:VARCHAR#, #usenaturecode:VARCHAR#, #enddate:TIMESTAMP#, #noticetimes:VARCHAR#,
      #tcol:VARCHAR#, #tcol2:VARCHAR#, #operatedate:TIMESTAMP#, #filename:VARCHAR#,
      #businessnature:VARCHAR#, #handlercode:VARCHAR#, #printno:VARCHAR#, #batchno:VARCHAR#)
  </insert>

  <update id="update" parameterClass="com.tlg.prpins.entity.Renewalnotice" >
    update <include refid="Utils.prpinsSchema"/>RENEWALNOTICE
    <dynamic prepend="set" >
      <isNotNull prepend="," property="policyno" >
        POLICYNO = #policyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="usenaturecode" >
        USENATURECODE = #usenaturecode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="enddate" >
        ENDDATE = #enddate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="noticetimes" >
        NOTICETIMES = #noticetimes:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="tcol" >
        TCOL = #tcol:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="tcol2" >
        TCOL2 = #tcol2:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="operatedate" >
        OPERATEDATE = #operatedate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="filename" >
        FILENAME = #filename:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="businessnature" >
        BUSINESSNATURE = #businessnature:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="handlercode" >
        HANDLERCODE = #handlercode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="printno" >
        PRINTNO = #printno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="batchno" >
        BATCHNO = #batchno:VARCHAR#
      </isNotNull>
    </dynamic>
    where FILENAME = #filename:VARCHAR#
    and PRINTNO = #printno:VARCHAR#
  </update>
  
</sqlMap>