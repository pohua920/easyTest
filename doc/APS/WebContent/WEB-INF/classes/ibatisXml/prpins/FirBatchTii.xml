<?xml version="1.0" encoding="UTF-8" ?>
<!-- mantis：FIR0579，處理人員：BJ085，需求單編號：FIR0579 保發中心-住火保批資料產生排程規格 -->
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="FirBatchTii" >
  <resultMap id="BaseResultMap" class="com.tlg.prpins.entity.FirBatchTii" >
    <result column="BATCH_NO" property="batchNo" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="VARCHAR" />
    <result column="QTY_TII" property="qtyTii" jdbcType="DECIMAL" />
    <result column="FILENAME_TII" property="filenameTii" jdbcType="VARCHAR" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="ICREATE" property="icreate" jdbcType="VARCHAR" />
    <result column="DCREATE" property="dcreate" jdbcType="TIMESTAMP" />
    <result column="IUPDATE" property="iupdate" jdbcType="VARCHAR" />
    <result column="DUPDATE" property="dupdate" jdbcType="TIMESTAMP" />
  </resultMap>
  
  <select id="select" parameterClass="java.util.Map" resultMap="BaseResultMap">
  	<include refid="Utils.sql1" />
    select * from <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII
    <dynamic prepend="WHERE">
      <isNotNull prepend="AND" property="status">
        BATCH_NO = #batchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="policyno">
        STATUS = #status:VARCHAR#
      </isNotNull>
    </dynamic>
    <include refid="Utils.sql2" />
  </select>  
  
  <select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select * from <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII
	<dynamic prepend="WHERE">
      <isNotNull prepend="AND" property="status">
        BATCH_NO = #batchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="policyno">
        STATUS = #status:VARCHAR#
      </isNotNull>
    </dynamic>
  </select>
  
  <select id="count" parameterClass="java.util.Map" resultClass="java.lang.Integer">
    select COUNT(*) from <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII
    <dynamic prepend="WHERE">
      <isNotNull prepend="AND" property="status">
        BATCH_NO = #batchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="policyno">
        STATUS = #status:VARCHAR#
      </isNotNull>
    </dynamic>
  </select>  
  
  <select id="countByUK" resultClass="java.lang.Integer" parameterClass="com.tlg.prpins.entity.FirBatchTii" >
	select COUNT(*) from <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII
	where BATCH_NO = #batchNo:VARCHAR#
  </select>	
  
  <select id="selectByUK" resultMap="BaseResultMap" parameterClass="java.util.Map" >
	select * from FIR_BATCH_TII
	where BATCH_NO = #batchNo:VARCHAR#
  </select>

  <delete id="deleteByEntity" parameterClass="com.tlg.prpins.entity.FirBatchTii" >
    delete from <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII
    where BATCH_NO = #batchNo:VARCHAR#
  </delete>
  
  <insert id="insert" parameterClass="com.tlg.prpins.entity.FirBatchTii" >
    insert into <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII 
      (BATCH_NO, STATUS, QTY_TII, FILENAME_TII, REMARK, ICREATE, DCREATE,
      IUPDATE, DUPDATE)
    values (#batchNo:VARCHAR#, #status:VARCHAR#, #qtyTii:DECIMAL#, #filenameTii:VARCHAR#,
      #remark:VARCHAR#, #icreate:VARCHAR#, #dcreate:TIMESTAMP#, #iupdate:VARCHAR#,
      #dupdate:TIMESTAMP#)
  </insert>
  
  <update id="update" parameterClass="com.tlg.prpins.entity.FirBatchTii" >
    update <include refid="Utils.prpinsSchema"/>FIR_BATCH_TII
    <dynamic prepend="set" >
      <isNotNull prepend="," property="status" >
        STATUS = #status:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="qtyTii" >
        QTY_TII = #qtyTii:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="filenameTii" >
        FILENAME_TII = #filenameTii:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="icreate" >
        ICREATE = #icreate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dcreate" >
        DCREATE = #dcreate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="iupdate" >
        IUPDATE = #iupdate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dupdate" >
        DUPDATE = #dupdate:TIMESTAMP#
      </isNotNull>
    </dynamic>
    where BATCH_NO = #batchNo:VARCHAR#
  </update>
</sqlMap>