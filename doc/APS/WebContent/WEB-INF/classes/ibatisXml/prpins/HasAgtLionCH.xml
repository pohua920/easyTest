<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<!--  mantis：HAS0215，處理人員：CD094，需求單編號：HAS0215 TA雄獅回饋檔 -->
<sqlMap namespace="HasAgtLionCH" >
  <resultMap id="BaseResultMap" class="com.tlg.prpins.entity.HasAgtLionCH" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jan 02 11:24:55 CST 2024.
    -->
    <result column="OID" property="oid" jdbcType="DECIMAL" />
    <result column="BATCH_NO" property="batchNo" jdbcType="VARCHAR" />
    <result column="COMPANYNO" property="companyno" jdbcType="VARCHAR" />
    <result column="PECTYPE" property="pectype" jdbcType="VARCHAR" />
    <result column="RISKCODE" property="riskcode" jdbcType="VARCHAR" />
    <result column="AGENTORDERSEQ" property="agentorderseq" jdbcType="VARCHAR" />
    <result column="POLICYNO" property="policyno" jdbcType="VARCHAR" />
    <result column="ENDORSENO" property="endorseno" jdbcType="VARCHAR" />
    <result column="OPERATEDATE" property="operatedate" jdbcType="VARCHAR" />
    <result column="STARTDATE" property="startdate" jdbcType="VARCHAR" />
    <result column="ENDDATE" property="enddate" jdbcType="VARCHAR" />
    <result column="APPLINAME" property="appliname" jdbcType="VARCHAR" />
    <result column="APPLICODE" property="applicode" jdbcType="VARCHAR" />
    <result column="INSUREDNAME" property="insuredname" jdbcType="VARCHAR" />
    <result column="INSUREDCODE" property="insuredcode" jdbcType="VARCHAR" />
    <result column="SUBBUSINESSNATURE" property="subbusinessnature" jdbcType="VARCHAR" />
    <result column="HANDLER1CODE" property="handler1code" jdbcType="VARCHAR" />
    <result column="SUMPREMIUM" property="sumpremium" jdbcType="DECIMAL" />
    <result column="SUMDISCOUNT" property="sumdiscount" jdbcType="DECIMAL" />
    <result column="FYCFEE" property="fycfee" jdbcType="DECIMAL" />
    <result column="SERVICEFEE" property="servicefee" jdbcType="DECIMAL" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="INTRODUCERID" property="introducerid" jdbcType="VARCHAR" />
    <result column="PAYMENT_NO" property="paymentNo" jdbcType="VARCHAR" />
    <result column="PAYMENT_TOTAL" property="paymentTotal" jdbcType="DECIMAL" />
    <result column="SERIESCODE" property="seriescode" jdbcType="VARCHAR" />
    <result column="LICENSENO" property="licenseno" jdbcType="VARCHAR" />
    <result column="ACCOUNT1" property="account1" jdbcType="VARCHAR" />
    <result column="DEBITACCOUNT" property="debitaccount" jdbcType="VARCHAR" />
    <result column="SITENAME" property="sitename" jdbcType="VARCHAR" />
    <result column="STARTSITE" property="startsite" jdbcType="VARCHAR" />
    <result column="ENDSITE" property="endsite" jdbcType="VARCHAR" />
    <result column="INVOICENO" property="invoiceno" jdbcType="VARCHAR" />
    <result column="BUSINESSNATURE" property="businessnature" jdbcType="VARCHAR" />
    <result column="RENEWFLAG" property="renewflag" jdbcType="VARCHAR" />
    <result column="OLD_POLICYNO" property="oldPolicyno" jdbcType="VARCHAR" />
    <result column="BIRTHDAY" property="birthday" jdbcType="VARCHAR" />
    <result column="EMAIL" property="email" jdbcType="VARCHAR" />
    <result column="FROMTYPE" property="fromtype" jdbcType="VARCHAR" />
    <result column="POSTADDRESS" property="postaddress" jdbcType="VARCHAR" />
    <result column="PHONETELENUMBER" property="phonetelenumber" jdbcType="VARCHAR" />
    <result column="MOBILE" property="mobile" jdbcType="VARCHAR" />
    <result column="AMOUNT" property="amount" jdbcType="DECIMAL" />
    <result column="AMOUNT_UNIT" property="amountUnit" jdbcType="VARCHAR" />
    <result column="OTHFLAG" property="othflag" jdbcType="VARCHAR" />
    <!--mantis：HAS0272，處理人員：DP0706，處理人員：DP0706，TA雄獅回饋檔新增欄位 -->
    <result column="TOTALINSUREDNO" property="totalinsuredno" jdbcType="VARCHAR" />
    
  </resultMap>
  
  <select id="selectForGenFile" parameterClass="java.util.Map" resultMap="BaseResultMap">
  
  	select CH.* from HAS_AGT_LION_CH CH
	inner join HAS_AGT_BATCH_DTL DTL 
	on CH.BATCH_NO = DTL.BATCH_NO AND CH.REMARK = DTL.ORDERSEQ  AND CH.POLICYNO=DTL.CORE_NO
	where CH.BATCH_NO = #batchNo# AND DTL.ORDERSEQ_STATUS IN ('01','02')
	order by CH.AGENTORDERSEQ, CH.RISKCODE
	
  </select>
  
  <select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select *
    from <include refid="Utils.prpinsSchema"/>HAS_AGT_LION_CH
    <dynamic prepend="WHERE">
    	<isNotEmpty prepend="AND" property="oid">
		OID = #oid:DECIMAL#
		</isNotEmpty>
      <isNotEmpty prepend="AND" property="batchNo">
        BATCH_NO = #batchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="riskcode">
        RISKCODE = #riskcode:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="policyno">
        POLICYNO = #policyno:VARCHAR#
      </isNotEmpty>
    </dynamic>
    <isNotEmpty property="sortBy">
		ORDER BY $sortBy$ $sortType$ 
	</isNotEmpty>
  </select>
  
  <select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map" >
  
    <include refid="Utils.sql1" />
    select * from <include refid="Utils.prpinsSchema"/>HAS_AGT_LION_CH
    <dynamic prepend="WHERE" >
      <isNotEmpty prepend="AND" property="oid">
		OID = #oid:DECIMAL#
		</isNotEmpty>
      <isNotEmpty prepend="AND" property="batchNo">
        BATCH_NO = #batchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="riskcode">
        RISKCODE = #riskcode:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="policyno">
        POLICYNO = #policyno:VARCHAR#
      </isNotEmpty>
      <include refid="Utils.sql2" />
    </dynamic>
  </select>
  <select id="selectByUK" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select *
    from <include refid="Utils.prpinsSchema"/>HAS_AGT_LION_CH
    where OID = #oid:DECIMAL#
  </select>
  
  <select id="count" parameterClass="java.util.Map" resultClass="java.lang.Integer">
    select count(*) from <include refid="Utils.prpinsSchema"/>HAS_AGT_LION_CH
    <dynamic prepend="WHERE">
      <isNotEmpty prepend="AND" property="batchNo">
        BATCH_NO = #batchNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="riskcode">
        RISKCODE = #riskcode:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="AND" property="policyno">
        POLICYNO = #policyno:VARCHAR#
      </isNotEmpty>
    
      <isNotEmpty prepend="AND" property="endorseno">
        ENDORSENO = #endorseno:VARCHAR#
      </isNotEmpty>
      
    </dynamic>
  </select>
  
  <insert id="insert" parameterClass="com.tlg.prpins.entity.HasAgtLionCH" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jan 02 11:24:55 CST 2024.
    -->
    <!--mantis：HAS0272，處理人員：DP0706，處理人員：DP0706，TA雄獅回饋檔新增欄位 START-->
    insert into HAS_AGT_LION_CH (OID, BATCH_NO, COMPANYNO, PECTYPE, RISKCODE, AGENTORDERSEQ,
      POLICYNO, ENDORSENO, OPERATEDATE, STARTDATE, ENDDATE, APPLINAME, APPLICODE, INSUREDNAME,
      INSUREDCODE, SUBBUSINESSNATURE, HANDLER1CODE, SUMPREMIUM, SUMDISCOUNT, FYCFEE, SERVICEFEE,
      REMARK, INTRODUCERID, PAYMENT_NO, PAYMENT_TOTAL, SERIESCODE, LICENSENO, ACCOUNT1,
      DEBITACCOUNT, SITENAME, STARTSITE, ENDSITE, INVOICENO, BUSINESSNATURE, RENEWFLAG,
      OLD_POLICYNO, BIRTHDAY, EMAIL, FROMTYPE, POSTADDRESS, PHONETELENUMBER, MOBILE, AMOUNT,
      AMOUNT_UNIT, OTHFLAG, TOTALINSUREDNO)
    values (#oid:DECIMAL#, #batchNo:VARCHAR#, #companyno:VARCHAR#, #pectype:VARCHAR#,
      #riskcode:VARCHAR#, #agentorderseq:VARCHAR#, #policyno:VARCHAR#, #endorseno:VARCHAR#,
      #operatedate:VARCHAR#, #startdate:VARCHAR#, #enddate:VARCHAR#, #appliname:VARCHAR#,
      #applicode:VARCHAR#, #insuredname:VARCHAR#, #insuredcode:VARCHAR#,
      #subbusinessnature:VARCHAR#, #handler1code:VARCHAR#, #sumpremium:DECIMAL#,
      #sumdiscount:DECIMAL#, #fycfee:DECIMAL#, #servicefee:DECIMAL#, #remark:VARCHAR#,
      #introducerid:VARCHAR#, #paymentNo:VARCHAR#, #paymentTotal:DECIMAL#, #seriescode:VARCHAR#,
      #licenseno:VARCHAR#, #account1:VARCHAR#, #debitaccount:VARCHAR#, #sitename:VARCHAR#,
      #startsite:VARCHAR#, #endsite:VARCHAR#, #invoiceno:VARCHAR#, #businessnature:VARCHAR#,
      #renewflag:VARCHAR#, #oldPolicyno:VARCHAR#, #birthday:VARCHAR#, #email:VARCHAR#,
      #fromtype:VARCHAR#, #postaddress:VARCHAR#, #phonetelenumber:VARCHAR#, #mobile:VARCHAR#,
      #amount:DECIMAL#, #amountUnit:VARCHAR#, #othflag:VARCHAR#, #totalinsuredno:VARCHAR#)
      <!--mantis：HAS0272，處理人員：DP0706，處理人員：DP0706，TA雄獅回饋檔新增欄位END -->
  </insert>
  
  
  <update id="update" parameterClass="com.tlg.prpins.entity.HasAgtLionCH" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jan 02 11:24:55 CST 2024.
    -->
    update HAS_AGT_LION_CH
    <dynamic prepend="set" >
      <isNotNull prepend="," property="batchNo" >
        BATCH_NO = #batchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="companyno" >
        COMPANYNO = #companyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="pectype" >
        PECTYPE = #pectype:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="riskcode" >
        RISKCODE = #riskcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="agentorderseq" >
        AGENTORDERSEQ = #agentorderseq:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="policyno" >
        POLICYNO = #policyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="endorseno" >
        ENDORSENO = #endorseno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="operatedate" >
        OPERATEDATE = #operatedate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="startdate" >
        STARTDATE = #startdate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="enddate" >
        ENDDATE = #enddate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="appliname" >
        APPLINAME = #appliname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="applicode" >
        APPLICODE = #applicode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="insuredname" >
        INSUREDNAME = #insuredname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="insuredcode" >
        INSUREDCODE = #insuredcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="subbusinessnature" >
        SUBBUSINESSNATURE = #subbusinessnature:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="handler1code" >
        HANDLER1CODE = #handler1code:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sumpremium" >
        SUMPREMIUM = #sumpremium:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="sumdiscount" >
        SUMDISCOUNT = #sumdiscount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="fycfee" >
        FYCFEE = #fycfee:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="servicefee" >
        SERVICEFEE = #servicefee:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="introducerid" >
        INTRODUCERID = #introducerid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="paymentNo" >
        PAYMENT_NO = #paymentNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="paymentTotal" >
        PAYMENT_TOTAL = #paymentTotal:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="seriescode" >
        SERIESCODE = #seriescode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="licenseno" >
        LICENSENO = #licenseno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="account1" >
        ACCOUNT1 = #account1:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="debitaccount" >
        DEBITACCOUNT = #debitaccount:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sitename" >
        SITENAME = #sitename:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="startsite" >
        STARTSITE = #startsite:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="endsite" >
        ENDSITE = #endsite:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="invoiceno" >
        INVOICENO = #invoiceno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="businessnature" >
        BUSINESSNATURE = #businessnature:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="renewflag" >
        RENEWFLAG = #renewflag:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="oldPolicyno" >
        OLD_POLICYNO = #oldPolicyno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="birthday" >
        BIRTHDAY = #birthday:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="email" >
        EMAIL = #email:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fromtype" >
        FROMTYPE = #fromtype:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="postaddress" >
        POSTADDRESS = #postaddress:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="phonetelenumber" >
        PHONETELENUMBER = #phonetelenumber:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="mobile" >
        MOBILE = #mobile:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="amount" >
        AMOUNT = #amount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="amountUnit" >
        AMOUNT_UNIT = #amountUnit:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="othflag" >
        OTHFLAG = #othflag:VARCHAR#
      </isNotNull>
      <!--mantis：HAS0272，處理人員：DP0706，處理人員：DP0706，TA雄獅回饋檔新增欄位 -->
      <isNotNull prepend="," property="totalinsuredno" >
        TOTALINSUREDNO = #TOTALINSUREDNO:VARCHAR#
      </isNotNull>
    </dynamic>
    where OID = #oid:DECIMAL#
  </update>
  
</sqlMap>