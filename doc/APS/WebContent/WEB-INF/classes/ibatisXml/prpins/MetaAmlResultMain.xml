<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<!-- 
mantis：OTH0065，處理人員：BJ085，需求單編號：OTH0065 建置AML洗錢查詢畫面 start
-->
<sqlMap namespace="MetaAmlResultMain">

	<resultMap id="BaseResultMap" class="com.tlg.prpins.entity.MetaAmlResultMain" >
	    <result column="OID" property="oid" jdbcType="DECIMAL" />
	    <result column="SCREEN_CODE" property="screenCode" jdbcType="VARCHAR" />
	    <result column="SCREEN_MESSAGE" property="screenMessage" jdbcType="VARCHAR" />
	    <result column="WLF_SCREEN_ENTRYID" property="wlfScreenEntryid" jdbcType="VARCHAR" />
	    <result column="WLF_SCREEN_DATE" property="wlfScreenDate" jdbcType="VARCHAR" />
	    <result column="WLF_CASE_ID" property="wlfCaseId" jdbcType="VARCHAR" />
	    <result column="WLF_CASE_AFFILIATE" property="wlfCaseAffiliate" jdbcType="VARCHAR" />
	    <result column="WLF_CASE_USER" property="wlfCaseUser" jdbcType="VARCHAR" />
	    <result column="WLF_CASE_RESULT" property="wlfCaseResult" jdbcType="VARCHAR" />
	    <result column="WLF_CASE_STATUS" property="wlfCaseStatus" jdbcType="VARCHAR" />
	    <result column="CREATETIME" jdbcType="TIMESTAMP" property="createtime" />
		<result column="WORK_STATUS" property="workStatus" jdbcType="VARCHAR" />
    	<result column="REFUSE_LIMIT_INSURANCE" property="refuseLimitInsurance" jdbcType="VARCHAR" />
    	<result column="RISK_RATING" property="riskRating" jdbcType="VARCHAR" />
    	<result column="LIST_DETECTION" property="listDetection" jdbcType="VARCHAR" />
	    <result column="CLASS_CODE" jdbcType="VARCHAR" property="classCode" />
	    <result column="COM_CODE" jdbcType="VARCHAR" property="comCode" />
	    <result column="TYPE" jdbcType="VARCHAR" property="type" />
	    <result column="APP_CODE" jdbcType="VARCHAR" property="appCode" />
	    <result column="BUSINESS_NO" jdbcType="VARCHAR" property="businessNo" />
	    <result column="RISK_CODE" jdbcType="VARCHAR" property="riskCode" />
	    <result column="OID_AML_QUERY_OBJ_MAIN" property="oidAmlQueryObjMain" jdbcType="DECIMAL" />
	</resultMap>

	<select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map">
		<include refid="Utils.sql1" />
		SELECT * FROM <include refid="Utils.prpinsSchema"/>META_AML_RESULT_MAIN
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="oid">
				OID = #oid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="screenCode">
				SCREEN_CODE = #screenCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="wlfScreenEntryid">
				WLF_SCREEN_ENTRYID = #wlfScreenEntryid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="wlfCaseId">
				WLF_CASE_ID = #wlfCaseId#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="wlfCaseAffiliate">
				WLF_CASE_AFFILIATE = #wlfCaseAffiliate#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="businessNo">
				BUSINESS_NO = #businessNo#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="appCode">
				APP_CODE = #appCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="type">
				TYPE = #type#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="classCode">
				CLASS_CODE = #classCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="riskCode">
				RISK_CODE = #riskCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="oidAmlQueryObjMain">
				OID_AML_QUERY_OBJ_MAIN = #oidAmlQueryObjMain#
			</isNotEmpty>
		</dynamic>
		<include refid="Utils.sql2" />
	</select>

	<select id="selectByParams" resultMap="BaseResultMap" parameterClass="java.util.Map">
		SELECT * FROM <include refid="Utils.prpinsSchema"/>META_AML_RESULT_MAIN
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="oid">
				OID = #oid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="screenCode">
				SCREEN_CODE = #screenCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="wlfScreenEntryid">
				WLF_SCREEN_ENTRYID = #wlfScreenEntryid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="wlfCaseId">
				WLF_CASE_ID = #wlfCaseId#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="wlfCaseAffiliate">
				WLF_CASE_AFFILIATE = #wlfCaseAffiliate#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="businessNo">
				BUSINESS_NO = #businessNo#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="appCode">
				APP_CODE = #appCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="type">
				TYPE = #type#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="classCode">
				CLASS_CODE = #classCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="riskCode">
				RISK_CODE = #riskCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="oidAmlQueryObjMain">
				OID_AML_QUERY_OBJ_MAIN = #oidAmlQueryObjMain#
			</isNotEmpty>
		</dynamic>
	</select>
 	
	<select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
		SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema"/>META_AML_RESULT_MAIN
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="oid">
				OID = #oid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="screenCode">
				SCREEN_CODE = #screenCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="wlfScreenEntryid">
				WLF_SCREEN_ENTRYID = #wlfScreenEntryid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="wlfCaseId">
				WLF_CASE_ID = #wlfCaseId#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="wlfCaseAffiliate">
				WLF_CASE_AFFILIATE = #wlfCaseAffiliate#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="businessNo">
				BUSINESS_NO = #businessNo#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="appCode">
				APP_CODE = #appCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="type">
				TYPE = #type#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="classCode">
				CLASS_CODE = #classCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="riskCode">
				RISK_CODE = #riskCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="oidAmlQueryObjMain">
				OID_AML_QUERY_OBJ_MAIN = #oidAmlQueryObjMain#
			</isNotEmpty>
		</dynamic>
	</select>

	<insert id="insert" parameterClass="com.tlg.prpins.entity.MetaAmlResultMain" >

      	
		<selectKey resultClass="java.math.BigDecimal" keyProperty="oid" >    
	       SELECT META_AML_RESULT_MAIN_SEQ.NEXTVAL AS OID FROM DUAL    
	    </selectKey>
     	
		INSERT INTO <include refid="Utils.prpinsSchema"/>META_AML_RESULT_MAIN (OID, SCREEN_CODE, SCREEN_MESSAGE, WLF_SCREEN_ENTRYID,
      	WLF_SCREEN_DATE, WLF_CASE_ID, WLF_CASE_AFFILIATE, WLF_CASE_USER, WLF_CASE_RESULT,
      	WLF_CASE_STATUS, CREATETIME, WORK_STATUS, REFUSE_LIMIT_INSURANCE, RISK_RATING, LIST_DETECTION,
      	CLASS_CODE, COM_CODE, TYPE, APP_CODE, BUSINESS_NO, RISK_CODE, OID_AML_QUERY_OBJ_MAIN)
    	values (#oid:DECIMAL#, #screenCode:VARCHAR#, #screenMessage:VARCHAR#,
      	#wlfScreenEntryid:VARCHAR#, #wlfScreenDate:VARCHAR#, #wlfCaseId:VARCHAR#,
      	#wlfCaseAffiliate:VARCHAR#, #wlfCaseUser:VARCHAR#, #wlfCaseResult:VARCHAR#,
      	#wlfCaseStatus:VARCHAR#, #createtime:TIMESTAMP#, #workStatus:VARCHAR#,
      	#refuseLimitInsurance:VARCHAR#, #riskRating:VARCHAR#, #listDetection:VARCHAR#,
      	#classCode:VARCHAR#, #comCode:VARCHAR#, #type:VARCHAR#, #appCode:VARCHAR#,
      	#businessNo:VARCHAR#, #riskCode:VARCHAR#, #oidAmlQueryObjMain:DECIMAL#)
      	
	</insert>

	<delete id="delete" parameterClass="java.math.BigDecimal" >
		DELETE FROM <include refid="Utils.prpinsSchema"/>META_AML_RESULT_MAIN WHERE OID = #oid:DECIMAL#
	</delete>

	<update id="update" parameterClass="com.tlg.prpins.entity.MetaAmlResultMain">
		UPDATE
		<include refid="Utils.prpinsSchema" />
		META_AML_RESULT_MAIN
		<dynamic prepend="set">
			<isNotNull prepend="," property="screenCode">
				SCREEN_CODE =
				#screenCode:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="screenMessage">
				SCREEN_MESSAGE =
				#screenMessage:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="wlfScreenEntryid">
				WLF_SCREEN_ENTRYID =
				#wlfScreenEntryid:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="wlfScreenDate">
				WLF_SCREEN_DATE =
				#wlfScreenDate:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="wlfCaseId">
				WLF_CASE_ID =
				#wlfCaseId:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="wlfCaseAffiliate">
				WLF_CASE_AFFILIATE =
				#wlfCaseAffiliate:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="wlfCaseUser">
				WLF_CASE_USER =
				#wlfCaseUser:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="wlfCaseResult">
				WLF_CASE_RESULT =
				#wlfCaseResult:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="wlfCaseStatus">
				WLF_CASE_STATUS =
				#wlfCaseStatus:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="workStatus">
				WORK_STATUS =
				#workStatus:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="refuseLimitInsurance">
				REFUSE_LIMIT_INSURANCE =
				#refuseLimitInsurance:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="riskRating">
				RISK_RATING =
				#riskRating:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="listDetection">
				LIST_DETECTION =
				#listDetection:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="classCode">
				CLASS_CODE = #classCode:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="comCode">
				COM_CODE = #comCode:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="type">
				TYPE = #type:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="appCode">
				APP_CODE = #appCode:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="businessNo">
				BUSINESS_NO = #businessNo:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="riskCode">
				RISK_CODE = #riskCode:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="oidAmlQueryObjMain">
				OID_AML_QUERY_OBJ_MAIN = #oidAmlQueryObjMain:DECIMAL#
			</isNotNull>
		</dynamic>
		WHERE OID = #oid:DECIMAL#
	</update>

</sqlMap>