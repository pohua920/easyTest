<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="Prpcinsured">
  <resultMap class="com.tlg.prpins.entity.Prpcinsured" id="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 22 17:24:54 CST 2021.
    -->
    <result column="POLICYNO" jdbcType="VARCHAR" property="policyno" />
    <result column="SERIALNO" jdbcType="DECIMAL" property="serialno" />
    <result column="RISKCODE" jdbcType="VARCHAR" property="riskcode" />
    <result column="LANGUAGE" jdbcType="VARCHAR" property="language" />
    <result column="INSUREDTYPE" jdbcType="VARCHAR" property="insuredtype" />
    <result column="INSUREDCODE" jdbcType="VARCHAR" property="insuredcode" />
    <result column="INSUREDNAME" jdbcType="VARCHAR" property="insuredname" />
    <result column="INSUREDADDRESS" jdbcType="VARCHAR" property="insuredaddress" />
    <result column="INSUREDNATURE" jdbcType="VARCHAR" property="insurednature" />
    <result column="INSUREDFLAG" jdbcType="VARCHAR" property="insuredflag" />
    <result column="INSUREDIDENTITY" jdbcType="VARCHAR" property="insuredidentity" />
    <result column="RELATESERIALNO" jdbcType="DECIMAL" property="relateserialno" />
    <result column="IDENTIFYTYPE" jdbcType="VARCHAR" property="identifytype" />
    <result column="IDENTIFYNUMBER" jdbcType="VARCHAR" property="identifynumber" />
    <result column="CREDITLEVEL" jdbcType="VARCHAR" property="creditlevel" />
    <result column="POSSESSNATURE" jdbcType="VARCHAR" property="possessnature" />
    <result column="BUSINESSSOURCE" jdbcType="VARCHAR" property="businesssource" />
    <result column="BUSINESSSORT" jdbcType="VARCHAR" property="businesssort" />
    <result column="OCCUPATIONCODE" jdbcType="VARCHAR" property="occupationcode" />
    <result column="EDUCATIONCODE" jdbcType="VARCHAR" property="educationcode" />
    <result column="BANK" jdbcType="VARCHAR" property="bank" />
    <result column="ACCOUNTNAME" jdbcType="VARCHAR" property="accountname" />
    <result column="ACCOUNT" jdbcType="VARCHAR" property="account" />
    <result column="LINKERNAME" jdbcType="VARCHAR" property="linkername" />
    <result column="POSTADDRESS" jdbcType="VARCHAR" property="postaddress" />
    <result column="POSTCODE" jdbcType="VARCHAR" property="postcode" />
    <result column="PHONENUMBER" jdbcType="VARCHAR" property="phonenumber" />
    <result column="MOBILE" jdbcType="VARCHAR" property="mobile" />
    <result column="EMAIL" jdbcType="VARCHAR" property="email" />
    <result column="BENEFITRATE" jdbcType="DECIMAL" property="benefitrate" />
    <result column="BENEFITFLAG" jdbcType="VARCHAR" property="benefitflag" />
    <result column="FLAG" jdbcType="VARCHAR" property="flag" />
    <result column="OCCUPATIONGRADE" jdbcType="VARCHAR" property="occupationgrade" />
    <result column="INSUREDSORT" jdbcType="VARCHAR" property="insuredsort" />
    <result column="BENEFITTYPE" jdbcType="VARCHAR" property="benefittype" />
    <result column="NATIONFLAG" jdbcType="VARCHAR" property="nationflag" />
    <result column="INSUREDIDENTITY1" jdbcType="VARCHAR" property="insuredidentity1" />
    <result column="CREDITNUMBER" jdbcType="VARCHAR" property="creditnumber" />
    <result column="COLLATERALNUMBER" jdbcType="VARCHAR" property="collateralnumber" />
    <result column="LOANSBEHALFNUMBER" jdbcType="VARCHAR" property="loansbehalfnumber" />
    <result column="LOANSDEPARTMENT" jdbcType="VARCHAR" property="loansdepartment" />
    <result column="INSUREDIDVNOTE" jdbcType="VARCHAR" property="insuredidvnote" />
    <result column="CHARGEOBJECT" jdbcType="VARCHAR" property="chargeobject" />
    <result column="CHARGEADDRESS" jdbcType="VARCHAR" property="chargeaddress" />
    <result column="FAX" jdbcType="VARCHAR" property="fax" />
    <result column="CHINESENAME" jdbcType="VARCHAR" property="chinesename" />
    <result column="ENGLISHNAME" jdbcType="VARCHAR" property="englishname" />
    <result column="CHARGEADDRESSCODE" jdbcType="VARCHAR" property="chargeaddresscode" />
    <result column="OPNO" jdbcType="VARCHAR" property="opno" />
    <result column="INSURANTNUMBER" jdbcType="VARCHAR" property="insurantnumber" />
    <result column="UNITCODE" jdbcType="VARCHAR" property="unitcode" />
    <result column="DISEASENAME" jdbcType="VARCHAR" property="diseasename" />
    <result column="DISEASETYPE" jdbcType="VARCHAR" property="diseasetype" />
    <result column="SEQUENCENO" jdbcType="VARCHAR" property="sequenceno" />
    <result column="PAYPROPORTION" jdbcType="VARCHAR" property="payproportion" />
    <result column="BANKCODE1" jdbcType="VARCHAR" property="bankcode1" />
    <result column="BANKCODE2" jdbcType="VARCHAR" property="bankcode2" />
    <result column="CERTIFIVALIDTIME" jdbcType="TIMESTAMP" property="certifivalidtime" />
    <result column="CERTIFIENDTIME" jdbcType="TIMESTAMP" property="certifiendtime" />
    <result column="IDENTITYKIND" jdbcType="VARCHAR" property="identitykind" />
    <result column="NATIONALITYADDRESS" jdbcType="VARCHAR" property="nationalityaddress" />
    <result column="PHONEAREANUMBER" jdbcType="VARCHAR" property="phoneareanumber" />
    <result column="PHONEEXTNUMBER" jdbcType="VARCHAR" property="phoneextnumber" />
    <result column="LOCALNO" jdbcType="VARCHAR" property="localno" />
    <result column="LOCALNAME" jdbcType="VARCHAR" property="localname" />
    <result column="PAYKIND" jdbcType="VARCHAR" property="paykind" />
    <result column="PAYTIMESPERYEAR" jdbcType="DECIMAL" property="paytimesperyear" />
    <result column="PAYENDDATE" jdbcType="TIMESTAMP" property="payenddate" />
    <result column="TERRORISTSAMOUNT" jdbcType="DECIMAL" property="terroristsamount" />
    <result column="TERRORISTSPREMIUM" jdbcType="DECIMAL" property="terroristspremium" />
    <result column="TOGETHERDEALFLAG" jdbcType="VARCHAR" property="togetherdealflag" />
    <result column="INNO" jdbcType="VARCHAR" property="inno" />
    <result column="WRITEOFFNO" jdbcType="VARCHAR" property="writeoffno" />
    <result column="APPLYCOUNTS" jdbcType="DECIMAL" property="applycounts" />
    <result column="REMARK" jdbcType="VARCHAR" property="remark" />
    <result column="PAYMENTCODE" jdbcType="VARCHAR" property="paymentcode" />
    <result column="PHONETELENUMBER" jdbcType="VARCHAR" property="phonetelenumber" />
    <result column="PAYMENTMETHOD" jdbcType="VARCHAR" property="paymentmethod" />
    <result column="OTHINSFLAG" jdbcType="VARCHAR" property="othinsflag" />
    <result column="WRITEOFFDATE" jdbcType="TIMESTAMP" property="writeoffdate" />
    <result column="MAINIDENTIFYNUMBER" jdbcType="VARCHAR" property="mainidentifynumber" />
    <result column="SOCIALSECURITY" jdbcType="VARCHAR" property="socialsecurity" />
    <result column="POSITIONCODE" jdbcType="VARCHAR" property="positioncode" />
    <result column="MAINSCHEME" jdbcType="VARCHAR" property="mainscheme" />
    <result column="ADDITIONALSCHEME" jdbcType="VARCHAR" property="additionalscheme" />
    <result column="DEPARTMENT" jdbcType="VARCHAR" property="department" />
    <result column="EMPLOYEENO" jdbcType="VARCHAR" property="employeeno" />
    <result column="INJURYFLAG" jdbcType="VARCHAR" property="injuryflag" />
    <result column="MEDICALFLAG" jdbcType="VARCHAR" property="medicalflag" />
    <result column="DISCERTIFICATEFLAG" jdbcType="VARCHAR" property="discertificateflag" />
    <result column="DISGRADES" jdbcType="VARCHAR" property="disgrades" />
    <result column="DISEASECODE" jdbcType="VARCHAR" property="diseasecode" />
    <result column="DISEASEREMARK" jdbcType="VARCHAR" property="diseaseremark" />
    <result column="TOTALINSUREDNO" jdbcType="VARCHAR" property="totalinsuredno" />
    <result column="BEARER" jdbcType="VARCHAR" property="bearer" />
    <result column="INSUREDRELATETOMAININSURED" jdbcType="VARCHAR" property="insuredrelatetomaininsured" />
    <result column="BENEFITNOTE" jdbcType="VARCHAR" property="benefitnote" />
    <result column="ROOMPOSTCODE" jdbcType="VARCHAR" property="roompostcode" />
    <result column="ROOMADDRESS" jdbcType="VARCHAR" property="roomaddress" />
    <result column="BUSINESSSOURCENAME" jdbcType="VARCHAR" property="businesssourcename" />
    <result column="VERIFYNUMBER" jdbcType="VARCHAR" property="verifynumber" />
    <result column="LOANACCOUNT" jdbcType="VARCHAR" property="loanaccount" />
    <result column="HEADNAME" jdbcType="VARCHAR" property="headname" />
    <result column="HEADIDENTIFYNUMBER" jdbcType="VARCHAR" property="headidentifynumber" />
    <result column="MAINSCHEMECODE" jdbcType="VARCHAR" property="mainschemecode" />
    <result column="MAINSCHEMENAME" jdbcType="VARCHAR" property="mainschemename" />
    <result column="ADDITIONALSCHEMECODE" jdbcType="VARCHAR" property="additionalschemecode" />
    <result column="ADDITIONALSCHEMENAME" jdbcType="VARCHAR" property="additionalschemename" />
    <result column="TRAVELAREA" jdbcType="VARCHAR" property="travelarea" />
    <result column="TRAVELPALCE" jdbcType="VARCHAR" property="travelpalce" />
    <result column="TRAVELPALCEA" jdbcType="VARCHAR" property="travelpalcea" />
    <result column="UNITPHONEAREANO" jdbcType="VARCHAR" property="unitphoneareano" />
    <result column="UNITPHONENUMBER" jdbcType="VARCHAR" property="unitphonenumber" />
    <result column="UNITPHONEEXTNO" jdbcType="VARCHAR" property="unitphoneextno" />
    <result column="BUSINESSCODESUB" jdbcType="VARCHAR" property="businesscodesub" />
    <result column="STARTDATE" jdbcType="TIMESTAMP" property="startdate" />
    <result column="ENDDATE" jdbcType="TIMESTAMP" property="enddate" />
    <result column="COUNTRYENAME" jdbcType="VARCHAR" property="countryename" />
    <result column="COUNTRYCNAME" jdbcType="VARCHAR" property="countrycname" />
    <result column="ISHIGHDENGEROCCUPATION" jdbcType="VARCHAR" property="ishighdengeroccupation" />
    <result column="DOMICILE" jdbcType="VARCHAR" property="domicile" />
    <result column="REGISTDATE" jdbcType="TIMESTAMP" property="registdate" />
    <result column="LISTEDCABINETCOMPANY" jdbcType="VARCHAR" property="listedcabinetcompany" />
    <result column="COMMODITYRISKGRADE" jdbcType="VARCHAR" property="commodityriskgrade" />
    <result column="WORKSTATUS" jdbcType="VARCHAR" property="workstatus" />
    <result column="DOMICILECNAME" jdbcType="VARCHAR" property="domicilecname" />
    <result column="GUARDIANSHIP" jdbcType="VARCHAR" property="guardianship" />
    <result column="RRPREINSURED" jdbcType="VARCHAR" property="rrpreinsured" />
    <result column="RRPREIDNUMBER" jdbcType="VARCHAR" property="rrpreidnumber" />
    <result column="RRPREIDTYPE" jdbcType="VARCHAR" property="rrpreidtype" />
    <result column="RRPREIDENTIFY" jdbcType="VARCHAR" property="rrpreidentify" />
    <result column="RRPRECOUNTRYENAME" jdbcType="VARCHAR" property="rrprecountryename" />
    <result column="RRPRECOUNTRYCNAME" jdbcType="VARCHAR" property="rrprecountrycname" />
  </resultMap>
  
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 22 17:24:54 CST 2021.
    -->
    POLICYNO, SERIALNO, RISKCODE, LANGUAGE, INSUREDTYPE, INSUREDCODE, INSUREDNAME, INSUREDADDRESS, 
    INSUREDNATURE, INSUREDFLAG, INSUREDIDENTITY, RELATESERIALNO, IDENTIFYTYPE, IDENTIFYNUMBER, 
    CREDITLEVEL, POSSESSNATURE, BUSINESSSOURCE, BUSINESSSORT, OCCUPATIONCODE, EDUCATIONCODE, 
    BANK, ACCOUNTNAME, ACCOUNT, LINKERNAME, POSTADDRESS, POSTCODE, PHONENUMBER, MOBILE, 
    EMAIL, BENEFITRATE, BENEFITFLAG, FLAG, OCCUPATIONGRADE, INSUREDSORT, BENEFITTYPE, 
    NATIONFLAG, INSUREDIDENTITY1, CREDITNUMBER, COLLATERALNUMBER, LOANSBEHALFNUMBER, 
    LOANSDEPARTMENT, INSUREDIDVNOTE, CHARGEOBJECT, CHARGEADDRESS, FAX, CHINESENAME, ENGLISHNAME, 
    CHARGEADDRESSCODE, OPNO, INSURANTNUMBER, UNITCODE, DISEASENAME, DISEASETYPE, SEQUENCENO, 
    PAYPROPORTION, BANKCODE1, BANKCODE2, CERTIFIVALIDTIME, CERTIFIENDTIME, IDENTITYKIND, 
    NATIONALITYADDRESS, PHONEAREANUMBER, PHONEEXTNUMBER, LOCALNO, LOCALNAME, PAYKIND, 
    PAYTIMESPERYEAR, PAYENDDATE, TERRORISTSAMOUNT, TERRORISTSPREMIUM, TOGETHERDEALFLAG, 
    INNO, WRITEOFFNO, APPLYCOUNTS, REMARK, PAYMENTCODE, PHONETELENUMBER, PAYMENTMETHOD, 
    OTHINSFLAG, WRITEOFFDATE, MAINIDENTIFYNUMBER, SOCIALSECURITY, POSITIONCODE, MAINSCHEME, 
    ADDITIONALSCHEME, DEPARTMENT, EMPLOYEENO, INJURYFLAG, MEDICALFLAG, DISCERTIFICATEFLAG, 
    DISGRADES, DISEASECODE, DISEASEREMARK, TOTALINSUREDNO, BEARER, INSUREDRELATETOMAININSURED, 
    BENEFITNOTE, ROOMPOSTCODE, ROOMADDRESS, BUSINESSSOURCENAME, VERIFYNUMBER, LOANACCOUNT, 
    HEADNAME, HEADIDENTIFYNUMBER, MAINSCHEMECODE, MAINSCHEMENAME, ADDITIONALSCHEMECODE, 
    ADDITIONALSCHEMENAME, TRAVELAREA, TRAVELPALCE, TRAVELPALCEA, UNITPHONEAREANO, UNITPHONENUMBER, 
    UNITPHONEEXTNO, BUSINESSCODESUB, STARTDATE, ENDDATE, COUNTRYENAME, COUNTRYCNAME, 
    ISHIGHDENGEROCCUPATION, DOMICILE, REGISTDATE, LISTEDCABINETCOMPANY, COMMODITYRISKGRADE, 
    WORKSTATUS, DOMICILECNAME, GUARDIANSHIP, RRPREINSURED, RRPREIDNUMBER, RRPREIDTYPE, 
    RRPREIDENTIFY, RRPRECOUNTRYENAME, RRPRECOUNTRYCNAME
  </sql>
  
  <select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">
  	select 
    <include refid="Prpcinsured.Base_Column_List" />
    from PRPCINSURED
    <dynamic prepend="WHERE">
    	<isNotEmpty prepend="AND" property="policyno">
    		POLICYNO = #policyno#
    	</isNotEmpty>
    	<isNotEmpty prepend="AND" property="insuredflag">
    		INSUREDFLAG = #insuredflag#
    	</isNotEmpty>
    	<isNotEmpty property="sortBy">
			ORDER BY $sortBy$ $sortType$ 
		</isNotEmpty>
    </dynamic>
  </select>
  
  <select id="selectByPrimaryKey" parameterClass="com.tlg.prpins.entity.Prpcinsured" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 22 17:24:54 CST 2021.
    -->
    select 
    <include refid="Prpcinsured.Base_Column_List" />
    from PRPCINSURED
    where POLICYNO = #policyno:VARCHAR#
      and SERIALNO = #serialno:DECIMAL#
  </select>
  
  <!-- mantis：FIR0589，處理人員：BJ085，需求單編號：FIR0589 住火_APS板信續保作業_第二年優化_資料接收排程 start -->
  <resultMap class="com.tlg.aps.vo.FirPahsinRenewalVo" id="PanhsinCoreInsuredResultMap">
   <result column="IDENTIFYNUMBER" jdbcType="VARCHAR" property="identifynumber" />
   <result column="POSTCODE" jdbcType="VARCHAR" property="postcode" />
   <result column="BIRTHDAY" jdbcType="TIMESTAMP" property="birthday" />
   <result column="INSUREDNAME" jdbcType="VARCHAR" property="insuredname" />
  </resultMap>
  
  <select id="selectForPanhsinCoreInsured" parameterClass="java.util.Map" resultMap="PanhsinCoreInsuredResultMap">
    SELECT PI.IDENTIFYNUMBER, PI.POSTCODE, PIN.BIRTHDAY, PI.INSUREDNAME
    FROM PRPCINSURED PI
    LEFT JOIN PRPCINSUREDNATURE PIN ON PI.POLICYNO = PIN.POLICYNO AND PI.SERIALNO = PIN.SERIALNO
    WHERE PI.RISKCODE = 'F02'
    AND PI.POLICYNO = #policyno:VARCHAR#
    AND PI.INSUREDFLAG = #insuredflag:VARCHAR#
    AND PI.INSUREDNATURE = '3'
	UNION ALL
	SELECT PI.IDENTIFYNUMBER, PI.POSTCODE, PI.REGISTDATE AS BIRTHDAY, PI.INSUREDNAME
	FROM PRPCINSURED PI
	LEFT JOIN PRPCINSUREDARTIF PIN ON PI.POLICYNO = PIN.POLICYNO AND PI.SERIALNO = PIN.SERIALNO
	WHERE PI.RISKCODE = 'F02'
	AND PI.POLICYNO = #policyno:VARCHAR#
	AND PI.INSUREDFLAG = #insuredflag:VARCHAR#
	AND PI.INSUREDNATURE = '4'
  </select>
  <!-- mantis：FIR0589，處理人員：BJ085，需求單編號：FIR0589 住火_APS板信續保作業_第二年優化_資料接收排程 end -->
</sqlMap>