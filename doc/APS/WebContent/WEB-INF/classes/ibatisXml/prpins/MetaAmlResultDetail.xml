<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<!-- 
mantis：OTH0065，處理人員：BJ085，需求單編號：OTH0065 建置AML洗錢查詢畫面 start
-->
<sqlMap namespace="MetaAmlResultDetail">

	<resultMap id="BaseResultMap" class="com.tlg.prpins.entity.MetaAmlResultDetail">
		<result column="OID" jdbcType="DECIMAL" property="oid" />
		<result column="OID_META_AML_RESULT_MAIN" jdbcType="DECIMAL" property="oidMetaAmlResultMain" />
		<result column="SCREEN_SEQ" jdbcType="DECIMAL" property="screenSeq" />
		<result column="WLF_SCREEN_RESULT" jdbcType="VARCHAR" property="wlfScreenResult" />
		<result column="WLF_SCREEN_LIST" jdbcType="VARCHAR" property="wlfScreenList" />
		<result column="CRR_SCREEN_ENTRYID" jdbcType="VARCHAR" property="crrScreenEntryid" />
		<result column="CRR_CRR_RESULT" jdbcType="VARCHAR" property="crrCrrResult" />
		<result column="CREATETIME" jdbcType="TIMESTAMP" property="createtime" />
	</resultMap>

	<select id="select" resultMap="BaseResultMap" parameterClass="java.util.Map">
		<include refid="Utils.sql1" />
		SELECT * FROM <include refid="Utils.prpinsSchema"/>META_AML_RESULT_DETAIL
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="oid">
				OID = #oid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="oidMetaAmlResultMain">
				OID_META_AML_RESULT_MAIN = #oidMetaAmlResultMain#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="screenSeq">
				SCREEN_SEQ = #screenSeq#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="crrScreenEntryid">
				CRR_SCREEN_ENTRYID = #crrScreenEntryid#
			</isNotEmpty>
		</dynamic>
		<include refid="Utils.sql2" />
	</select>

	<select id="selectByParams" resultMap="BaseResultMap" parameterClass="java.util.Map">
		SELECT * FROM <include refid="Utils.prpinsSchema"/>META_AML_RESULT_DETAIL
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="oid">
				OID = #oid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="oidMetaAmlResultMain">
				OID_META_AML_RESULT_MAIN = #oidMetaAmlResultMain#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="screenSeq">
				SCREEN_SEQ = #screenSeq#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="crrScreenEntryid">
				CRR_SCREEN_ENTRYID = #crrScreenEntryid#
			</isNotEmpty>
		</dynamic>
	</select>
 	
	<select id="count" resultClass="java.lang.Integer" parameterClass="java.util.Map">
		SELECT COUNT(*) FROM <include refid="Utils.prpinsSchema"/>META_AML_RESULT_DETAIL
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="oid">
				OID = #oid#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="oidMetaAmlResultMain">
				OID_META_AML_RESULT_MAIN = #oidMetaAmlResultMain#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="screenSeq">
				SCREEN_SEQ = #screenSeq#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="crrScreenEntryid">
				CRR_SCREEN_ENTRYID = #crrScreenEntryid#
			</isNotEmpty>
		</dynamic>
	</select>

	<insert id="insert" parameterClass="com.tlg.prpins.entity.MetaAmlResultDetail" >

      	
		<selectKey resultClass="java.math.BigDecimal" keyProperty="oid" >    
	       SELECT META_AML_RESULT_DETAIL_SEQ.NEXTVAL AS OID FROM DUAL    
	    </selectKey>
      	
      	INSERT INTO <include refid="Utils.prpinsSchema"/>META_AML_RESULT_DETAIL (OID, OID_META_AML_RESULT_MAIN, SCREEN_SEQ,
      WLF_SCREEN_RESULT, WLF_SCREEN_LIST, CRR_SCREEN_ENTRYID, CRR_CRR_RESULT, CREATETIME)
    values (#oid:DECIMAL#, #oidMetaAmlResultMain:DECIMAL#, #screenSeq:DECIMAL#,
      #wlfScreenResult:VARCHAR#, #wlfScreenList:VARCHAR#, #crrScreenEntryid:VARCHAR#,
      #crrCrrResult:VARCHAR#, #createtime:TIMESTAMP#)
      	
	</insert>

	<delete id="delete" parameterClass="java.math.BigDecimal" >
		DELETE FROM <include refid="Utils.prpinsSchema"/>META_AML_RESULT_DETAIL WHERE OID = #oid:DECIMAL#
	</delete>

	<update id="update" parameterClass="com.tlg.prpins.entity.MetaAmlResultDetail">
		UPDATE
		<include refid="Utils.prpinsSchema" />
		META_AML_RESULT_DETAIL
		<dynamic prepend="set">
			<isNotNull prepend="," property="oid">
				OID = #oid:DECIMAL#
			</isNotNull>
			<isNotNull prepend="," property="oidMetaAmlResultMain">
				OID_META_AML_RESULT_MAIN = #oidMetaAmlResultMain:DECIMAL#
			</isNotNull>
			<isNotNull prepend="," property="screenSeq">
				SCREEN_SEQ = #screenSeq:DECIMAL#
			</isNotNull>
			<isNotNull prepend="," property="wlfScreenResult">
				WLF_SCREEN_RESULT = #wlfScreenResult:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="wlfScreenList">
				WLF_SCREEN_LIST = #wlfScreenList:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="crrScreenEntryid">
				CRR_SCREEN_ENTRYID = #crrScreenEntryid:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="crrCrrResult">
				CRR_CRR_RESULT = #crrCrrResult:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="createtime">
				CREATETIME = #createtime:TIMESTAMP#
			</isNotNull>
		</dynamic>
		WHERE OID = #oid:DECIMAL#
	</update>

</sqlMap>