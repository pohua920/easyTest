<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<!-- mantis：MOB0018，處理人員：BJ085，需求單編號：MOB0018 理賠資料提交及列印作業 -->
<sqlMap namespace="Tmpfetclaimcomm" >
  <resultMap id="BaseResultMap" class="com.tlg.prpins.entity.Tmpfetclaimcomm" >
    <result column="OID" property="oid" jdbcType="DECIMAL" />
    <result column="WDF00" property="wdf00" jdbcType="DECIMAL" />
    <result column="WDF01" property="wdf01" jdbcType="VARCHAR" />
    <result column="WDF02" property="wdf02" jdbcType="VARCHAR" />
    <result column="WDF03" property="wdf03" jdbcType="VARCHAR" />
    <result column="WDF04" property="wdf04" jdbcType="DECIMAL" />
    <result column="WDF05" property="wdf05" jdbcType="VARCHAR" />
    <result column="WDF06" property="wdf06" jdbcType="VARCHAR" />
    <result column="WDF07" property="wdf07" jdbcType="VARCHAR" />
    <result column="WDF09" property="wdf09" jdbcType="TIMESTAMP" />
    <result column="DRAWOUTDATE" property="drawoutdate" jdbcType="TIMESTAMP" />
    <result column="DATASOURCE" property="datasource" jdbcType="VARCHAR" />
    <result column="FLOWID" property="flowid" jdbcType="VARCHAR" />
    <result column="REGISTNO" property="registno" jdbcType="VARCHAR" />
  </resultMap>

  <select id="select" parameterClass="java.util.Map" resultMap="BaseResultMap">
  	<include refid="Utils.sql1" />
    select * from <include refid="Utils.prpinsSchema"/>TMPFETCLAIMCOMM
    <dynamic prepend="WHERE">
      <isNotNull prepend="AND" property="oid">
        OID = #oid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="wda00">
        WDF00 = #wdf00:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="wda01">
        WDF01 = #wdf01:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="wdf02">
        WDF02 = #wdf02:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="wdf03">
        WDF03 = #wdf03:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="wdf06">
        WDF06 = #wdf06:VARCHAR#
      </isNotNull>
    </dynamic>
    <include refid="Utils.sql2" />
  </select>
  
  <select id="selectByParams" parameterClass="java.util.Map" resultMap="BaseResultMap">
    select * from <include refid="Utils.prpinsSchema"/>TMPFETCLAIMCOMM
    <dynamic prepend="WHERE">
      <isNotNull prepend="AND" property="oid">
        OID = #oid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="wda00">
        WDF00 = #wdf00:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="wda01">
        WDF01 = #wdf01:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="wdf02">
        WDF02 = #wdf02:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="wdf03">
        WDF03 = #wdf03:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="wdf06">
        WDF06 = #wdf06:VARCHAR#
      </isNotNull>
    </dynamic>
  </select>
  
  <select id="count" parameterClass="java.util.Map" resultClass="java.lang.Integer">
    select COUNT(*) from <include refid="Utils.prpinsSchema"/>TMPFETCLAIMCOMM
    <dynamic prepend="WHERE">
      <isNotNull prepend="AND" property="oid">
        OID = #oid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="wda00">
        WDF00 = #wdf00:DECIMAL#
      </isNotNull>
      <isNotNull prepend="AND" property="wda01">
        WDF01 = #wdf01:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="wdf02">
        WDF02 = #wdf02:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="wdf03">
        WDF03 = #wdf03:VARCHAR#
      </isNotNull>
      <isNotNull prepend="AND" property="wdf06">
        WDF06 = #wdf06:VARCHAR#
      </isNotNull>
      <!--mantis：MOB0017，處理人員：BI086，需求單編號：MOB0017 行動裝置險理賠資料轉入作業 start-->
      <isEqual prepend="AND" property="checkAllStatus" compareValue="Y">
        WDF06 IN ('3','4')
      </isEqual>
      <!--mantis：MOB0017，處理人員：BI086，需求單編號：MOB0017 行動裝置險理賠資料轉入作業 end-->
    </dynamic>
  </select> 

  <delete id="delete" parameterClass="java.math.BigDecimal" >
    delete from <include refid="Utils.prpinsSchema"/>TMPFETCLAIMCOMM
    where OID = #oid:DECIMAL#
  </delete>
  <!--mantis：MOB0017，處理人員：BI086，需求單編號：MOB0017 行動裝置險理賠資料轉入作業 start-->
  <delete id="deleteAll" >
    delete from <include refid="Utils.prpinsSchema"/>TMPFETCLAIMCOMM
  </delete>
  <!--mantis：MOB0017，處理人員：BI086，需求單編號：MOB0017 行動裝置險理賠資料轉入作業 end-->
  <insert id="insert" parameterClass="com.tlg.prpins.entity.Tmpfetclaimcomm" >
    <selectKey resultClass="java.math.BigDecimal" keyProperty="oid" >    
	  SELECT TFETCOMM_SEQ.NEXTVAL AS OID FROM DUAL    
    </selectKey>
    insert into <include refid="Utils.prpinsSchema"/>TMPFETCLAIMCOMM 
      (OID, WDF00, WDF01, WDF02, WDF03, WDF04, WDF05, WDF06, WDF07, WDF09,
      DRAWOUTDATE, DATASOURCE, FLOWID, REGISTNO)
    values (#oid:DECIMAL#, #wdf00:DECIMAL#, #wdf01:VARCHAR#, #wdf02:VARCHAR#, #wdf03:VARCHAR#,
      #wdf04:DECIMAL#, #wdf05:VARCHAR#, #wdf06:VARCHAR#, #wdf07:VARCHAR#, #wdf09:TIMESTAMP#,
      #drawoutdate:TIMESTAMP#, #datasource:VARCHAR#, #flowid:VARCHAR#, #registno:VARCHAR#)
  </insert>
 
  <update id="update" >
    update <include refid="Utils.prpinsSchema"/>TMPFETCLAIMCOMM
    <dynamic prepend="set" >
      <isNotNull prepend="," property="wdf00" >
        WDF00 = #wdf00:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="wdf01" >
        WDF01 = #wdf01:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="wdf02" >
        WDF02 = #wdf02:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="wdf03" >
        WDF03 = #wdf03:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="wdf04" >
        WDF04 = #wdf04:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="wdf05" >
        WDF05 = #wdf05:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="wdf06" >
        WDF06 = #wdf06:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="wdf07" >
        WDF07 = #wdf07:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="wdf09" >
        WDF09 = #wdf09:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="drawoutdate" >
        DRAWOUTDATE = #drawoutdate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="datasource" >
        DATASOURCE = #datasource:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="flowid" >
        FLOWID = #flowid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="registno" >
        REGISTNO = #registno:VARCHAR#
      </isNotNull>
    </dynamic>
    where OID = #oid:DECIMAL#
  </update>
</sqlMap>